"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_services_astrology-service_ts";
exports.ids = ["_ssr_services_astrology-service_ts"];
exports.modules = {

/***/ "(ssr)/./services/astrology-api-service.ts":
/*!*******************************************!*\
  !*** ./services/astrology-api-service.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAuthErrors: () => (/* binding */ clearAuthErrors),\n/* harmony export */   fetchNatalChart: () => (/* binding */ fetchNatalChart),\n/* harmony export */   fetchNatalWheelChart: () => (/* binding */ fetchNatalWheelChart),\n/* harmony export */   fetchNatalWheelChartSVG: () => (/* binding */ fetchNatalWheelChartSVG),\n/* harmony export */   geocodeLocation: () => (/* binding */ geocodeLocation),\n/* harmony export */   getDailyHoroscope: () => (/* binding */ getDailyHoroscope),\n/* harmony export */   getNatalChartInterpretation: () => (/* binding */ getNatalChartInterpretation),\n/* harmony export */   getNatalChartInterpretationFromAPI: () => (/* binding */ getNatalChartInterpretationFromAPI)\n/* harmony export */ });\n/* harmony import */ var _utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/fallback-chart */ \"(ssr)/./utils/fallback-chart.ts\");\n/* harmony import */ var _utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/safe-storage */ \"(ssr)/./utils/safe-storage.ts\");\n/* harmony import */ var _utils_environment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/environment */ \"(ssr)/./utils/environment.ts\");\n/**\n * AstrologyAPI Service\n * Handles all interactions with the astrologyapi.com API\n */ \n\n\n// API configuration - using environment variables only\nconst USER_ID = _utils_environment__WEBPACK_IMPORTED_MODULE_2__.env.USER_ID;\nconst API_KEY = _utils_environment__WEBPACK_IMPORTED_MODULE_2__.env.API_KEY;\nconst ASTROLOGY_API_BASE_URL = \"https://json.astrologyapi.com/v1\";\n// Check if API credentials are properly configured\nconst hasValidCredentials = ()=>{\n    const hasCredentials = USER_ID && API_KEY && USER_ID.length > 0 && API_KEY.length > 0;\n    (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Has Valid Credentials:\", hasCredentials);\n    (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - User ID Length:\", USER_ID.length);\n    (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - API Key Length:\", API_KEY.length);\n    return hasCredentials;\n};\n// Store authentication error status in session storage to avoid repeated failed attempts\nconst setAuthError = (hasError)=>{\n    (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeSetSessionItem)(\"astrology_api_auth_error\", hasError ? \"true\" : \"false\");\n    (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Set Auth Error:\", hasError);\n};\n// Check if we've already encountered an authentication error\nconst hasAuthError = ()=>{\n    const hasError = (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeGetSessionItem)(\"astrology_api_auth_error\") === \"true\";\n    (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Has Auth Error:\", hasError);\n    return hasError;\n};\n// Clear any stored authentication errors\nconst clearAuthErrors = ()=>{\n    (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeRemoveSessionItem)(\"astrology_api_auth_error\");\n    (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Cleared Auth Errors\");\n};\n/**\n * Creates Basic Auth headers for API requests\n * Implements the same approach as the successful Python example\n */ const getAuthHeaders = ()=>{\n    try {\n        // Create the auth string in the format \"userId:apiKey\"\n        const authString = `${USER_ID}:${API_KEY}`;\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Auth String Format:\", `${USER_ID}:API_KEY`);\n        // Encode to base64 - similar to Python's HTTPBasicAuth\n        let base64Auth = \"\";\n        if (false) {} else if (typeof Buffer !== \"undefined\") {\n            base64Auth = Buffer.from(authString).toString(\"base64\");\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Using Buffer for encoding\");\n        } else {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Debug - No method available for base64 encoding\");\n            throw new Error(\"Base64 encoding not available\");\n        }\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Base64 Auth (first 10 chars):\", base64Auth.substring(0, 10) + \"...\");\n        // Return headers with Basic Auth\n        return {\n            Authorization: `Basic ${base64Auth}`,\n            \"Content-Type\": \"application/json\"\n        };\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error creating auth headers:\", error);\n        return {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"\"\n        };\n    }\n};\n/**\n * Fetch with retry logic for handling 429 rate limiting\n */ async function fetchWithRetry(url, options, maxRetries = 2, baseDelay = 5000) {\n    for(let attempt = 0; attempt <= maxRetries; attempt++){\n        try {\n            const response = await fetch(url, options);\n            // If successful or non-retryable error, return response\n            if (response.ok || response.status !== 429) {\n                return response;\n            }\n            // Handle 429 rate limiting\n            if (response.status === 429 && attempt < maxRetries) {\n                const delay = baseDelay * Math.pow(2, attempt) // Exponential backoff\n                ;\n                (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(`Rate limited (429), retrying in ${delay}ms (attempt ${attempt + 1}/${maxRetries + 1})`);\n                await new Promise((resolve)=>setTimeout(resolve, delay));\n                continue;\n            }\n            // Return the response for final attempt or non-429 errors\n            return response;\n        } catch (error) {\n            if (attempt === maxRetries) {\n                throw error;\n            }\n            // Wait before retrying on network errors\n            const delay = baseDelay * Math.pow(2, attempt);\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(`Network error, retrying in ${delay}ms (attempt ${attempt + 1}/${maxRetries + 1})`);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n        }\n    }\n    throw new Error(\"Max retries exceeded\");\n}\n/**\n * Fetches natal chart data from AstrologyAPI\n * Returns structured natal chart data for the application\n */ async function fetchNatalChart(birthDate, birthTime, latitude, longitude, timezone = 5.5) {\n    try {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Fetching natal chart with params:\", {\n            birthDate,\n            birthTime,\n            latitude,\n            longitude,\n            timezone\n        });\n        // Check for previous auth errors to avoid repeated failed API calls\n        if (hasAuthError()) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Skipping API call due to previous authentication error\");\n            throw new Error(\"API credentials not configured\");\n        }\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Missing API credentials for AstrologyAPI\");\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        // Format date and time for API\n        const [year, month, day] = birthDate.split(\"-\").map(Number);\n        const [hour, minute] = birthTime.split(\":\").map(Number);\n        // Prepare the request body\n        const requestBody = {\n            day,\n            month,\n            year,\n            hour,\n            min: minute,\n            lat: latitude,\n            lon: longitude,\n            tzone: timezone\n        };\n        // Fetch planets data with retry logic for 429 errors\n        const planetsResponse = await fetchWithRetry(`${ASTROLOGY_API_BASE_URL}/planets`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        const planetsData = await planetsResponse.json();\n        if (planetsData.status === false && planetsData.msg) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"API error:\", planetsData.msg);\n            // Check if it's an authentication error\n            if (planetsData.msg.includes(\"invalid\") || planetsData.msg.includes(\"User ID\")) {\n                setAuthError(true);\n            }\n            throw new Error(planetsData.msg);\n        }\n        if (!planetsResponse.ok) {\n            // Handle 429 specifically with a more user-friendly message\n            if (planetsResponse.status === 429) {\n                throw new Error(\"API_RATE_LIMITED\");\n            }\n            throw new Error(`Planets API error: ${planetsResponse.status} ${planetsResponse.statusText}`);\n        }\n        // Fetch houses data with retry logic\n        const housesResponse = await fetchWithRetry(`${ASTROLOGY_API_BASE_URL}/house_cusps/tropical`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        const housesData = await housesResponse.json();\n        if (housesData.status === false && housesData.msg) {\n            throw new Error(housesData.msg);\n        }\n        if (!housesResponse.ok) {\n            if (housesResponse.status === 429) {\n                throw new Error(\"API_RATE_LIMITED\");\n            }\n            throw new Error(`Houses API error: ${housesResponse.status} ${housesResponse.statusText}`);\n        }\n        // Fetch aspects data with retry logic (optional, continue if it fails)\n        let aspectsData = [];\n        try {\n            const aspectsResponse = await fetchWithRetry(`${ASTROLOGY_API_BASE_URL}/aspects`, {\n                method: \"POST\",\n                headers: getAuthHeaders(),\n                body: JSON.stringify(requestBody)\n            });\n            if (aspectsResponse.ok) {\n                aspectsData = await aspectsResponse.json();\n            }\n        } catch (error) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Aspects data fetch failed, continuing without it:\", error);\n        }\n        // Format the data into our application's structure\n        return formatNatalChartResponse(planetsData, housesData, aspectsData, {\n            date: birthDate,\n            time: birthTime,\n            location: {\n                latitude,\n                longitude,\n                name: \"\"\n            }\n        });\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error fetching natal chart:\", error);\n        throw error;\n    }\n}\n/**\n * Fetches natal wheel chart from AstrologyAPI\n * Updated to handle the new response format that returns a chart URL\n */ async function fetchNatalWheelChart(birthDate, birthTime, latitude, longitude, timezone = 5.5, sign_icon_color = \"WHITE\", sign_background = [\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\"\n]) {\n    try {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - fetchNatalWheelChart called with:\", {\n            birthDate,\n            birthTime,\n            latitude,\n            longitude,\n            timezone\n        });\n        // Check for previous auth errors to avoid repeated failed API calls\n        if (hasAuthError()) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Skipping API call due to previous authentication error\");\n            // Use the general fallback SVG for other charts\n            return {\n                chartUrl: \"\",\n                svgContent: (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)()\n            };\n        }\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Missing API credentials for AstrologyAPI\");\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        // Format date and time for API\n        const [year, month, day] = birthDate.split(\"-\").map(Number);\n        const [hour, minute] = birthTime.split(\":\").map(Number);\n        // Prepare the request body\n        const requestBody = {\n            day,\n            month,\n            year,\n            hour,\n            min: minute,\n            lat: latitude,\n            lon: longitude,\n            tzone: timezone,\n            planet_icon_color: \"Black\",\n            sign_icon_color: \"Black\",\n            sign_background: [\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\"\n            ],\n            inner_circle_background: \"#F4FAFC\",\n            outer_circle_background: \"#F4FAFC\",\n            chart_size: 1000,\n            image_type: \"svg\"\n        };\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Request Body:\", requestBody);\n        // Get auth headers\n        const headers = getAuthHeaders();\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Headers:\", {\n            Authorization: headers.Authorization ? \"Basic ***\" : \"Missing\",\n            \"Content-Type\": headers[\"Content-Type\"]\n        });\n        // Make the API request\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Fetching from URL:\", `${ASTROLOGY_API_BASE_URL}/natal_wheel_chart`);\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/natal_wheel_chart`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify(requestBody)\n        });\n        // Log the response status for debugging\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(`Debug - API Response Status: ${response.status} ${response.statusText}`);\n        // Get the raw response text first for debugging\n        const rawResponseText = await response.text();\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Raw Response (first 200 chars):\", rawResponseText.substring(0, 200));\n        // Try to parse the response as JSON\n        let data;\n        try {\n            data = JSON.parse(rawResponseText);\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Response Keys:\", Object.keys(data));\n        } catch (e) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Debug - Failed to parse response as JSON:\", e);\n            throw new Error(`Failed to parse API response as JSON: ${rawResponseText.substring(0, 100)}...`);\n        }\n        // Check for error in response\n        if (data.status === false && data.msg) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"API error:\", data.msg);\n            // Check if it's an authentication error\n            if (data.msg.includes(\"invalid\") || data.msg.includes(\"User ID\")) {\n                setAuthError(true);\n            }\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Natal wheel chart API error: ${response.status} ${response.statusText}`);\n        }\n        // Check if we have the chart_url in the response\n        if (data.chart_url) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Successfully retrieved chart URL:\", data.chart_url);\n            // Clear any stored auth errors since the request succeeded\n            clearAuthErrors();\n            return {\n                chartUrl: data.chart_url\n            };\n        } else if (data.svg) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Retrieved SVG content instead of URL, length:\", data.svg.length);\n            // Clear any stored auth errors since the request succeeded\n            clearAuthErrors();\n            return {\n                chartUrl: \"\",\n                svgContent: data.svg\n            };\n        } else {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"API response missing chart_url and svg data:\", data);\n            throw new Error(\"No chart data returned from the API\");\n        }\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error fetching natal wheel chart:\", error);\n        // Use the general fallback SVG for other charts\n        return {\n            chartUrl: \"\",\n            svgContent: (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)()\n        };\n    }\n}\n// Keep the old function for backward compatibility\nasync function fetchNatalWheelChartSVG(birthDate, birthTime, latitude, longitude, timezone = 5.5) {\n    try {\n        const result = await fetchNatalWheelChart(birthDate, birthTime, latitude, longitude, timezone);\n        // If we have SVG content, return it\n        if (result.svgContent) {\n            return result.svgContent;\n        }\n        // If we have a chart URL, fetch the SVG content\n        if (result.chartUrl) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Fetching SVG content from URL:\", result.chartUrl);\n            try {\n                const svgResponse = await fetch(result.chartUrl);\n                if (!svgResponse.ok) {\n                    throw new Error(`Failed to fetch SVG from URL: ${svgResponse.status} ${svgResponse.statusText}`);\n                }\n                const svgContent = await svgResponse.text();\n                (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Debug - Successfully fetched SVG content, length:\", svgContent.length);\n                return svgContent;\n            } catch (error) {\n                (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error fetching SVG from URL:\", error);\n                // Return fallback SVG if we can't fetch from URL\n                return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n            }\n        }\n        // Return fallback SVG if no chart data available\n        return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error in fetchNatalWheelChartSVG:\", error);\n        // Return fallback SVG for other charts\n        return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n    }\n}\n/**\n * Geocodes a location string to get latitude and longitude using AstrologyAPI\n */ async function geocodeLocation(location) {\n    try {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Geocoding location:\", location);\n        if (!hasValidCredentials()) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Missing API credentials for AstrologyAPI\");\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        const headers = getAuthHeaders();\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devLog)(\"Using auth headers:\", headers);\n        // Use POST method with place in request body as per API documentation\n        const url = `${ASTROLOGY_API_BASE_URL}/geo_details`;\n        const response = await fetch(url, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify({\n                place: location,\n                maxRows: 1\n            })\n        });\n        if (!response.ok) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Geocoding API error:\", response.status);\n            throw new Error(`Geocoding API error: ${response.status}`);\n        }\n        const data = await response.json();\n        // The API returns a \"geonames\" array with multiple results\n        if (!data || !data.geonames || !Array.isArray(data.geonames) || data.geonames.length === 0) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Invalid geocoding response:\", data);\n            throw new Error(\"Invalid geocoding response\");\n        }\n        const firstResult = data.geonames[0];\n        if (!firstResult.latitude || !firstResult.longitude) {\n            (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Invalid geocoding coordinates:\", firstResult);\n            throw new Error(\"Invalid geocoding coordinates\");\n        }\n        return {\n            latitude: parseFloat(firstResult.latitude),\n            longitude: parseFloat(firstResult.longitude),\n            name: firstResult.place_name || location\n        };\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error geocoding location:\", error);\n        // Fallback: Las Vegas\n        return {\n            latitude: 36.1699,\n            longitude: -115.1398,\n            name: location\n        };\n    }\n}\n/**\n * Formats the API response into our application's data structure\n */ function formatNatalChartResponse(planetsData, housesData, aspectsData, birthDetails) {\n    // Extract and format planet positions\n    const validCelestialBodies = [\n        \"sun\",\n        \"moon\",\n        \"mercury\",\n        \"venus\",\n        \"mars\",\n        \"jupiter\",\n        \"saturn\",\n        \"uranus\",\n        \"neptune\",\n        \"pluto\",\n        \"chiron\",\n        \"north_node\",\n        \"south_node\"\n    ];\n    const planets = planetsData.map((planet)=>{\n        const planetName = convertPlanetName(planet.name);\n        if (!validCelestialBodies.includes(planetName)) return null;\n        return {\n            name: planetName,\n            sign: planet.sign.toLowerCase(),\n            degree: planet.norm_degree,\n            house: planet.house,\n            retrograde: planet.is_retrograde === 1,\n            aspectsToOtherPlanets: []\n        };\n    }).filter(Boolean);\n    // Extract and format houses\n    const houses = Object.keys(housesData).map((key)=>{\n        const house = housesData[key];\n        return {\n            number: Number.parseInt(key.replace(\"house\", \"\")),\n            sign: house.sign.toLowerCase(),\n            degree: house.degree,\n            cusp: true\n        };\n    });\n    // Extract and format angles (Ascendant, Midheaven, etc.)\n    const angles = {\n        ascendant: {\n            sign: housesData.ascendant.sign.toLowerCase(),\n            degree: housesData.ascendant.degree\n        },\n        midheaven: {\n            sign: housesData.midheaven.sign.toLowerCase(),\n            degree: housesData.midheaven.degree\n        },\n        descendant: {\n            sign: getOppositeSign(housesData.ascendant.sign.toLowerCase()),\n            degree: (housesData.ascendant.degree + 180) % 360\n        },\n        imumCoeli: {\n            sign: getOppositeSign(housesData.midheaven.sign.toLowerCase()),\n            degree: (housesData.midheaven.degree + 180) % 360\n        }\n    };\n    // Format aspects data\n    const aspects = aspectsData.map((aspect)=>({\n            aspect: aspect.aspect.toLowerCase(),\n            planet1: convertPlanetName(aspect.planet1),\n            planet2: convertPlanetName(aspect.planet2),\n            orb: aspect.orb,\n            applying: aspect.applying === 1\n        }));\n    return {\n        planets,\n        houses,\n        angles,\n        aspects,\n        birthDetails\n    };\n}\n/**\n * Converts AstrologyAPI planet names to our application's format\n */ function convertPlanetName(apiPlanetName) {\n    const planetMap = {\n        Sun: \"sun\",\n        Moon: \"moon\",\n        Mercury: \"mercury\",\n        Venus: \"venus\",\n        Mars: \"mars\",\n        Jupiter: \"jupiter\",\n        Saturn: \"saturn\",\n        Uranus: \"uranus\",\n        Neptune: \"neptune\",\n        Pluto: \"pluto\",\n        Rahu: \"north_node\",\n        Ketu: \"south_node\"\n    };\n    return planetMap[apiPlanetName] || apiPlanetName.toLowerCase();\n}\n/**\n * Gets the opposite zodiac sign\n */ function getOppositeSign(sign) {\n    const zodiacSigns = [\n        \"aries\",\n        \"taurus\",\n        \"gemini\",\n        \"cancer\",\n        \"leo\",\n        \"virgo\",\n        \"libra\",\n        \"scorpio\",\n        \"sagittarius\",\n        \"capricorn\",\n        \"aquarius\",\n        \"pisces\"\n    ];\n    const index = zodiacSigns.indexOf(sign);\n    if (index === -1) return \"aries\" // Default fallback\n    ;\n    const oppositeIndex = (index + 6) % 12;\n    return zodiacSigns[oppositeIndex];\n}\n/**\n * Gets interpretations for a natal chart\n */ async function getNatalChartInterpretation(natalChart) {\n    try {\n        // This would be implemented to fetch interpretations from AstrologyAPI\n        // For now, we'll return a placeholder interpretation\n        return {\n            overview: {\n                title: \"Your Cosmic Blueprint\",\n                description: \"Your natal chart reveals your unique cosmic blueprint, showing the positions of the planets at the moment of your birth. This celestial snapshot offers insights into your personality, strengths, challenges, and life path.\"\n            },\n            sunSign: {\n                title: \"Sun Sign\",\n                description: \"Your Sun sign represents your core essence and life purpose.\",\n                keywords: [\n                    \"identity\",\n                    \"purpose\",\n                    \"vitality\"\n                ]\n            },\n            moonSign: {\n                title: \"Moon Sign\",\n                description: \"Your Moon sign reflects your emotional nature and subconscious patterns.\",\n                keywords: [\n                    \"emotions\",\n                    \"instincts\",\n                    \"comfort\"\n                ]\n            },\n            ascendantSign: {\n                title: \"Ascendant\",\n                description: \"Your Ascendant represents how you present yourself to the world.\",\n                keywords: [\n                    \"appearance\",\n                    \"first impressions\",\n                    \"personal style\"\n                ]\n            },\n            planetPositions: {\n                sun: {\n                    description: \"Your Sun placement indicates your core identity and purpose in life.\",\n                    keywords: [\n                        \"identity\",\n                        \"purpose\",\n                        \"vitality\"\n                    ]\n                },\n                moon: {\n                    description: \"Your Moon placement reveals your emotional nature and subconscious patterns.\",\n                    keywords: [\n                        \"emotions\",\n                        \"instincts\",\n                        \"comfort\"\n                    ]\n                },\n                mercury: {\n                    description: \"Your Mercury placement shows how you think and communicate.\",\n                    keywords: [\n                        \"communication\",\n                        \"thinking\",\n                        \"learning\"\n                    ]\n                },\n                venus: {\n                    description: \"Your Venus placement indicates how you express and receive love and beauty.\",\n                    keywords: [\n                        \"love\",\n                        \"beauty\",\n                        \"values\"\n                    ]\n                },\n                mars: {\n                    description: \"Your Mars placement shows how you assert yourself and take action.\",\n                    keywords: [\n                        \"action\",\n                        \"desire\",\n                        \"energy\"\n                    ]\n                },\n                jupiter: {\n                    description: \"Your Jupiter placement reveals where you find growth and expansion.\",\n                    keywords: [\n                        \"growth\",\n                        \"luck\",\n                        \"abundance\"\n                    ]\n                },\n                saturn: {\n                    description: \"Your Saturn placement indicates where you face challenges and learn discipline.\",\n                    keywords: [\n                        \"discipline\",\n                        \"responsibility\",\n                        \"structure\"\n                    ]\n                },\n                uranus: {\n                    description: \"Your Uranus placement shows where you seek freedom and innovation.\",\n                    keywords: [\n                        \"innovation\",\n                        \"rebellion\",\n                        \"change\"\n                    ]\n                },\n                neptune: {\n                    description: \"Your Neptune placement reveals your spiritual and creative aspirations.\",\n                    keywords: [\n                        \"spirituality\",\n                        \"dreams\",\n                        \"illusion\"\n                    ]\n                },\n                pluto: {\n                    description: \"Your Pluto placement indicates where you experience transformation and power.\",\n                    keywords: [\n                        \"transformation\",\n                        \"power\",\n                        \"rebirth\"\n                    ]\n                }\n            },\n            houses: {\n                1: {\n                    description: \"The 1st house represents your self-image and how you present yourself to the world.\"\n                },\n                2: {\n                    description: \"The 2nd house represents your values, possessions, and resources.\"\n                },\n                3: {\n                    description: \"The 3rd house represents communication, learning, and your immediate environment.\"\n                },\n                4: {\n                    description: \"The 4th house represents your home, family, and emotional foundations.\"\n                },\n                5: {\n                    description: \"The 5th house represents creativity, pleasure, and self-expression.\"\n                },\n                6: {\n                    description: \"The 6th house represents work, health, and daily routines.\"\n                },\n                7: {\n                    description: \"The 7th house represents partnerships, relationships, and open enemies.\"\n                },\n                8: {\n                    description: \"The 8th house represents transformation, shared resources, and the occult.\"\n                },\n                9: {\n                    description: \"The 9th house represents higher education, philosophy, and long-distance travel.\"\n                },\n                10: {\n                    description: \"The 10th house represents career, public image, and authority.\"\n                },\n                11: {\n                    description: \"The 11th house represents friendships, groups, and aspirations.\"\n                },\n                12: {\n                    description: \"The 12th house represents the unconscious, spirituality, and hidden enemies.\"\n                }\n            }\n        };\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error getting chart interpretation:\", error);\n        throw error;\n    }\n}\n/**\n * Gets a daily horoscope for a zodiac sign\n */ async function getDailyHoroscope(sign) {\n    try {\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            throw new Error(\"API credentials not configured\");\n        }\n        // Make the API request\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/horoscope_prediction/daily/${sign}`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify({})\n        });\n        const data = await response.json();\n        // Check for error in response\n        if (data.status === false && data.msg) {\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Horoscope error: ${response.status} ${response.statusText}`);\n        }\n        // Format the response to match our application's structure\n        return {\n            sign: sign,\n            date: new Date().toISOString().split(\"T\")[0],\n            prediction: data.prediction || \"Your horoscope for today is not available.\",\n            lucky_number: data.lucky_number || \"7\",\n            lucky_color: data.lucky_color || \"Blue\",\n            mood: data.mood || \"Reflective\",\n            compatibility: data.compatibility || \"Libra\"\n        };\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error getting daily horoscope:\", error);\n        throw error;\n    }\n}\nasync function getNatalChartInterpretationFromAPI(birthData) {\n    try {\n        if (!hasValidCredentials()) {\n            throw new Error(\"API credentials not configured\");\n        }\n        const headers = getAuthHeaders();\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/natal_chart_interpretation`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify(birthData)\n        });\n        const data = await response.json();\n        if (data.status === false && data.msg) {\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Interpretation API error: ${response.status} ${response.statusText}`);\n        }\n        return data;\n    } catch (error) {\n        (0,_utils_environment__WEBPACK_IMPORTED_MODULE_2__.devError)(\"Error fetching natal chart interpretation:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU8sTUFBTTdELFNBQVNvQyxJQUFJO1FBQ2hDLElBQUl5QixLQUFLMUQsTUFBTSxLQUFLLFNBQVMwRCxLQUFLeEIsR0FBRyxFQUFFO1lBQ3JDLE1BQU0sSUFBSS9DLE1BQU11RSxLQUFLeEIsR0FBRztRQUMxQjtRQUNBLElBQUksQ0FBQ3JDLFNBQVNFLEVBQUUsRUFBRTtZQUNoQixNQUFNLElBQUlaLE1BQU0sQ0FBQywwQkFBMEIsRUFBRVUsU0FBU0csTUFBTSxDQUFDLENBQUMsRUFBRUgsU0FBU3VDLFVBQVUsRUFBRTtRQUN2RjtRQUNBLE9BQU9zQjtJQUNULEVBQUUsT0FBT3BFLE9BQU87UUFDZHRCLDREQUFRQSxDQUFDLDhDQUE4Q3NCO1FBQ3ZELE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcmtvbm92YWtvdnNraS9Eb2N1bWVudHMvVmlzdWFsIENvZGUvQXN0cm9Cb29rL0FzdHJvQm9vay9zZXJ2aWNlcy9hc3Ryb2xvZ3ktYXBpLXNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBc3Ryb2xvZ3lBUEkgU2VydmljZVxuICogSGFuZGxlcyBhbGwgaW50ZXJhY3Rpb25zIHdpdGggdGhlIGFzdHJvbG9neWFwaS5jb20gQVBJXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBOYXRhbENoYXJ0LCBQbGFuZXRQb3NpdGlvbiwgWm9kaWFjU2lnbiwgSG91c2UsIEFuZ2xlLCBDZWxlc3RpYWxCb2R5IH0gZnJvbSBcIkAvdHlwZXMvYXN0cm9sb2d5XCJcbmltcG9ydCB7IGdldEZhbGxiYWNrTmF0YWxDaGFydCB9IGZyb20gXCJAL3V0aWxzL2ZhbGxiYWNrLWNoYXJ0XCJcbmltcG9ydCB7IHNhZmVHZXRTZXNzaW9uSXRlbSwgc2FmZVNldFNlc3Npb25JdGVtLCBzYWZlUmVtb3ZlU2Vzc2lvbkl0ZW0gfSBmcm9tIFwiQC91dGlscy9zYWZlLXN0b3JhZ2VcIlxuaW1wb3J0IHsgZW52LCBkZXZMb2csIGRldkVycm9yIH0gZnJvbSBcIkAvdXRpbHMvZW52aXJvbm1lbnRcIlxuXG4vLyBBUEkgY29uZmlndXJhdGlvbiAtIHVzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlcyBvbmx5XG5jb25zdCBVU0VSX0lEID0gZW52LlVTRVJfSURcbmNvbnN0IEFQSV9LRVkgPSBlbnYuQVBJX0tFWVxuY29uc3QgQVNUUk9MT0dZX0FQSV9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9qc29uLmFzdHJvbG9neWFwaS5jb20vdjFcIlxuXG4vLyBDaGVjayBpZiBBUEkgY3JlZGVudGlhbHMgYXJlIHByb3Blcmx5IGNvbmZpZ3VyZWRcbmNvbnN0IGhhc1ZhbGlkQ3JlZGVudGlhbHMgPSAoKSA9PiB7XG4gIGNvbnN0IGhhc0NyZWRlbnRpYWxzID0gVVNFUl9JRCAmJiBBUElfS0VZICYmIFVTRVJfSUQubGVuZ3RoID4gMCAmJiBBUElfS0VZLmxlbmd0aCA+IDBcblxuICBkZXZMb2coXCJEZWJ1ZyAtIEhhcyBWYWxpZCBDcmVkZW50aWFsczpcIiwgaGFzQ3JlZGVudGlhbHMpXG4gIGRldkxvZyhcIkRlYnVnIC0gVXNlciBJRCBMZW5ndGg6XCIsIFVTRVJfSUQubGVuZ3RoKVxuICBkZXZMb2coXCJEZWJ1ZyAtIEFQSSBLZXkgTGVuZ3RoOlwiLCBBUElfS0VZLmxlbmd0aClcblxuICByZXR1cm4gaGFzQ3JlZGVudGlhbHNcbn1cblxuLy8gU3RvcmUgYXV0aGVudGljYXRpb24gZXJyb3Igc3RhdHVzIGluIHNlc3Npb24gc3RvcmFnZSB0byBhdm9pZCByZXBlYXRlZCBmYWlsZWQgYXR0ZW1wdHNcbmNvbnN0IHNldEF1dGhFcnJvciA9IChoYXNFcnJvcjogYm9vbGVhbikgPT4ge1xuICBzYWZlU2V0U2Vzc2lvbkl0ZW0oXCJhc3Ryb2xvZ3lfYXBpX2F1dGhfZXJyb3JcIiwgaGFzRXJyb3IgPyBcInRydWVcIiA6IFwiZmFsc2VcIik7XG4gIGRldkxvZyhcIkRlYnVnIC0gU2V0IEF1dGggRXJyb3I6XCIsIGhhc0Vycm9yKTtcbn1cblxuLy8gQ2hlY2sgaWYgd2UndmUgYWxyZWFkeSBlbmNvdW50ZXJlZCBhbiBhdXRoZW50aWNhdGlvbiBlcnJvclxuY29uc3QgaGFzQXV0aEVycm9yID0gKCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBoYXNFcnJvciA9IHNhZmVHZXRTZXNzaW9uSXRlbShcImFzdHJvbG9neV9hcGlfYXV0aF9lcnJvclwiKSA9PT0gXCJ0cnVlXCI7XG4gIGRldkxvZyhcIkRlYnVnIC0gSGFzIEF1dGggRXJyb3I6XCIsIGhhc0Vycm9yKTtcbiAgcmV0dXJuIGhhc0Vycm9yO1xufVxuXG4vLyBDbGVhciBhbnkgc3RvcmVkIGF1dGhlbnRpY2F0aW9uIGVycm9yc1xuZXhwb3J0IGNvbnN0IGNsZWFyQXV0aEVycm9ycyA9ICgpID0+IHtcbiAgc2FmZVJlbW92ZVNlc3Npb25JdGVtKFwiYXN0cm9sb2d5X2FwaV9hdXRoX2Vycm9yXCIpO1xuICBkZXZMb2coXCJEZWJ1ZyAtIENsZWFyZWQgQXV0aCBFcnJvcnNcIik7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBCYXNpYyBBdXRoIGhlYWRlcnMgZm9yIEFQSSByZXF1ZXN0c1xuICogSW1wbGVtZW50cyB0aGUgc2FtZSBhcHByb2FjaCBhcyB0aGUgc3VjY2Vzc2Z1bCBQeXRob24gZXhhbXBsZVxuICovXG5jb25zdCBnZXRBdXRoSGVhZGVycyA9ICgpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBDcmVhdGUgdGhlIGF1dGggc3RyaW5nIGluIHRoZSBmb3JtYXQgXCJ1c2VySWQ6YXBpS2V5XCJcbiAgICBjb25zdCBhdXRoU3RyaW5nID0gYCR7VVNFUl9JRH06JHtBUElfS0VZfWBcbiAgICBkZXZMb2coXCJEZWJ1ZyAtIEF1dGggU3RyaW5nIEZvcm1hdDpcIiwgYCR7VVNFUl9JRH06QVBJX0tFWWApXG5cbiAgICAvLyBFbmNvZGUgdG8gYmFzZTY0IC0gc2ltaWxhciB0byBQeXRob24ncyBIVFRQQmFzaWNBdXRoXG4gICAgbGV0IGJhc2U2NEF1dGggPSBcIlwiXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmJ0b2EpIHtcbiAgICAgIGJhc2U2NEF1dGggPSB3aW5kb3cuYnRvYShhdXRoU3RyaW5nKVxuICAgICAgZGV2TG9nKFwiRGVidWcgLSBVc2luZyB3aW5kb3cuYnRvYSBmb3IgZW5jb2RpbmdcIilcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBCdWZmZXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGJhc2U2NEF1dGggPSBCdWZmZXIuZnJvbShhdXRoU3RyaW5nKS50b1N0cmluZyhcImJhc2U2NFwiKVxuICAgICAgZGV2TG9nKFwiRGVidWcgLSBVc2luZyBCdWZmZXIgZm9yIGVuY29kaW5nXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRldkVycm9yKFwiRGVidWcgLSBObyBtZXRob2QgYXZhaWxhYmxlIGZvciBiYXNlNjQgZW5jb2RpbmdcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhc2U2NCBlbmNvZGluZyBub3QgYXZhaWxhYmxlXCIpXG4gICAgfVxuXG4gICAgZGV2TG9nKFwiRGVidWcgLSBCYXNlNjQgQXV0aCAoZmlyc3QgMTAgY2hhcnMpOlwiLCBiYXNlNjRBdXRoLnN1YnN0cmluZygwLCAxMCkgKyBcIi4uLlwiKVxuXG4gICAgLy8gUmV0dXJuIGhlYWRlcnMgd2l0aCBCYXNpYyBBdXRoXG4gICAgcmV0dXJuIHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCYXNpYyAke2Jhc2U2NEF1dGh9YCxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZXZFcnJvcihcIkVycm9yIGNyZWF0aW5nIGF1dGggaGVhZGVyczpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiXCIsIC8vIFJldHVybiBlbXB0eSBzdHJpbmcgaW5zdGVhZCBvZiB1bmRlZmluZWRcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaCB3aXRoIHJldHJ5IGxvZ2ljIGZvciBoYW5kbGluZyA0MjkgcmF0ZSBsaW1pdGluZ1xuICovXG5hc3luYyBmdW5jdGlvbiBmZXRjaFdpdGhSZXRyeShcbiAgdXJsOiBzdHJpbmcsIFxuICBvcHRpb25zOiBSZXF1ZXN0SW5pdCwgXG4gIG1heFJldHJpZXM6IG51bWJlciA9IDIsXG4gIGJhc2VEZWxheTogbnVtYmVyID0gNTAwMFxuKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICBmb3IgKGxldCBhdHRlbXB0ID0gMDsgYXR0ZW1wdCA8PSBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIG9wdGlvbnMpXG4gICAgICBcbiAgICAgIC8vIElmIHN1Y2Nlc3NmdWwgb3Igbm9uLXJldHJ5YWJsZSBlcnJvciwgcmV0dXJuIHJlc3BvbnNlXG4gICAgICBpZiAocmVzcG9uc2Uub2sgfHwgcmVzcG9uc2Uuc3RhdHVzICE9PSA0MjkpIHtcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSA0MjkgcmF0ZSBsaW1pdGluZ1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5ICYmIGF0dGVtcHQgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gYmFzZURlbGF5ICogTWF0aC5wb3coMiwgYXR0ZW1wdCkgLy8gRXhwb25lbnRpYWwgYmFja29mZlxuICAgICAgICBkZXZMb2coYFJhdGUgbGltaXRlZCAoNDI5KSwgcmV0cnlpbmcgaW4gJHtkZWxheX1tcyAoYXR0ZW1wdCAke2F0dGVtcHQgKyAxfS8ke21heFJldHJpZXMgKyAxfSlgKVxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKVxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBSZXR1cm4gdGhlIHJlc3BvbnNlIGZvciBmaW5hbCBhdHRlbXB0IG9yIG5vbi00MjkgZXJyb3JzXG4gICAgICByZXR1cm4gcmVzcG9uc2VcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGF0dGVtcHQgPT09IG1heFJldHJpZXMpIHtcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICAgIC8vIFdhaXQgYmVmb3JlIHJldHJ5aW5nIG9uIG5ldHdvcmsgZXJyb3JzXG4gICAgICBjb25zdCBkZWxheSA9IGJhc2VEZWxheSAqIE1hdGgucG93KDIsIGF0dGVtcHQpXG4gICAgICBkZXZMb2coYE5ldHdvcmsgZXJyb3IsIHJldHJ5aW5nIGluICR7ZGVsYXl9bXMgKGF0dGVtcHQgJHthdHRlbXB0ICsgMX0vJHttYXhSZXRyaWVzICsgMX0pYClcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpXG4gICAgfVxuICB9XG4gIFxuICB0aHJvdyBuZXcgRXJyb3IoXCJNYXggcmV0cmllcyBleGNlZWRlZFwiKVxufVxuXG4vKipcbiAqIEZldGNoZXMgbmF0YWwgY2hhcnQgZGF0YSBmcm9tIEFzdHJvbG9neUFQSVxuICogUmV0dXJucyBzdHJ1Y3R1cmVkIG5hdGFsIGNoYXJ0IGRhdGEgZm9yIHRoZSBhcHBsaWNhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hOYXRhbENoYXJ0KFxuICBiaXJ0aERhdGU6IHN0cmluZyxcbiAgYmlydGhUaW1lOiBzdHJpbmcsXG4gIGxhdGl0dWRlOiBudW1iZXIsXG4gIGxvbmdpdHVkZTogbnVtYmVyLFxuICB0aW1lem9uZSA9IDUuNSwgLy8gRGVmYXVsdCB0byBJU1Rcbik6IFByb21pc2U8TmF0YWxDaGFydD4ge1xuICB0cnkge1xuICAgIGRldkxvZyhcIkZldGNoaW5nIG5hdGFsIGNoYXJ0IHdpdGggcGFyYW1zOlwiLCB7IGJpcnRoRGF0ZSwgYmlydGhUaW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lem9uZSB9KVxuXG4gICAgLy8gQ2hlY2sgZm9yIHByZXZpb3VzIGF1dGggZXJyb3JzIHRvIGF2b2lkIHJlcGVhdGVkIGZhaWxlZCBBUEkgY2FsbHNcbiAgICBpZiAoaGFzQXV0aEVycm9yKCkpIHtcbiAgICAgIGRldkxvZyhcIlNraXBwaW5nIEFQSSBjYWxsIGR1ZSB0byBwcmV2aW91cyBhdXRoZW50aWNhdGlvbiBlcnJvclwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkXCIpXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgY3JlZGVudGlhbHMgZmlyc3RcbiAgICBpZiAoIWhhc1ZhbGlkQ3JlZGVudGlhbHMoKSkge1xuICAgICAgZGV2TG9nKFwiTWlzc2luZyBBUEkgY3JlZGVudGlhbHMgZm9yIEFzdHJvbG9neUFQSVwiKVxuICAgICAgc2V0QXV0aEVycm9yKHRydWUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWRcIilcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgZGF0ZSBhbmQgdGltZSBmb3IgQVBJXG4gICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gYmlydGhEYXRlLnNwbGl0KFwiLVwiKS5tYXAoTnVtYmVyKVxuICAgIGNvbnN0IFtob3VyLCBtaW51dGVdID0gYmlydGhUaW1lLnNwbGl0KFwiOlwiKS5tYXAoTnVtYmVyKVxuXG4gICAgLy8gUHJlcGFyZSB0aGUgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICBkYXksXG4gICAgICBtb250aCxcbiAgICAgIHllYXIsXG4gICAgICBob3VyLFxuICAgICAgbWluOiBtaW51dGUsXG4gICAgICBsYXQ6IGxhdGl0dWRlLFxuICAgICAgbG9uOiBsb25naXR1ZGUsXG4gICAgICB0em9uZTogdGltZXpvbmUsXG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggcGxhbmV0cyBkYXRhIHdpdGggcmV0cnkgbG9naWMgZm9yIDQyOSBlcnJvcnNcbiAgICBjb25zdCBwbGFuZXRzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9wbGFuZXRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IGdldEF1dGhIZWFkZXJzKCksXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSlcblxuICAgIGNvbnN0IHBsYW5ldHNEYXRhID0gYXdhaXQgcGxhbmV0c1Jlc3BvbnNlLmpzb24oKVxuXG4gICAgaWYgKHBsYW5ldHNEYXRhLnN0YXR1cyA9PT0gZmFsc2UgJiYgcGxhbmV0c0RhdGEubXNnKSB7XG4gICAgICBkZXZFcnJvcihcIkFQSSBlcnJvcjpcIiwgcGxhbmV0c0RhdGEubXNnKVxuXG4gICAgICAvLyBDaGVjayBpZiBpdCdzIGFuIGF1dGhlbnRpY2F0aW9uIGVycm9yXG4gICAgICBpZiAocGxhbmV0c0RhdGEubXNnLmluY2x1ZGVzKFwiaW52YWxpZFwiKSB8fCBwbGFuZXRzRGF0YS5tc2cuaW5jbHVkZXMoXCJVc2VyIElEXCIpKSB7XG4gICAgICAgIHNldEF1dGhFcnJvcih0cnVlKVxuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IocGxhbmV0c0RhdGEubXNnKVxuICAgIH1cblxuICAgIGlmICghcGxhbmV0c1Jlc3BvbnNlLm9rKSB7XG4gICAgICAvLyBIYW5kbGUgNDI5IHNwZWNpZmljYWxseSB3aXRoIGEgbW9yZSB1c2VyLWZyaWVuZGx5IG1lc3NhZ2VcbiAgICAgIGlmIChwbGFuZXRzUmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJX1JBVEVfTElNSVRFRFwiKVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQbGFuZXRzIEFQSSBlcnJvcjogJHtwbGFuZXRzUmVzcG9uc2Uuc3RhdHVzfSAke3BsYW5ldHNSZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggaG91c2VzIGRhdGEgd2l0aCByZXRyeSBsb2dpY1xuICAgIGNvbnN0IGhvdXNlc1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkoYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vaG91c2VfY3VzcHMvdHJvcGljYWxgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLCBcbiAgICAgIGhlYWRlcnM6IGdldEF1dGhIZWFkZXJzKCksXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSlcblxuICAgIGNvbnN0IGhvdXNlc0RhdGEgPSBhd2FpdCBob3VzZXNSZXNwb25zZS5qc29uKClcblxuICAgIGlmIChob3VzZXNEYXRhLnN0YXR1cyA9PT0gZmFsc2UgJiYgaG91c2VzRGF0YS5tc2cpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihob3VzZXNEYXRhLm1zZylcbiAgICB9XG5cbiAgICBpZiAoIWhvdXNlc1Jlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAoaG91c2VzUmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJX1JBVEVfTElNSVRFRFwiKVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBIb3VzZXMgQVBJIGVycm9yOiAke2hvdXNlc1Jlc3BvbnNlLnN0YXR1c30gJHtob3VzZXNSZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggYXNwZWN0cyBkYXRhIHdpdGggcmV0cnkgbG9naWMgKG9wdGlvbmFsLCBjb250aW51ZSBpZiBpdCBmYWlscylcbiAgICBsZXQgYXNwZWN0c0RhdGEgPSBbXVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBhc3BlY3RzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9hc3BlY3RzYCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiBnZXRBdXRoSGVhZGVycygpLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgICB9KVxuICAgICAgXG4gICAgICBpZiAoYXNwZWN0c1Jlc3BvbnNlLm9rKSB7XG4gICAgICAgIGFzcGVjdHNEYXRhID0gYXdhaXQgYXNwZWN0c1Jlc3BvbnNlLmpzb24oKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coXCJBc3BlY3RzIGRhdGEgZmV0Y2ggZmFpbGVkLCBjb250aW51aW5nIHdpdGhvdXQgaXQ6XCIsIGVycm9yKVxuICAgIH1cblxuICAgIC8vIEZvcm1hdCB0aGUgZGF0YSBpbnRvIG91ciBhcHBsaWNhdGlvbidzIHN0cnVjdHVyZVxuICAgIHJldHVybiBmb3JtYXROYXRhbENoYXJ0UmVzcG9uc2UocGxhbmV0c0RhdGEsIGhvdXNlc0RhdGEsIGFzcGVjdHNEYXRhLCB7XG4gICAgICBkYXRlOiBiaXJ0aERhdGUsXG4gICAgICB0aW1lOiBiaXJ0aFRpbWUsXG4gICAgICBsb2NhdGlvbjoge1xuICAgICAgICBsYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgfSxcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRldkVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgY2hhcnQ6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIHdoZWVsIGNoYXJ0IGZyb20gQXN0cm9sb2d5QVBJXG4gKiBVcGRhdGVkIHRvIGhhbmRsZSB0aGUgbmV3IHJlc3BvbnNlIGZvcm1hdCB0aGF0IHJldHVybnMgYSBjaGFydCBVUkxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTmF0YWxXaGVlbENoYXJ0KFxuICBiaXJ0aERhdGU6IHN0cmluZyxcbiAgYmlydGhUaW1lOiBzdHJpbmcsXG4gIGxhdGl0dWRlOiBudW1iZXIsXG4gIGxvbmdpdHVkZTogbnVtYmVyLFxuICB0aW1lem9uZSA9IDUuNSwgLy8gRGVmYXVsdCB0byBJU1RcbiAgc2lnbl9pY29uX2NvbG9yOiBzdHJpbmcgPSBcIldISVRFXCIsXG4gIHNpZ25fYmFja2dyb3VuZDogc3RyaW5nW10gPSBbXG4gICAgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIixcbiAgICBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiXG4gIF1cbik6IFByb21pc2U8eyBjaGFydFVybDogc3RyaW5nOyBzdmdDb250ZW50Pzogc3RyaW5nIH0+IHtcbiAgdHJ5IHtcbiAgICBkZXZMb2coXCJEZWJ1ZyAtIGZldGNoTmF0YWxXaGVlbENoYXJ0IGNhbGxlZCB3aXRoOlwiLCB7IGJpcnRoRGF0ZSwgYmlydGhUaW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lem9uZSB9KVxuXG4gICAgLy8gQ2hlY2sgZm9yIHByZXZpb3VzIGF1dGggZXJyb3JzIHRvIGF2b2lkIHJlcGVhdGVkIGZhaWxlZCBBUEkgY2FsbHNcbiAgICBpZiAoaGFzQXV0aEVycm9yKCkpIHtcbiAgICAgIGRldkxvZyhcIlNraXBwaW5nIEFQSSBjYWxsIGR1ZSB0byBwcmV2aW91cyBhdXRoZW50aWNhdGlvbiBlcnJvclwiKVxuXG4gICAgICAvLyBVc2UgdGhlIGdlbmVyYWwgZmFsbGJhY2sgU1ZHIGZvciBvdGhlciBjaGFydHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNoYXJ0VXJsOiBcIlwiLFxuICAgICAgICBzdmdDb250ZW50OiBnZXRGYWxsYmFja05hdGFsQ2hhcnQoKSxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBjcmVkZW50aWFscyBmaXJzdFxuICAgIGlmICghaGFzVmFsaWRDcmVkZW50aWFscygpKSB7XG4gICAgICBkZXZMb2coXCJNaXNzaW5nIEFQSSBjcmVkZW50aWFscyBmb3IgQXN0cm9sb2d5QVBJXCIpXG4gICAgICBzZXRBdXRoRXJyb3IodHJ1ZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZFwiKVxuICAgIH1cblxuICAgIC8vIEZvcm1hdCBkYXRlIGFuZCB0aW1lIGZvciBBUElcbiAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBiaXJ0aERhdGUuc3BsaXQoXCItXCIpLm1hcChOdW1iZXIpXG4gICAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSBiaXJ0aFRpbWUuc3BsaXQoXCI6XCIpLm1hcChOdW1iZXIpXG5cbiAgICAvLyBQcmVwYXJlIHRoZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgIGRheSxcbiAgICAgIG1vbnRoLFxuICAgICAgeWVhcixcbiAgICAgIGhvdXIsXG4gICAgICBtaW46IG1pbnV0ZSxcbiAgICAgIGxhdDogbGF0aXR1ZGUsXG4gICAgICBsb246IGxvbmdpdHVkZSxcbiAgICAgIHR6b25lOiB0aW1lem9uZSxcbiAgICAgIHBsYW5ldF9pY29uX2NvbG9yOiBcIkJsYWNrXCIsXG4gICAgICBzaWduX2ljb25fY29sb3I6IFwiQmxhY2tcIixcbiAgICAgIHNpZ25fYmFja2dyb3VuZDogW1xuICAgICAgICBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLFxuICAgICAgICBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiXG4gICAgICBdLFxuICAgICAgaW5uZXJfY2lyY2xlX2JhY2tncm91bmQ6IFwiI0Y0RkFGQ1wiLFxuICAgICAgb3V0ZXJfY2lyY2xlX2JhY2tncm91bmQ6IFwiI0Y0RkFGQ1wiLFxuICAgICAgY2hhcnRfc2l6ZTogMTAwMCxcbiAgICAgIGltYWdlX3R5cGU6IFwic3ZnXCJcbiAgICB9XG5cbiAgICBkZXZMb2coXCJEZWJ1ZyAtIFJlcXVlc3QgQm9keTpcIiwgcmVxdWVzdEJvZHkpXG5cbiAgICAvLyBHZXQgYXV0aCBoZWFkZXJzXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEF1dGhIZWFkZXJzKClcbiAgICBkZXZMb2coXCJEZWJ1ZyAtIEhlYWRlcnM6XCIsIHtcbiAgICAgIEF1dGhvcml6YXRpb246IGhlYWRlcnMuQXV0aG9yaXphdGlvbiA/IFwiQmFzaWMgKioqXCIgOiBcIk1pc3NpbmdcIixcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0sXG4gICAgfSlcblxuICAgIC8vIE1ha2UgdGhlIEFQSSByZXF1ZXN0XG4gICAgZGV2TG9nKFwiRGVidWcgLSBGZXRjaGluZyBmcm9tIFVSTDpcIiwgYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vbmF0YWxfd2hlZWxfY2hhcnRgKVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9uYXRhbF93aGVlbF9jaGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgIH0pXG5cbiAgICAvLyBMb2cgdGhlIHJlc3BvbnNlIHN0YXR1cyBmb3IgZGVidWdnaW5nXG4gICAgZGV2TG9nKGBEZWJ1ZyAtIEFQSSBSZXNwb25zZSBTdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcblxuICAgIC8vIEdldCB0aGUgcmF3IHJlc3BvbnNlIHRleHQgZmlyc3QgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnN0IHJhd1Jlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgIGRldkxvZyhcIkRlYnVnIC0gUmF3IFJlc3BvbnNlIChmaXJzdCAyMDAgY2hhcnMpOlwiLCByYXdSZXNwb25zZVRleHQuc3Vic3RyaW5nKDAsIDIwMCkpXG5cbiAgICAvLyBUcnkgdG8gcGFyc2UgdGhlIHJlc3BvbnNlIGFzIEpTT05cbiAgICBsZXQgZGF0YVxuICAgIHRyeSB7XG4gICAgICBkYXRhID0gSlNPTi5wYXJzZShyYXdSZXNwb25zZVRleHQpXG4gICAgICBkZXZMb2coXCJEZWJ1ZyAtIFJlc3BvbnNlIEtleXM6XCIsIE9iamVjdC5rZXlzKGRhdGEpKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGRldkVycm9yKFwiRGVidWcgLSBGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgYXMgSlNPTjpcIiwgZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIEFQSSByZXNwb25zZSBhcyBKU09OOiAke3Jhd1Jlc3BvbnNlVGV4dC5zdWJzdHJpbmcoMCwgMTAwKX0uLi5gKVxuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBlcnJvciBpbiByZXNwb25zZVxuICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gZmFsc2UgJiYgZGF0YS5tc2cpIHtcbiAgICAgIGRldkVycm9yKFwiQVBJIGVycm9yOlwiLCBkYXRhLm1zZylcblxuICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhbiBhdXRoZW50aWNhdGlvbiBlcnJvclxuICAgICAgaWYgKGRhdGEubXNnLmluY2x1ZGVzKFwiaW52YWxpZFwiKSB8fCBkYXRhLm1zZy5pbmNsdWRlcyhcIlVzZXIgSURcIikpIHtcbiAgICAgICAgc2V0QXV0aEVycm9yKHRydWUpXG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1zZylcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5hdGFsIHdoZWVsIGNoYXJ0IEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgdGhlIGNoYXJ0X3VybCBpbiB0aGUgcmVzcG9uc2VcbiAgICBpZiAoZGF0YS5jaGFydF91cmwpIHtcbiAgICAgIGRldkxvZyhcIkRlYnVnIC0gU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBjaGFydCBVUkw6XCIsIGRhdGEuY2hhcnRfdXJsKVxuXG4gICAgICAvLyBDbGVhciBhbnkgc3RvcmVkIGF1dGggZXJyb3JzIHNpbmNlIHRoZSByZXF1ZXN0IHN1Y2NlZWRlZFxuICAgICAgY2xlYXJBdXRoRXJyb3JzKClcblxuICAgICAgcmV0dXJuIHsgY2hhcnRVcmw6IGRhdGEuY2hhcnRfdXJsIH1cbiAgICB9XG4gICAgLy8gRmFsbGJhY2sgdG8gdGhlIG9sZCBmb3JtYXQgaWYgc3ZnIHByb3BlcnR5IGV4aXN0c1xuICAgIGVsc2UgaWYgKGRhdGEuc3ZnKSB7XG4gICAgICBkZXZMb2coXCJEZWJ1ZyAtIFJldHJpZXZlZCBTVkcgY29udGVudCBpbnN0ZWFkIG9mIFVSTCwgbGVuZ3RoOlwiLCBkYXRhLnN2Zy5sZW5ndGgpXG5cbiAgICAgIC8vIENsZWFyIGFueSBzdG9yZWQgYXV0aCBlcnJvcnMgc2luY2UgdGhlIHJlcXVlc3Qgc3VjY2VlZGVkXG4gICAgICBjbGVhckF1dGhFcnJvcnMoKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjaGFydFVybDogXCJcIixcbiAgICAgICAgc3ZnQ29udGVudDogZGF0YS5zdmcsXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRldkVycm9yKFwiQVBJIHJlc3BvbnNlIG1pc3NpbmcgY2hhcnRfdXJsIGFuZCBzdmcgZGF0YTpcIiwgZGF0YSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNoYXJ0IGRhdGEgcmV0dXJuZWQgZnJvbSB0aGUgQVBJXCIpXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRldkVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgd2hlZWwgY2hhcnQ6XCIsIGVycm9yKVxuXG4gICAgLy8gVXNlIHRoZSBnZW5lcmFsIGZhbGxiYWNrIFNWRyBmb3Igb3RoZXIgY2hhcnRzXG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYXJ0VXJsOiBcIlwiLFxuICAgICAgc3ZnQ29udGVudDogZ2V0RmFsbGJhY2tOYXRhbENoYXJ0KCksXG4gICAgfVxuICB9XG59XG5cbi8vIEtlZXAgdGhlIG9sZCBmdW5jdGlvbiBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHKFxuICBiaXJ0aERhdGU6IHN0cmluZyxcbiAgYmlydGhUaW1lOiBzdHJpbmcsXG4gIGxhdGl0dWRlOiBudW1iZXIsXG4gIGxvbmdpdHVkZTogbnVtYmVyLFxuICB0aW1lem9uZSA9IDUuNSwgLy8gRGVmYXVsdCB0byBJU1Rcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2hOYXRhbFdoZWVsQ2hhcnQoYmlydGhEYXRlLCBiaXJ0aFRpbWUsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHRpbWV6b25lKVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBTVkcgY29udGVudCwgcmV0dXJuIGl0XG4gICAgaWYgKHJlc3VsdC5zdmdDb250ZW50KSB7XG4gICAgICByZXR1cm4gcmVzdWx0LnN2Z0NvbnRlbnRcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGEgY2hhcnQgVVJMLCBmZXRjaCB0aGUgU1ZHIGNvbnRlbnRcbiAgICBpZiAocmVzdWx0LmNoYXJ0VXJsKSB7XG4gICAgICBkZXZMb2coXCJEZWJ1ZyAtIEZldGNoaW5nIFNWRyBjb250ZW50IGZyb20gVVJMOlwiLCByZXN1bHQuY2hhcnRVcmwpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN2Z1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVzdWx0LmNoYXJ0VXJsKVxuICAgICAgICBpZiAoIXN2Z1Jlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggU1ZHIGZyb20gVVJMOiAke3N2Z1Jlc3BvbnNlLnN0YXR1c30gJHtzdmdSZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdmdDb250ZW50ID0gYXdhaXQgc3ZnUmVzcG9uc2UudGV4dCgpXG4gICAgICAgIGRldkxvZyhcIkRlYnVnIC0gU3VjY2Vzc2Z1bGx5IGZldGNoZWQgU1ZHIGNvbnRlbnQsIGxlbmd0aDpcIiwgc3ZnQ29udGVudC5sZW5ndGgpXG5cbiAgICAgICAgcmV0dXJuIHN2Z0NvbnRlbnRcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGRldkVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgU1ZHIGZyb20gVVJMOlwiLCBlcnJvcilcblxuICAgICAgICAvLyBSZXR1cm4gZmFsbGJhY2sgU1ZHIGlmIHdlIGNhbid0IGZldGNoIGZyb20gVVJMXG4gICAgICAgIHJldHVybiBnZXRGYWxsYmFja05hdGFsQ2hhcnQoKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBmYWxsYmFjayBTVkcgaWYgbm8gY2hhcnQgZGF0YSBhdmFpbGFibGVcbiAgICByZXR1cm4gZ2V0RmFsbGJhY2tOYXRhbENoYXJ0KClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZXZFcnJvcihcIkVycm9yIGluIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHOlwiLCBlcnJvcilcblxuICAgIC8vIFJldHVybiBmYWxsYmFjayBTVkcgZm9yIG90aGVyIGNoYXJ0c1xuICAgIHJldHVybiBnZXRGYWxsYmFja05hdGFsQ2hhcnQoKVxuICB9XG59XG5cbi8qKlxuICogR2VvY29kZXMgYSBsb2NhdGlvbiBzdHJpbmcgdG8gZ2V0IGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgdXNpbmcgQXN0cm9sb2d5QVBJXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW9jb2RlTG9jYXRpb24obG9jYXRpb246IHN0cmluZyk6IFByb21pc2U8eyBsYXRpdHVkZTogbnVtYmVyOyBsb25naXR1ZGU6IG51bWJlcjsgbmFtZTogc3RyaW5nIH0+IHtcbiAgdHJ5IHtcbiAgICBkZXZMb2coXCJHZW9jb2RpbmcgbG9jYXRpb246XCIsIGxvY2F0aW9uKTtcblxuICAgIGlmICghaGFzVmFsaWRDcmVkZW50aWFscygpKSB7XG4gICAgICBkZXZMb2coXCJNaXNzaW5nIEFQSSBjcmVkZW50aWFscyBmb3IgQXN0cm9sb2d5QVBJXCIpO1xuICAgICAgc2V0QXV0aEVycm9yKHRydWUpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWRlcnMgPSBnZXRBdXRoSGVhZGVycygpO1xuICAgIGRldkxvZyhcIlVzaW5nIGF1dGggaGVhZGVyczpcIiwgaGVhZGVycyk7XG5cbiAgICAvLyBVc2UgUE9TVCBtZXRob2Qgd2l0aCBwbGFjZSBpbiByZXF1ZXN0IGJvZHkgYXMgcGVyIEFQSSBkb2N1bWVudGF0aW9uXG4gICAgY29uc3QgdXJsID0gYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vZ2VvX2RldGFpbHNgO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcGxhY2U6IGxvY2F0aW9uLFxuICAgICAgICBtYXhSb3dzOiAxXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGRldkVycm9yKFwiR2VvY29kaW5nIEFQSSBlcnJvcjpcIiwgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgR2VvY29kaW5nIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIC8vIFRoZSBBUEkgcmV0dXJucyBhIFwiZ2VvbmFtZXNcIiBhcnJheSB3aXRoIG11bHRpcGxlIHJlc3VsdHNcbiAgICBpZiAoIWRhdGEgfHwgIWRhdGEuZ2VvbmFtZXMgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS5nZW9uYW1lcykgfHwgZGF0YS5nZW9uYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGRldkVycm9yKFwiSW52YWxpZCBnZW9jb2RpbmcgcmVzcG9uc2U6XCIsIGRhdGEpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBnZW9jb2RpbmcgcmVzcG9uc2VcIik7XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RSZXN1bHQgPSBkYXRhLmdlb25hbWVzWzBdO1xuICAgIGlmICghZmlyc3RSZXN1bHQubGF0aXR1ZGUgfHwgIWZpcnN0UmVzdWx0LmxvbmdpdHVkZSkge1xuICAgICAgZGV2RXJyb3IoXCJJbnZhbGlkIGdlb2NvZGluZyBjb29yZGluYXRlczpcIiwgZmlyc3RSZXN1bHQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBnZW9jb2RpbmcgY29vcmRpbmF0ZXNcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiBwYXJzZUZsb2F0KGZpcnN0UmVzdWx0LmxhdGl0dWRlKSxcbiAgICAgIGxvbmdpdHVkZTogcGFyc2VGbG9hdChmaXJzdFJlc3VsdC5sb25naXR1ZGUpLFxuICAgICAgbmFtZTogZmlyc3RSZXN1bHQucGxhY2VfbmFtZSB8fCBsb2NhdGlvbixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRldkVycm9yKFwiRXJyb3IgZ2VvY29kaW5nIGxvY2F0aW9uOlwiLCBlcnJvcik7XG4gICAgLy8gRmFsbGJhY2s6IExhcyBWZWdhc1xuICAgIHJldHVybiB7XG4gICAgICBsYXRpdHVkZTogMzYuMTY5OSxcbiAgICAgIGxvbmdpdHVkZTogLTExNS4xMzk4LFxuICAgICAgbmFtZTogbG9jYXRpb24sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdHMgdGhlIEFQSSByZXNwb25zZSBpbnRvIG91ciBhcHBsaWNhdGlvbidzIGRhdGEgc3RydWN0dXJlXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdE5hdGFsQ2hhcnRSZXNwb25zZShcbiAgcGxhbmV0c0RhdGE6IGFueVtdLFxuICBob3VzZXNEYXRhOiBhbnksXG4gIGFzcGVjdHNEYXRhOiBhbnlbXSxcbiAgYmlydGhEZXRhaWxzOiBhbnksXG4pOiBOYXRhbENoYXJ0IHtcbiAgLy8gRXh0cmFjdCBhbmQgZm9ybWF0IHBsYW5ldCBwb3NpdGlvbnNcbiAgY29uc3QgdmFsaWRDZWxlc3RpYWxCb2RpZXMgPSBbXG4gICAgXCJzdW5cIiwgXCJtb29uXCIsIFwibWVyY3VyeVwiLCBcInZlbnVzXCIsIFwibWFyc1wiLCBcImp1cGl0ZXJcIiwgXCJzYXR1cm5cIiwgXCJ1cmFudXNcIiwgXCJuZXB0dW5lXCIsIFwicGx1dG9cIiwgXCJjaGlyb25cIiwgXCJub3J0aF9ub2RlXCIsIFwic291dGhfbm9kZVwiXG4gIF0gYXMgY29uc3Q7XG4gIGNvbnN0IHBsYW5ldHM6IFBsYW5ldFBvc2l0aW9uW10gPSBwbGFuZXRzRGF0YVxuICAgIC5tYXAoKHBsYW5ldCkgPT4ge1xuICAgICAgY29uc3QgcGxhbmV0TmFtZSA9IGNvbnZlcnRQbGFuZXROYW1lKHBsYW5ldC5uYW1lKVxuICAgICAgaWYgKCF2YWxpZENlbGVzdGlhbEJvZGllcy5pbmNsdWRlcyhwbGFuZXROYW1lIGFzIGFueSkpIHJldHVybiBudWxsXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBwbGFuZXROYW1lIGFzIENlbGVzdGlhbEJvZHksXG4gICAgICAgIHNpZ246IHBsYW5ldC5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbixcbiAgICAgICAgZGVncmVlOiBwbGFuZXQubm9ybV9kZWdyZWUsXG4gICAgICAgIGhvdXNlOiBwbGFuZXQuaG91c2UsXG4gICAgICAgIHJldHJvZ3JhZGU6IHBsYW5ldC5pc19yZXRyb2dyYWRlID09PSAxLFxuICAgICAgICBhc3BlY3RzVG9PdGhlclBsYW5ldHM6IFtdLFxuICAgICAgfVxuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKSBhcyBQbGFuZXRQb3NpdGlvbltdXG5cbiAgLy8gRXh0cmFjdCBhbmQgZm9ybWF0IGhvdXNlc1xuICBjb25zdCBob3VzZXM6IEhvdXNlW10gPSBPYmplY3Qua2V5cyhob3VzZXNEYXRhKS5tYXAoKGtleSkgPT4ge1xuICAgIGNvbnN0IGhvdXNlID0gaG91c2VzRGF0YVtrZXldXG4gICAgcmV0dXJuIHtcbiAgICAgIG51bWJlcjogTnVtYmVyLnBhcnNlSW50KGtleS5yZXBsYWNlKFwiaG91c2VcIiwgXCJcIikpLFxuICAgICAgc2lnbjogaG91c2Uuc2lnbi50b0xvd2VyQ2FzZSgpIGFzIFpvZGlhY1NpZ24sXG4gICAgICBkZWdyZWU6IGhvdXNlLmRlZ3JlZSxcbiAgICAgIGN1c3A6IHRydWUsXG4gICAgfVxuICB9KVxuXG4gIC8vIEV4dHJhY3QgYW5kIGZvcm1hdCBhbmdsZXMgKEFzY2VuZGFudCwgTWlkaGVhdmVuLCBldGMuKVxuICBjb25zdCBhbmdsZXMgPSB7XG4gICAgYXNjZW5kYW50OiB7XG4gICAgICBzaWduOiBob3VzZXNEYXRhLmFzY2VuZGFudC5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbixcbiAgICAgIGRlZ3JlZTogaG91c2VzRGF0YS5hc2NlbmRhbnQuZGVncmVlLFxuICAgIH0sXG4gICAgbWlkaGVhdmVuOiB7XG4gICAgICBzaWduOiBob3VzZXNEYXRhLm1pZGhlYXZlbi5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbixcbiAgICAgIGRlZ3JlZTogaG91c2VzRGF0YS5taWRoZWF2ZW4uZGVncmVlLFxuICAgIH0sXG4gICAgZGVzY2VuZGFudDoge1xuICAgICAgc2lnbjogZ2V0T3Bwb3NpdGVTaWduKGhvdXNlc0RhdGEuYXNjZW5kYW50LnNpZ24udG9Mb3dlckNhc2UoKSBhcyBab2RpYWNTaWduKSxcbiAgICAgIGRlZ3JlZTogKGhvdXNlc0RhdGEuYXNjZW5kYW50LmRlZ3JlZSArIDE4MCkgJSAzNjAsXG4gICAgfSxcbiAgICBpbXVtQ29lbGk6IHtcbiAgICAgIHNpZ246IGdldE9wcG9zaXRlU2lnbihob3VzZXNEYXRhLm1pZGhlYXZlbi5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbiksXG4gICAgICBkZWdyZWU6IChob3VzZXNEYXRhLm1pZGhlYXZlbi5kZWdyZWUgKyAxODApICUgMzYwLFxuICAgIH0sXG4gIH1cblxuICAvLyBGb3JtYXQgYXNwZWN0cyBkYXRhXG4gIGNvbnN0IGFzcGVjdHMgPSBhc3BlY3RzRGF0YS5tYXAoKGFzcGVjdCkgPT4gKHtcbiAgICBhc3BlY3Q6IGFzcGVjdC5hc3BlY3QudG9Mb3dlckNhc2UoKSxcbiAgICBwbGFuZXQxOiBjb252ZXJ0UGxhbmV0TmFtZShhc3BlY3QucGxhbmV0MSksXG4gICAgcGxhbmV0MjogY29udmVydFBsYW5ldE5hbWUoYXNwZWN0LnBsYW5ldDIpLFxuICAgIG9yYjogYXNwZWN0Lm9yYixcbiAgICBhcHBseWluZzogYXNwZWN0LmFwcGx5aW5nID09PSAxLFxuICB9KSlcblxuICByZXR1cm4ge1xuICAgIHBsYW5ldHMsXG4gICAgaG91c2VzLFxuICAgIGFuZ2xlcyxcbiAgICBhc3BlY3RzLFxuICAgIGJpcnRoRGV0YWlscyxcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIEFzdHJvbG9neUFQSSBwbGFuZXQgbmFtZXMgdG8gb3VyIGFwcGxpY2F0aW9uJ3MgZm9ybWF0XG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRQbGFuZXROYW1lKGFwaVBsYW5ldE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHBsYW5ldE1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICBTdW46IFwic3VuXCIsXG4gICAgTW9vbjogXCJtb29uXCIsXG4gICAgTWVyY3VyeTogXCJtZXJjdXJ5XCIsXG4gICAgVmVudXM6IFwidmVudXNcIixcbiAgICBNYXJzOiBcIm1hcnNcIixcbiAgICBKdXBpdGVyOiBcImp1cGl0ZXJcIixcbiAgICBTYXR1cm46IFwic2F0dXJuXCIsXG4gICAgVXJhbnVzOiBcInVyYW51c1wiLFxuICAgIE5lcHR1bmU6IFwibmVwdHVuZVwiLFxuICAgIFBsdXRvOiBcInBsdXRvXCIsXG4gICAgUmFodTogXCJub3J0aF9ub2RlXCIsXG4gICAgS2V0dTogXCJzb3V0aF9ub2RlXCIsXG4gIH1cblxuICByZXR1cm4gcGxhbmV0TWFwW2FwaVBsYW5ldE5hbWVdIHx8IGFwaVBsYW5ldE5hbWUudG9Mb3dlckNhc2UoKVxufVxuXG4vKipcbiAqIEdldHMgdGhlIG9wcG9zaXRlIHpvZGlhYyBzaWduXG4gKi9cbmZ1bmN0aW9uIGdldE9wcG9zaXRlU2lnbihzaWduOiBab2RpYWNTaWduKTogWm9kaWFjU2lnbiB7XG4gIGNvbnN0IHpvZGlhY1NpZ25zOiBab2RpYWNTaWduW10gPSBbXG4gICAgXCJhcmllc1wiLFxuICAgIFwidGF1cnVzXCIsXG4gICAgXCJnZW1pbmlcIixcbiAgICBcImNhbmNlclwiLFxuICAgIFwibGVvXCIsXG4gICAgXCJ2aXJnb1wiLFxuICAgIFwibGlicmFcIixcbiAgICBcInNjb3JwaW9cIixcbiAgICBcInNhZ2l0dGFyaXVzXCIsXG4gICAgXCJjYXByaWNvcm5cIixcbiAgICBcImFxdWFyaXVzXCIsXG4gICAgXCJwaXNjZXNcIixcbiAgXVxuXG4gIGNvbnN0IGluZGV4ID0gem9kaWFjU2lnbnMuaW5kZXhPZihzaWduKVxuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gXCJhcmllc1wiIC8vIERlZmF1bHQgZmFsbGJhY2tcblxuICBjb25zdCBvcHBvc2l0ZUluZGV4ID0gKGluZGV4ICsgNikgJSAxMlxuICByZXR1cm4gem9kaWFjU2lnbnNbb3Bwb3NpdGVJbmRleF1cbn1cblxuLyoqXG4gKiBHZXRzIGludGVycHJldGF0aW9ucyBmb3IgYSBuYXRhbCBjaGFydFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmF0YWxDaGFydEludGVycHJldGF0aW9uKG5hdGFsQ2hhcnQ6IE5hdGFsQ2hhcnQpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgaW1wbGVtZW50ZWQgdG8gZmV0Y2ggaW50ZXJwcmV0YXRpb25zIGZyb20gQXN0cm9sb2d5QVBJXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgcmV0dXJuIGEgcGxhY2Vob2xkZXIgaW50ZXJwcmV0YXRpb25cbiAgICByZXR1cm4ge1xuICAgICAgb3ZlcnZpZXc6IHtcbiAgICAgICAgdGl0bGU6IFwiWW91ciBDb3NtaWMgQmx1ZXByaW50XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgIFwiWW91ciBuYXRhbCBjaGFydCByZXZlYWxzIHlvdXIgdW5pcXVlIGNvc21pYyBibHVlcHJpbnQsIHNob3dpbmcgdGhlIHBvc2l0aW9ucyBvZiB0aGUgcGxhbmV0cyBhdCB0aGUgbW9tZW50IG9mIHlvdXIgYmlydGguIFRoaXMgY2VsZXN0aWFsIHNuYXBzaG90IG9mZmVycyBpbnNpZ2h0cyBpbnRvIHlvdXIgcGVyc29uYWxpdHksIHN0cmVuZ3RocywgY2hhbGxlbmdlcywgYW5kIGxpZmUgcGF0aC5cIixcbiAgICAgIH0sXG4gICAgICBzdW5TaWduOiB7XG4gICAgICAgIHRpdGxlOiBcIlN1biBTaWduXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgU3VuIHNpZ24gcmVwcmVzZW50cyB5b3VyIGNvcmUgZXNzZW5jZSBhbmQgbGlmZSBwdXJwb3NlLlwiLFxuICAgICAgICBrZXl3b3JkczogW1wiaWRlbnRpdHlcIiwgXCJwdXJwb3NlXCIsIFwidml0YWxpdHlcIl0sXG4gICAgICB9LFxuICAgICAgbW9vblNpZ246IHtcbiAgICAgICAgdGl0bGU6IFwiTW9vbiBTaWduXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgTW9vbiBzaWduIHJlZmxlY3RzIHlvdXIgZW1vdGlvbmFsIG5hdHVyZSBhbmQgc3ViY29uc2Npb3VzIHBhdHRlcm5zLlwiLFxuICAgICAgICBrZXl3b3JkczogW1wiZW1vdGlvbnNcIiwgXCJpbnN0aW5jdHNcIiwgXCJjb21mb3J0XCJdLFxuICAgICAgfSxcbiAgICAgIGFzY2VuZGFudFNpZ246IHtcbiAgICAgICAgdGl0bGU6IFwiQXNjZW5kYW50XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgQXNjZW5kYW50IHJlcHJlc2VudHMgaG93IHlvdSBwcmVzZW50IHlvdXJzZWxmIHRvIHRoZSB3b3JsZC5cIixcbiAgICAgICAga2V5d29yZHM6IFtcImFwcGVhcmFuY2VcIiwgXCJmaXJzdCBpbXByZXNzaW9uc1wiLCBcInBlcnNvbmFsIHN0eWxlXCJdLFxuICAgICAgfSxcbiAgICAgIHBsYW5ldFBvc2l0aW9uczoge1xuICAgICAgICBzdW46IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFN1biBwbGFjZW1lbnQgaW5kaWNhdGVzIHlvdXIgY29yZSBpZGVudGl0eSBhbmQgcHVycG9zZSBpbiBsaWZlLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJpZGVudGl0eVwiLCBcInB1cnBvc2VcIiwgXCJ2aXRhbGl0eVwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgbW9vbjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgTW9vbiBwbGFjZW1lbnQgcmV2ZWFscyB5b3VyIGVtb3Rpb25hbCBuYXR1cmUgYW5kIHN1YmNvbnNjaW91cyBwYXR0ZXJucy5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiZW1vdGlvbnNcIiwgXCJpbnN0aW5jdHNcIiwgXCJjb21mb3J0XCJdLFxuICAgICAgICB9LFxuICAgICAgICBtZXJjdXJ5OiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBNZXJjdXJ5IHBsYWNlbWVudCBzaG93cyBob3cgeW91IHRoaW5rIGFuZCBjb21tdW5pY2F0ZS5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiY29tbXVuaWNhdGlvblwiLCBcInRoaW5raW5nXCIsIFwibGVhcm5pbmdcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIHZlbnVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBWZW51cyBwbGFjZW1lbnQgaW5kaWNhdGVzIGhvdyB5b3UgZXhwcmVzcyBhbmQgcmVjZWl2ZSBsb3ZlIGFuZCBiZWF1dHkuXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImxvdmVcIiwgXCJiZWF1dHlcIiwgXCJ2YWx1ZXNcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIG1hcnM6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIE1hcnMgcGxhY2VtZW50IHNob3dzIGhvdyB5b3UgYXNzZXJ0IHlvdXJzZWxmIGFuZCB0YWtlIGFjdGlvbi5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiYWN0aW9uXCIsIFwiZGVzaXJlXCIsIFwiZW5lcmd5XCJdLFxuICAgICAgICB9LFxuICAgICAgICBqdXBpdGVyOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBKdXBpdGVyIHBsYWNlbWVudCByZXZlYWxzIHdoZXJlIHlvdSBmaW5kIGdyb3d0aCBhbmQgZXhwYW5zaW9uLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJncm93dGhcIiwgXCJsdWNrXCIsIFwiYWJ1bmRhbmNlXCJdLFxuICAgICAgICB9LFxuICAgICAgICBzYXR1cm46IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFNhdHVybiBwbGFjZW1lbnQgaW5kaWNhdGVzIHdoZXJlIHlvdSBmYWNlIGNoYWxsZW5nZXMgYW5kIGxlYXJuIGRpc2NpcGxpbmUuXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImRpc2NpcGxpbmVcIiwgXCJyZXNwb25zaWJpbGl0eVwiLCBcInN0cnVjdHVyZVwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgdXJhbnVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBVcmFudXMgcGxhY2VtZW50IHNob3dzIHdoZXJlIHlvdSBzZWVrIGZyZWVkb20gYW5kIGlubm92YXRpb24uXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImlubm92YXRpb25cIiwgXCJyZWJlbGxpb25cIiwgXCJjaGFuZ2VcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIG5lcHR1bmU6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIE5lcHR1bmUgcGxhY2VtZW50IHJldmVhbHMgeW91ciBzcGlyaXR1YWwgYW5kIGNyZWF0aXZlIGFzcGlyYXRpb25zLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJzcGlyaXR1YWxpdHlcIiwgXCJkcmVhbXNcIiwgXCJpbGx1c2lvblwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgcGx1dG86IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFBsdXRvIHBsYWNlbWVudCBpbmRpY2F0ZXMgd2hlcmUgeW91IGV4cGVyaWVuY2UgdHJhbnNmb3JtYXRpb24gYW5kIHBvd2VyLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJ0cmFuc2Zvcm1hdGlvblwiLCBcInBvd2VyXCIsIFwicmViaXJ0aFwiXSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBob3VzZXM6IHtcbiAgICAgICAgMToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSAxc3QgaG91c2UgcmVwcmVzZW50cyB5b3VyIHNlbGYtaW1hZ2UgYW5kIGhvdyB5b3UgcHJlc2VudCB5b3Vyc2VsZiB0byB0aGUgd29ybGQuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDI6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgMm5kIGhvdXNlIHJlcHJlc2VudHMgeW91ciB2YWx1ZXMsIHBvc3Nlc3Npb25zLCBhbmQgcmVzb3VyY2VzLlwiLFxuICAgICAgICB9LFxuICAgICAgICAzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDNyZCBob3VzZSByZXByZXNlbnRzIGNvbW11bmljYXRpb24sIGxlYXJuaW5nLCBhbmQgeW91ciBpbW1lZGlhdGUgZW52aXJvbm1lbnQuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDQ6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgNHRoIGhvdXNlIHJlcHJlc2VudHMgeW91ciBob21lLCBmYW1pbHksIGFuZCBlbW90aW9uYWwgZm91bmRhdGlvbnMuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDU6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgNXRoIGhvdXNlIHJlcHJlc2VudHMgY3JlYXRpdml0eSwgcGxlYXN1cmUsIGFuZCBzZWxmLWV4cHJlc3Npb24uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDY6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgNnRoIGhvdXNlIHJlcHJlc2VudHMgd29yaywgaGVhbHRoLCBhbmQgZGFpbHkgcm91dGluZXMuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDc6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgN3RoIGhvdXNlIHJlcHJlc2VudHMgcGFydG5lcnNoaXBzLCByZWxhdGlvbnNoaXBzLCBhbmQgb3BlbiBlbmVtaWVzLlwiLFxuICAgICAgICB9LFxuICAgICAgICA4OiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDh0aCBob3VzZSByZXByZXNlbnRzIHRyYW5zZm9ybWF0aW9uLCBzaGFyZWQgcmVzb3VyY2VzLCBhbmQgdGhlIG9jY3VsdC5cIixcbiAgICAgICAgfSxcbiAgICAgICAgOToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSA5dGggaG91c2UgcmVwcmVzZW50cyBoaWdoZXIgZWR1Y2F0aW9uLCBwaGlsb3NvcGh5LCBhbmQgbG9uZy1kaXN0YW5jZSB0cmF2ZWwuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDEwOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDEwdGggaG91c2UgcmVwcmVzZW50cyBjYXJlZXIsIHB1YmxpYyBpbWFnZSwgYW5kIGF1dGhvcml0eS5cIixcbiAgICAgICAgfSxcbiAgICAgICAgMTE6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgMTF0aCBob3VzZSByZXByZXNlbnRzIGZyaWVuZHNoaXBzLCBncm91cHMsIGFuZCBhc3BpcmF0aW9ucy5cIixcbiAgICAgICAgfSxcbiAgICAgICAgMTI6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgMTJ0aCBob3VzZSByZXByZXNlbnRzIHRoZSB1bmNvbnNjaW91cywgc3Bpcml0dWFsaXR5LCBhbmQgaGlkZGVuIGVuZW1pZXMuXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBkZXZFcnJvcihcIkVycm9yIGdldHRpbmcgY2hhcnQgaW50ZXJwcmV0YXRpb246XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBHZXRzIGEgZGFpbHkgaG9yb3Njb3BlIGZvciBhIHpvZGlhYyBzaWduXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYWlseUhvcm9zY29wZShzaWduOiBab2RpYWNTaWduKTogUHJvbWlzZTxhbnk+IHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBjcmVkZW50aWFscyBmaXJzdFxuICAgIGlmICghaGFzVmFsaWRDcmVkZW50aWFscygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWRcIilcbiAgICB9XG5cbiAgICAvLyBNYWtlIHRoZSBBUEkgcmVxdWVzdFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vaG9yb3Njb3BlX3ByZWRpY3Rpb24vZGFpbHkvJHtzaWdufWAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiBnZXRBdXRoSGVhZGVycygpLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgIH0pXG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICAvLyBDaGVjayBmb3IgZXJyb3IgaW4gcmVzcG9uc2VcbiAgICBpZiAoZGF0YS5zdGF0dXMgPT09IGZhbHNlICYmIGRhdGEubXNnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tc2cpXG4gICAgfVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBIb3Jvc2NvcGUgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgdGhlIHJlc3BvbnNlIHRvIG1hdGNoIG91ciBhcHBsaWNhdGlvbidzIHN0cnVjdHVyZVxuICAgIHJldHVybiB7XG4gICAgICBzaWduOiBzaWduLFxuICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXSxcbiAgICAgIHByZWRpY3Rpb246IGRhdGEucHJlZGljdGlvbiB8fCBcIllvdXIgaG9yb3Njb3BlIGZvciB0b2RheSBpcyBub3QgYXZhaWxhYmxlLlwiLFxuICAgICAgbHVja3lfbnVtYmVyOiBkYXRhLmx1Y2t5X251bWJlciB8fCBcIjdcIixcbiAgICAgIGx1Y2t5X2NvbG9yOiBkYXRhLmx1Y2t5X2NvbG9yIHx8IFwiQmx1ZVwiLFxuICAgICAgbW9vZDogZGF0YS5tb29kIHx8IFwiUmVmbGVjdGl2ZVwiLFxuICAgICAgY29tcGF0aWJpbGl0eTogZGF0YS5jb21wYXRpYmlsaXR5IHx8IFwiTGlicmFcIixcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGV2RXJyb3IoXCJFcnJvciBnZXR0aW5nIGRhaWx5IGhvcm9zY29wZTpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmF0YWxDaGFydEludGVycHJldGF0aW9uRnJvbUFQSShiaXJ0aERhdGE6IHtcbiAgZGF5OiBudW1iZXI7XG4gIG1vbnRoOiBudW1iZXI7XG4gIHllYXI6IG51bWJlcjtcbiAgaG91cjogbnVtYmVyO1xuICBtaW46IG51bWJlcjtcbiAgbGF0OiBudW1iZXI7XG4gIGxvbjogbnVtYmVyO1xuICB0em9uZTogbnVtYmVyO1xuICBob3VzZV90eXBlPzogc3RyaW5nO1xufSk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgaWYgKCFoYXNWYWxpZENyZWRlbnRpYWxzKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZFwiKVxuICAgIH1cbiAgICBjb25zdCBoZWFkZXJzID0gZ2V0QXV0aEhlYWRlcnMoKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vbmF0YWxfY2hhcnRfaW50ZXJwcmV0YXRpb25gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJpcnRoRGF0YSksXG4gICAgfSlcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgaWYgKGRhdGEuc3RhdHVzID09PSBmYWxzZSAmJiBkYXRhLm1zZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubXNnKVxuICAgIH1cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludGVycHJldGF0aW9uIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGRldkVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgY2hhcnQgaW50ZXJwcmV0YXRpb246XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbImdldEZhbGxiYWNrTmF0YWxDaGFydCIsInNhZmVHZXRTZXNzaW9uSXRlbSIsInNhZmVTZXRTZXNzaW9uSXRlbSIsInNhZmVSZW1vdmVTZXNzaW9uSXRlbSIsImVudiIsImRldkxvZyIsImRldkVycm9yIiwiVVNFUl9JRCIsIkFQSV9LRVkiLCJBU1RST0xPR1lfQVBJX0JBU0VfVVJMIiwiaGFzVmFsaWRDcmVkZW50aWFscyIsImhhc0NyZWRlbnRpYWxzIiwibGVuZ3RoIiwic2V0QXV0aEVycm9yIiwiaGFzRXJyb3IiLCJoYXNBdXRoRXJyb3IiLCJjbGVhckF1dGhFcnJvcnMiLCJnZXRBdXRoSGVhZGVycyIsImF1dGhTdHJpbmciLCJiYXNlNjRBdXRoIiwid2luZG93IiwiYnRvYSIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIkVycm9yIiwic3Vic3RyaW5nIiwiQXV0aG9yaXphdGlvbiIsImVycm9yIiwiZmV0Y2hXaXRoUmV0cnkiLCJ1cmwiLCJvcHRpb25zIiwibWF4UmV0cmllcyIsImJhc2VEZWxheSIsImF0dGVtcHQiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzdGF0dXMiLCJkZWxheSIsIk1hdGgiLCJwb3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJmZXRjaE5hdGFsQ2hhcnQiLCJiaXJ0aERhdGUiLCJiaXJ0aFRpbWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInRpbWV6b25lIiwieWVhciIsIm1vbnRoIiwiZGF5Iiwic3BsaXQiLCJtYXAiLCJOdW1iZXIiLCJob3VyIiwibWludXRlIiwicmVxdWVzdEJvZHkiLCJtaW4iLCJsYXQiLCJsb24iLCJ0em9uZSIsInBsYW5ldHNSZXNwb25zZSIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInBsYW5ldHNEYXRhIiwianNvbiIsIm1zZyIsImluY2x1ZGVzIiwic3RhdHVzVGV4dCIsImhvdXNlc1Jlc3BvbnNlIiwiaG91c2VzRGF0YSIsImFzcGVjdHNEYXRhIiwiYXNwZWN0c1Jlc3BvbnNlIiwiZm9ybWF0TmF0YWxDaGFydFJlc3BvbnNlIiwiZGF0ZSIsInRpbWUiLCJsb2NhdGlvbiIsIm5hbWUiLCJmZXRjaE5hdGFsV2hlZWxDaGFydCIsInNpZ25faWNvbl9jb2xvciIsInNpZ25fYmFja2dyb3VuZCIsImNoYXJ0VXJsIiwic3ZnQ29udGVudCIsInBsYW5ldF9pY29uX2NvbG9yIiwiaW5uZXJfY2lyY2xlX2JhY2tncm91bmQiLCJvdXRlcl9jaXJjbGVfYmFja2dyb3VuZCIsImNoYXJ0X3NpemUiLCJpbWFnZV90eXBlIiwicmF3UmVzcG9uc2VUZXh0IiwidGV4dCIsImRhdGEiLCJwYXJzZSIsIk9iamVjdCIsImtleXMiLCJlIiwiY2hhcnRfdXJsIiwic3ZnIiwiZmV0Y2hOYXRhbFdoZWVsQ2hhcnRTVkciLCJyZXN1bHQiLCJzdmdSZXNwb25zZSIsImdlb2NvZGVMb2NhdGlvbiIsInBsYWNlIiwibWF4Um93cyIsImdlb25hbWVzIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlyc3RSZXN1bHQiLCJwYXJzZUZsb2F0IiwicGxhY2VfbmFtZSIsImJpcnRoRGV0YWlscyIsInZhbGlkQ2VsZXN0aWFsQm9kaWVzIiwicGxhbmV0cyIsInBsYW5ldCIsInBsYW5ldE5hbWUiLCJjb252ZXJ0UGxhbmV0TmFtZSIsInNpZ24iLCJ0b0xvd2VyQ2FzZSIsImRlZ3JlZSIsIm5vcm1fZGVncmVlIiwiaG91c2UiLCJyZXRyb2dyYWRlIiwiaXNfcmV0cm9ncmFkZSIsImFzcGVjdHNUb090aGVyUGxhbmV0cyIsImZpbHRlciIsIkJvb2xlYW4iLCJob3VzZXMiLCJrZXkiLCJudW1iZXIiLCJwYXJzZUludCIsInJlcGxhY2UiLCJjdXNwIiwiYW5nbGVzIiwiYXNjZW5kYW50IiwibWlkaGVhdmVuIiwiZGVzY2VuZGFudCIsImdldE9wcG9zaXRlU2lnbiIsImltdW1Db2VsaSIsImFzcGVjdHMiLCJhc3BlY3QiLCJwbGFuZXQxIiwicGxhbmV0MiIsIm9yYiIsImFwcGx5aW5nIiwiYXBpUGxhbmV0TmFtZSIsInBsYW5ldE1hcCIsIlN1biIsIk1vb24iLCJNZXJjdXJ5IiwiVmVudXMiLCJNYXJzIiwiSnVwaXRlciIsIlNhdHVybiIsIlVyYW51cyIsIk5lcHR1bmUiLCJQbHV0byIsIlJhaHUiLCJLZXR1Iiwiem9kaWFjU2lnbnMiLCJpbmRleCIsImluZGV4T2YiLCJvcHBvc2l0ZUluZGV4IiwiZ2V0TmF0YWxDaGFydEludGVycHJldGF0aW9uIiwibmF0YWxDaGFydCIsIm92ZXJ2aWV3IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInN1blNpZ24iLCJrZXl3b3JkcyIsIm1vb25TaWduIiwiYXNjZW5kYW50U2lnbiIsInBsYW5ldFBvc2l0aW9ucyIsInN1biIsIm1vb24iLCJtZXJjdXJ5IiwidmVudXMiLCJtYXJzIiwianVwaXRlciIsInNhdHVybiIsInVyYW51cyIsIm5lcHR1bmUiLCJwbHV0byIsImdldERhaWx5SG9yb3Njb3BlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicHJlZGljdGlvbiIsImx1Y2t5X251bWJlciIsImx1Y2t5X2NvbG9yIiwibW9vZCIsImNvbXBhdGliaWxpdHkiLCJnZXROYXRhbENoYXJ0SW50ZXJwcmV0YXRpb25Gcm9tQVBJIiwiYmlydGhEYXRhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./services/astrology-api-service.ts\n");

/***/ }),

/***/ "(ssr)/./services/astrology-service.ts":
/*!***************************************!*\
  !*** ./services/astrology-service.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchNatalChart: () => (/* binding */ fetchNatalChart),\n/* harmony export */   fetchNatalWheelChartSVG: () => (/* binding */ fetchNatalWheelChartSVG),\n/* harmony export */   geocodeLocation: () => (/* binding */ geocodeLocation),\n/* harmony export */   getDailyHoroscope: () => (/* binding */ getDailyHoroscope),\n/* harmony export */   getNatalChartInterpretation: () => (/* binding */ getNatalChartInterpretation)\n/* harmony export */ });\n/* harmony import */ var _astrology_api_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./astrology-api-service */ \"(ssr)/./services/astrology-api-service.ts\");\n/**\n * Astrology Service\n * Handles all interactions with astrology APIs and data processing\n */ \n/**\n * Fetches natal chart data\n */ async function fetchNatalChart(birthDate, birthTime, latitude, longitude) {\n    try {\n        // Calculate timezone from longitude (approximate)\n        // In a real app, you would use a timezone API or library\n        const timezone = Math.round(longitude / 15);\n        // Use the AstrologyAPI service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.fetchNatalChart)(birthDate, birthTime, latitude, longitude, timezone);\n    } catch (error) {\n        console.error(\"Error fetching natal chart:\", error);\n        throw error;\n    }\n}\n/**\n * Fetches natal wheel chart SVG\n */ async function fetchNatalWheelChartSVG(birthDate, birthTime, latitude, longitude) {\n    try {\n        // Calculate timezone from longitude (approximate)\n        const timezone = Math.round(longitude / 15);\n        // Use the AstrologyAPI service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.fetchNatalWheelChartSVG)(birthDate, birthTime, latitude, longitude, timezone);\n    } catch (error) {\n        console.error(\"Error fetching natal wheel chart SVG:\", error);\n        throw error;\n    }\n}\n/**\n * Geocodes a location string to get latitude and longitude\n */ async function geocodeLocation(locationString) {\n    try {\n        // Try to use a simple geocoding approach first\n        const simpleGeocode = getSimpleGeocoding(locationString);\n        if (simpleGeocode) {\n            console.log(\"Using simple geocoding for:\", locationString);\n            return simpleGeocode;\n        }\n        // Try the direct API call first\n        try {\n            const result = await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.geocodeLocation)(locationString);\n            if (result.latitude !== 0 || result.longitude !== 0) {\n                return result;\n            }\n        } catch (error) {\n            console.warn(\"Direct API geocoding failed, trying /api/geocode\", error);\n        }\n        // Fallback: use the custom /api/geocode endpoint with POST\n        try {\n            const response = await fetch(\"/api/geocode\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    location: locationString\n                })\n            });\n            if (response.ok) {\n                const data = await response.json();\n                return {\n                    latitude: data.latitude,\n                    longitude: data.longitude,\n                    name: data.name || locationString\n                };\n            }\n        } catch (error) {\n            console.error(\"Error using /api/geocode fallback:\", error);\n        }\n        // Final fallback\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    } catch (error) {\n        console.error(\"Error in geocoding service:\", error);\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    }\n}\n/**\n * Simple geocoding function for common locations\n * This serves as a fallback when the API fails\n */ function getSimpleGeocoding(locationString, forceFallback = false) {\n    // Normalize the input\n    const normalizedInput = locationString.toLowerCase().trim();\n    // Common city coordinates\n    const cityCoordinates = {\n        // North America\n        \"new york\": [\n            40.7128,\n            -74.006\n        ],\n        \"los angeles\": [\n            34.0522,\n            -118.2437\n        ],\n        chicago: [\n            41.8781,\n            -87.6298\n        ],\n        toronto: [\n            43.6532,\n            -79.3832\n        ],\n        \"mexico city\": [\n            19.4326,\n            -99.1332\n        ],\n        // Europe\n        london: [\n            51.5074,\n            -0.1278\n        ],\n        paris: [\n            48.8566,\n            2.3522\n        ],\n        berlin: [\n            52.52,\n            13.405\n        ],\n        madrid: [\n            40.4168,\n            -3.7038\n        ],\n        rome: [\n            41.9028,\n            12.4964\n        ],\n        amsterdam: [\n            52.3676,\n            4.9041\n        ],\n        vienna: [\n            48.2082,\n            16.3738\n        ],\n        hamburg: [\n            53.5511,\n            9.9937\n        ],\n        frankfurt: [\n            50.1109,\n            8.6821\n        ],\n        // Asia\n        tokyo: [\n            35.6762,\n            139.6503\n        ],\n        beijing: [\n            39.9042,\n            116.4074\n        ],\n        mumbai: [\n            19.076,\n            72.8777\n        ],\n        singapore: [\n            1.3521,\n            103.8198\n        ],\n        // Australia\n        sydney: [\n            -33.8688,\n            151.2093\n        ],\n        melbourne: [\n            -37.8136,\n            144.9631\n        ],\n        // South America\n        \"rio de janeiro\": [\n            -22.9068,\n            -43.1729\n        ],\n        \"buenos aires\": [\n            -34.6037,\n            -58.3816\n        ],\n        // Africa\n        cairo: [\n            30.0444,\n            31.2357\n        ],\n        \"cape town\": [\n            -33.9249,\n            18.4241\n        ]\n    };\n    // Check for exact matches\n    for (const [city, coordinates] of Object.entries(cityCoordinates)){\n        if (normalizedInput.includes(city)) {\n            return {\n                latitude: coordinates[0],\n                longitude: coordinates[1],\n                name: locationString\n            };\n        }\n    }\n    // If we're forcing a fallback or the input is very short, use a default\n    if (forceFallback || normalizedInput.length < 3) {\n        // Default to a central location (0,0 is in the Atlantic Ocean)\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    }\n    // No match found\n    return null;\n}\n/**\n * Gets interpretations for a natal chart\n */ async function getNatalChartInterpretation(natalChart) {\n    try {\n        // Use the AstrologyAPI interpretation service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.getNatalChartInterpretation)(natalChart);\n    } catch (error) {\n        console.error(\"Error getting chart interpretation:\", error);\n        throw error;\n    }\n}\n/**\n * Gets a daily horoscope for a zodiac sign\n */ async function getDailyHoroscope(sign) {\n    try {\n        // Use the AstrologyAPI horoscope service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.getDailyHoroscope)(sign);\n    } catch (error) {\n        console.error(\"Error getting daily horoscope:\", error);\n        throw error;\n    }\n}\n// Define zodiacSymbols\nconst zodiacSymbols = {\n    aries: \"\",\n    taurus: \"\",\n    gemini: \"\",\n    cancer: \"\",\n    leo: \"\",\n    virgo: \"\",\n    libra: \"\",\n    scorpio: \"\",\n    sagittarius: \"\",\n    capricorn: \"\",\n    aquarius: \"\",\n    pisces: \"\"\n};\n// Add a function to create a placeholder chart when the API fails\nfunction createPlaceholderChart(birthDate, birthTime, latitude, longitude) {\n    // Create a basic placeholder chart with minimal data\n    const [year, month, day] = birthDate.split(\"-\").map(Number);\n    const [hour, minute] = birthTime.split(\":\").map(Number);\n    // Generate some placeholder planets\n    const planets = [\n        {\n            name: \"sun\",\n            sign: \"aries\",\n            degree: 15,\n            house: 1,\n            retrograde: false\n        },\n        {\n            name: \"moon\",\n            sign: \"taurus\",\n            degree: 25,\n            house: 2,\n            retrograde: false\n        },\n        {\n            name: \"mercury\",\n            sign: \"gemini\",\n            degree: 5,\n            house: 3,\n            retrograde: false\n        },\n        {\n            name: \"venus\",\n            sign: \"cancer\",\n            degree: 10,\n            house: 4,\n            retrograde: false\n        },\n        {\n            name: \"mars\",\n            sign: \"leo\",\n            degree: 20,\n            house: 5,\n            retrograde: false\n        },\n        {\n            name: \"jupiter\",\n            sign: \"virgo\",\n            degree: 15,\n            house: 6,\n            retrograde: false\n        },\n        {\n            name: \"saturn\",\n            sign: \"libra\",\n            degree: 5,\n            house: 7,\n            retrograde: true\n        }\n    ];\n    // Generate placeholder houses\n    const houses = Array.from({\n        length: 12\n    }, (_, i)=>({\n            number: i + 1,\n            sign: Object.keys(zodiacSymbols)[i % 12],\n            degree: i * 30 % 360,\n            cusp: true\n        }));\n    // Generate placeholder angles\n    const angles = {\n        ascendant: {\n            sign: \"aries\",\n            degree: 0\n        },\n        midheaven: {\n            sign: \"capricorn\",\n            degree: 270\n        },\n        descendant: {\n            sign: \"libra\",\n            degree: 180\n        },\n        imumCoeli: {\n            sign: \"cancer\",\n            degree: 90\n        }\n    };\n    return {\n        planets,\n        houses,\n        angles,\n        aspects: [],\n        birthDetails: {\n            date: birthDate,\n            time: birthTime,\n            location: {\n                latitude,\n                longitude,\n                name: \"Location data unavailable\"\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXO1lBQUV2QyxNQUFNO1lBQVV3QixRQUFRO1FBQUc7SUFDMUM7SUFFQSxPQUFPO1FBQ0xEO1FBQ0FJO1FBQ0FRO1FBQ0FLLFNBQVMsRUFBRTtRQUNYQyxjQUFjO1lBQ1pDLE1BQU1uRztZQUNOb0csTUFBTW5HO1lBQ05xQixVQUFVO2dCQUNScEI7Z0JBQ0FDO2dCQUNBdUIsTUFBTTtZQUNSO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFya29ub3Zha292c2tpL0RvY3VtZW50cy9WaXN1YWwgQ29kZS9Bc3Ryb0Jvb2svQXN0cm9Cb29rL3NlcnZpY2VzL2FzdHJvbG9neS1zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXN0cm9sb2d5IFNlcnZpY2VcbiAqIEhhbmRsZXMgYWxsIGludGVyYWN0aW9ucyB3aXRoIGFzdHJvbG9neSBBUElzIGFuZCBkYXRhIHByb2Nlc3NpbmdcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IE5hdGFsQ2hhcnQsIENoYXJ0SW50ZXJwcmV0YXRpb24sIFpvZGlhY1NpZ24gfSBmcm9tIFwiQC90eXBlcy9hc3Ryb2xvZ3lcIlxuaW1wb3J0IHtcbiAgZmV0Y2hOYXRhbENoYXJ0IGFzIGZldGNoTmF0YWxDaGFydEZyb21BUEksXG4gIGdlb2NvZGVMb2NhdGlvbiBhcyBnZW9jb2RlTG9jYXRpb25Gcm9tQVBJLFxuICBnZXROYXRhbENoYXJ0SW50ZXJwcmV0YXRpb24gYXMgZ2V0SW50ZXJwcmV0YXRpb25Gcm9tQVBJLFxuICBnZXREYWlseUhvcm9zY29wZSBhcyBnZXREYWlseUhvcm9zY29wZUZyb21BUEksXG4gIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHIGFzIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHRnJvbUFQSSxcbn0gZnJvbSBcIi4vYXN0cm9sb2d5LWFwaS1zZXJ2aWNlXCJcblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIGNoYXJ0IGRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTmF0YWxDaGFydChcbiAgYmlydGhEYXRlOiBzdHJpbmcsXG4gIGJpcnRoVGltZTogc3RyaW5nLFxuICBsYXRpdHVkZTogbnVtYmVyLFxuICBsb25naXR1ZGU6IG51bWJlcixcbik6IFByb21pc2U8TmF0YWxDaGFydD4ge1xuICB0cnkge1xuICAgIC8vIENhbGN1bGF0ZSB0aW1lem9uZSBmcm9tIGxvbmdpdHVkZSAoYXBwcm94aW1hdGUpXG4gICAgLy8gSW4gYSByZWFsIGFwcCwgeW91IHdvdWxkIHVzZSBhIHRpbWV6b25lIEFQSSBvciBsaWJyYXJ5XG4gICAgY29uc3QgdGltZXpvbmUgPSBNYXRoLnJvdW5kKGxvbmdpdHVkZSAvIDE1KVxuXG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBmZXRjaE5hdGFsQ2hhcnRGcm9tQVBJKGJpcnRoRGF0ZSwgYmlydGhUaW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lem9uZSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgY2hhcnQ6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIHdoZWVsIGNoYXJ0IFNWR1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hOYXRhbFdoZWVsQ2hhcnRTVkcoXG4gIGJpcnRoRGF0ZTogc3RyaW5nLFxuICBiaXJ0aFRpbWU6IHN0cmluZyxcbiAgbGF0aXR1ZGU6IG51bWJlcixcbiAgbG9uZ2l0dWRlOiBudW1iZXIsXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIENhbGN1bGF0ZSB0aW1lem9uZSBmcm9tIGxvbmdpdHVkZSAoYXBwcm94aW1hdGUpXG4gICAgY29uc3QgdGltZXpvbmUgPSBNYXRoLnJvdW5kKGxvbmdpdHVkZSAvIDE1KVxuXG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBmZXRjaE5hdGFsV2hlZWxDaGFydFNWR0Zyb21BUEkoYmlydGhEYXRlLCBiaXJ0aFRpbWUsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHRpbWV6b25lKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBuYXRhbCB3aGVlbCBjaGFydCBTVkc6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBHZW9jb2RlcyBhIGxvY2F0aW9uIHN0cmluZyB0byBnZXQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VvY29kZUxvY2F0aW9uKFxuICBsb2NhdGlvblN0cmluZzogc3RyaW5nLFxuKTogUHJvbWlzZTx7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIC8vIFRyeSB0byB1c2UgYSBzaW1wbGUgZ2VvY29kaW5nIGFwcHJvYWNoIGZpcnN0XG4gICAgY29uc3Qgc2ltcGxlR2VvY29kZSA9IGdldFNpbXBsZUdlb2NvZGluZyhsb2NhdGlvblN0cmluZylcbiAgICBpZiAoc2ltcGxlR2VvY29kZSkge1xuICAgICAgY29uc29sZS5sb2coXCJVc2luZyBzaW1wbGUgZ2VvY29kaW5nIGZvcjpcIiwgbG9jYXRpb25TdHJpbmcpXG4gICAgICByZXR1cm4gc2ltcGxlR2VvY29kZVxuICAgIH1cblxuICAgIC8vIFRyeSB0aGUgZGlyZWN0IEFQSSBjYWxsIGZpcnN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlb2NvZGVMb2NhdGlvbkZyb21BUEkobG9jYXRpb25TdHJpbmcpXG4gICAgICBpZiAocmVzdWx0LmxhdGl0dWRlICE9PSAwIHx8IHJlc3VsdC5sb25naXR1ZGUgIT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJEaXJlY3QgQVBJIGdlb2NvZGluZyBmYWlsZWQsIHRyeWluZyAvYXBpL2dlb2NvZGVcIiwgZXJyb3IpXG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2s6IHVzZSB0aGUgY3VzdG9tIC9hcGkvZ2VvY29kZSBlbmRwb2ludCB3aXRoIFBPU1RcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvZ2VvY29kZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBsb2NhdGlvbjogbG9jYXRpb25TdHJpbmcgfSlcbiAgICAgIH0pXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhdGl0dWRlOiBkYXRhLmxhdGl0dWRlLFxuICAgICAgICAgIGxvbmdpdHVkZTogZGF0YS5sb25naXR1ZGUsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lIHx8IGxvY2F0aW9uU3RyaW5nLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1c2luZyAvYXBpL2dlb2NvZGUgZmFsbGJhY2s6XCIsIGVycm9yKVxuICAgIH1cblxuICAgIC8vIEZpbmFsIGZhbGxiYWNrXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAwLFxuICAgICAgbG9uZ2l0dWRlOiAwLFxuICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZW9jb2Rpbmcgc2VydmljZTpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAwLFxuICAgICAgbG9uZ2l0dWRlOiAwLFxuICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2ltcGxlIGdlb2NvZGluZyBmdW5jdGlvbiBmb3IgY29tbW9uIGxvY2F0aW9uc1xuICogVGhpcyBzZXJ2ZXMgYXMgYSBmYWxsYmFjayB3aGVuIHRoZSBBUEkgZmFpbHNcbiAqL1xuZnVuY3Rpb24gZ2V0U2ltcGxlR2VvY29kaW5nKFxuICBsb2NhdGlvblN0cmluZzogc3RyaW5nLFxuICBmb3JjZUZhbGxiYWNrID0gZmFsc2UsXG4pOiB7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfSB8IG51bGwge1xuICAvLyBOb3JtYWxpemUgdGhlIGlucHV0XG4gIGNvbnN0IG5vcm1hbGl6ZWRJbnB1dCA9IGxvY2F0aW9uU3RyaW5nLnRvTG93ZXJDYXNlKCkudHJpbSgpXG5cbiAgLy8gQ29tbW9uIGNpdHkgY29vcmRpbmF0ZXNcbiAgY29uc3QgY2l0eUNvb3JkaW5hdGVzOiBSZWNvcmQ8c3RyaW5nLCBbbnVtYmVyLCBudW1iZXJdPiA9IHtcbiAgICAvLyBOb3J0aCBBbWVyaWNhXG4gICAgXCJuZXcgeW9ya1wiOiBbNDAuNzEyOCwgLTc0LjAwNl0sXG4gICAgXCJsb3MgYW5nZWxlc1wiOiBbMzQuMDUyMiwgLTExOC4yNDM3XSxcbiAgICBjaGljYWdvOiBbNDEuODc4MSwgLTg3LjYyOThdLFxuICAgIHRvcm9udG86IFs0My42NTMyLCAtNzkuMzgzMl0sXG4gICAgXCJtZXhpY28gY2l0eVwiOiBbMTkuNDMyNiwgLTk5LjEzMzJdLFxuXG4gICAgLy8gRXVyb3BlXG4gICAgbG9uZG9uOiBbNTEuNTA3NCwgLTAuMTI3OF0sXG4gICAgcGFyaXM6IFs0OC44NTY2LCAyLjM1MjJdLFxuICAgIGJlcmxpbjogWzUyLjUyLCAxMy40MDVdLFxuICAgIG1hZHJpZDogWzQwLjQxNjgsIC0zLjcwMzhdLFxuICAgIHJvbWU6IFs0MS45MDI4LCAxMi40OTY0XSxcbiAgICBhbXN0ZXJkYW06IFs1Mi4zNjc2LCA0LjkwNDFdLFxuICAgIHZpZW5uYTogWzQ4LjIwODIsIDE2LjM3MzhdLFxuICAgIGhhbWJ1cmc6IFs1My41NTExLCA5Ljk5MzddLFxuICAgIGZyYW5rZnVydDogWzUwLjExMDksIDguNjgyMV0sXG5cbiAgICAvLyBBc2lhXG4gICAgdG9reW86IFszNS42NzYyLCAxMzkuNjUwM10sXG4gICAgYmVpamluZzogWzM5LjkwNDIsIDExNi40MDc0XSxcbiAgICBtdW1iYWk6IFsxOS4wNzYsIDcyLjg3NzddLFxuICAgIHNpbmdhcG9yZTogWzEuMzUyMSwgMTAzLjgxOThdLFxuXG4gICAgLy8gQXVzdHJhbGlhXG4gICAgc3lkbmV5OiBbLTMzLjg2ODgsIDE1MS4yMDkzXSxcbiAgICBtZWxib3VybmU6IFstMzcuODEzNiwgMTQ0Ljk2MzFdLFxuXG4gICAgLy8gU291dGggQW1lcmljYVxuICAgIFwicmlvIGRlIGphbmVpcm9cIjogWy0yMi45MDY4LCAtNDMuMTcyOV0sXG4gICAgXCJidWVub3MgYWlyZXNcIjogWy0zNC42MDM3LCAtNTguMzgxNl0sXG5cbiAgICAvLyBBZnJpY2FcbiAgICBjYWlybzogWzMwLjA0NDQsIDMxLjIzNTddLFxuICAgIFwiY2FwZSB0b3duXCI6IFstMzMuOTI0OSwgMTguNDI0MV0sXG4gIH1cblxuICAvLyBDaGVjayBmb3IgZXhhY3QgbWF0Y2hlc1xuICBmb3IgKGNvbnN0IFtjaXR5LCBjb29yZGluYXRlc10gb2YgT2JqZWN0LmVudHJpZXMoY2l0eUNvb3JkaW5hdGVzKSkge1xuICAgIGlmIChub3JtYWxpemVkSW5wdXQuaW5jbHVkZXMoY2l0eSkpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxhdGl0dWRlOiBjb29yZGluYXRlc1swXSxcbiAgICAgICAgbG9uZ2l0dWRlOiBjb29yZGluYXRlc1sxXSxcbiAgICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgd2UncmUgZm9yY2luZyBhIGZhbGxiYWNrIG9yIHRoZSBpbnB1dCBpcyB2ZXJ5IHNob3J0LCB1c2UgYSBkZWZhdWx0XG4gIGlmIChmb3JjZUZhbGxiYWNrIHx8IG5vcm1hbGl6ZWRJbnB1dC5sZW5ndGggPCAzKSB7XG4gICAgLy8gRGVmYXVsdCB0byBhIGNlbnRyYWwgbG9jYXRpb24gKDAsMCBpcyBpbiB0aGUgQXRsYW50aWMgT2NlYW4pXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAwLFxuICAgICAgbG9uZ2l0dWRlOiAwLFxuICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgfVxuICB9XG5cbiAgLy8gTm8gbWF0Y2ggZm91bmRcbiAgcmV0dXJuIG51bGxcbn1cblxuLyoqXG4gKiBHZXRzIGludGVycHJldGF0aW9ucyBmb3IgYSBuYXRhbCBjaGFydFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmF0YWxDaGFydEludGVycHJldGF0aW9uKG5hdGFsQ2hhcnQ6IE5hdGFsQ2hhcnQpOiBQcm9taXNlPENoYXJ0SW50ZXJwcmV0YXRpb24+IHtcbiAgdHJ5IHtcbiAgICAvLyBVc2UgdGhlIEFzdHJvbG9neUFQSSBpbnRlcnByZXRhdGlvbiBzZXJ2aWNlXG4gICAgcmV0dXJuIGF3YWl0IGdldEludGVycHJldGF0aW9uRnJvbUFQSShuYXRhbENoYXJ0KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGNoYXJ0IGludGVycHJldGF0aW9uOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8qKlxuICogR2V0cyBhIGRhaWx5IGhvcm9zY29wZSBmb3IgYSB6b2RpYWMgc2lnblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGFpbHlIb3Jvc2NvcGUoc2lnbjogWm9kaWFjU2lnbik6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgaG9yb3Njb3BlIHNlcnZpY2VcbiAgICByZXR1cm4gYXdhaXQgZ2V0RGFpbHlIb3Jvc2NvcGVGcm9tQVBJKHNpZ24pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgZGFpbHkgaG9yb3Njb3BlOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8vIERlZmluZSB6b2RpYWNTeW1ib2xzXG5jb25zdCB6b2RpYWNTeW1ib2xzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICBhcmllczogXCLimYhcIixcbiAgdGF1cnVzOiBcIuKZiVwiLFxuICBnZW1pbmk6IFwi4pmKXCIsXG4gIGNhbmNlcjogXCLimYtcIixcbiAgbGVvOiBcIuKZjFwiLFxuICB2aXJnbzogXCLimY1cIixcbiAgbGlicmE6IFwi4pmOXCIsXG4gIHNjb3JwaW86IFwi4pmPXCIsXG4gIHNhZ2l0dGFyaXVzOiBcIuKZkFwiLFxuICBjYXByaWNvcm46IFwi4pmRXCIsXG4gIGFxdWFyaXVzOiBcIuKZklwiLFxuICBwaXNjZXM6IFwi4pmTXCIsXG59XG5cbi8vIERlZmluZSB0aGUgUGxhbmV0UG9zaXRpb24gdHlwZVxuaW50ZXJmYWNlIFBsYW5ldFBvc2l0aW9uIHtcbiAgbmFtZTogc3RyaW5nXG4gIHNpZ246IHN0cmluZ1xuICBkZWdyZWU6IG51bWJlclxuICBob3VzZTogbnVtYmVyXG4gIHJldHJvZ3JhZGU6IGJvb2xlYW5cbn1cblxuLy8gQWRkIGEgZnVuY3Rpb24gdG8gY3JlYXRlIGEgcGxhY2Vob2xkZXIgY2hhcnQgd2hlbiB0aGUgQVBJIGZhaWxzXG5mdW5jdGlvbiBjcmVhdGVQbGFjZWhvbGRlckNoYXJ0KGJpcnRoRGF0ZTogc3RyaW5nLCBiaXJ0aFRpbWU6IHN0cmluZywgbGF0aXR1ZGU6IG51bWJlciwgbG9uZ2l0dWRlOiBudW1iZXIpOiBOYXRhbENoYXJ0IHtcbiAgLy8gQ3JlYXRlIGEgYmFzaWMgcGxhY2Vob2xkZXIgY2hhcnQgd2l0aCBtaW5pbWFsIGRhdGFcbiAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gYmlydGhEYXRlLnNwbGl0KFwiLVwiKS5tYXAoTnVtYmVyKVxuICBjb25zdCBbaG91ciwgbWludXRlXSA9IGJpcnRoVGltZS5zcGxpdChcIjpcIikubWFwKE51bWJlcilcblxuICAvLyBHZW5lcmF0ZSBzb21lIHBsYWNlaG9sZGVyIHBsYW5ldHNcbiAgY29uc3QgcGxhbmV0czogUGxhbmV0UG9zaXRpb25bXSA9IFtcbiAgICB7IG5hbWU6IFwic3VuXCIsIHNpZ246IFwiYXJpZXNcIiwgZGVncmVlOiAxNSwgaG91c2U6IDEsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcIm1vb25cIiwgc2lnbjogXCJ0YXVydXNcIiwgZGVncmVlOiAyNSwgaG91c2U6IDIsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcIm1lcmN1cnlcIiwgc2lnbjogXCJnZW1pbmlcIiwgZGVncmVlOiA1LCBob3VzZTogMywgcmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICB7IG5hbWU6IFwidmVudXNcIiwgc2lnbjogXCJjYW5jZXJcIiwgZGVncmVlOiAxMCwgaG91c2U6IDQsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcIm1hcnNcIiwgc2lnbjogXCJsZW9cIiwgZGVncmVlOiAyMCwgaG91c2U6IDUsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcImp1cGl0ZXJcIiwgc2lnbjogXCJ2aXJnb1wiLCBkZWdyZWU6IDE1LCBob3VzZTogNiwgcmV0cm9ncmFkZTogZmFsc2UgfSxcbiAgICB7IG5hbWU6IFwic2F0dXJuXCIsIHNpZ246IFwibGlicmFcIiwgZGVncmVlOiA1LCBob3VzZTogNywgcmV0cm9ncmFkZTogdHJ1ZSB9LFxuICBdXG5cbiAgLy8gR2VuZXJhdGUgcGxhY2Vob2xkZXIgaG91c2VzXG4gIGNvbnN0IGhvdXNlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEyIH0sIChfLCBpKSA9PiAoe1xuICAgIG51bWJlcjogaSArIDEsXG4gICAgc2lnbjogT2JqZWN0LmtleXMoem9kaWFjU3ltYm9scylbaSAlIDEyXSBhcyBab2RpYWNTaWduLFxuICAgIGRlZ3JlZTogKGkgKiAzMCkgJSAzNjAsXG4gICAgY3VzcDogdHJ1ZSxcbiAgfSkpXG5cbiAgLy8gR2VuZXJhdGUgcGxhY2Vob2xkZXIgYW5nbGVzXG4gIGNvbnN0IGFuZ2xlcyA9IHtcbiAgICBhc2NlbmRhbnQ6IHsgc2lnbjogXCJhcmllc1wiLCBkZWdyZWU6IDAgfSxcbiAgICBtaWRoZWF2ZW46IHsgc2lnbjogXCJjYXByaWNvcm5cIiwgZGVncmVlOiAyNzAgfSxcbiAgICBkZXNjZW5kYW50OiB7IHNpZ246IFwibGlicmFcIiwgZGVncmVlOiAxODAgfSxcbiAgICBpbXVtQ29lbGk6IHsgc2lnbjogXCJjYW5jZXJcIiwgZGVncmVlOiA5MCB9LFxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwbGFuZXRzLFxuICAgIGhvdXNlcyxcbiAgICBhbmdsZXMsXG4gICAgYXNwZWN0czogW10sXG4gICAgYmlydGhEZXRhaWxzOiB7XG4gICAgICBkYXRlOiBiaXJ0aERhdGUsXG4gICAgICB0aW1lOiBiaXJ0aFRpbWUsXG4gICAgICBsb2NhdGlvbjoge1xuICAgICAgICBsYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlLFxuICAgICAgICBuYW1lOiBcIkxvY2F0aW9uIGRhdGEgdW5hdmFpbGFibGVcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiZmV0Y2hOYXRhbENoYXJ0IiwiZmV0Y2hOYXRhbENoYXJ0RnJvbUFQSSIsImdlb2NvZGVMb2NhdGlvbiIsImdlb2NvZGVMb2NhdGlvbkZyb21BUEkiLCJnZXROYXRhbENoYXJ0SW50ZXJwcmV0YXRpb24iLCJnZXRJbnRlcnByZXRhdGlvbkZyb21BUEkiLCJnZXREYWlseUhvcm9zY29wZSIsImdldERhaWx5SG9yb3Njb3BlRnJvbUFQSSIsImZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHIiwiZmV0Y2hOYXRhbFdoZWVsQ2hhcnRTVkdGcm9tQVBJIiwiYmlydGhEYXRlIiwiYmlydGhUaW1lIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJ0aW1lem9uZSIsIk1hdGgiLCJyb3VuZCIsImVycm9yIiwiY29uc29sZSIsImxvY2F0aW9uU3RyaW5nIiwic2ltcGxlR2VvY29kZSIsImdldFNpbXBsZUdlb2NvZGluZyIsImxvZyIsInJlc3VsdCIsIndhcm4iLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibG9jYXRpb24iLCJvayIsImRhdGEiLCJqc29uIiwibmFtZSIsImZvcmNlRmFsbGJhY2siLCJub3JtYWxpemVkSW5wdXQiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJjaXR5Q29vcmRpbmF0ZXMiLCJjaGljYWdvIiwidG9yb250byIsImxvbmRvbiIsInBhcmlzIiwiYmVybGluIiwibWFkcmlkIiwicm9tZSIsImFtc3RlcmRhbSIsInZpZW5uYSIsImhhbWJ1cmciLCJmcmFua2Z1cnQiLCJ0b2t5byIsImJlaWppbmciLCJtdW1iYWkiLCJzaW5nYXBvcmUiLCJzeWRuZXkiLCJtZWxib3VybmUiLCJjYWlybyIsImNpdHkiLCJjb29yZGluYXRlcyIsIk9iamVjdCIsImVudHJpZXMiLCJpbmNsdWRlcyIsImxlbmd0aCIsIm5hdGFsQ2hhcnQiLCJzaWduIiwiem9kaWFjU3ltYm9scyIsImFyaWVzIiwidGF1cnVzIiwiZ2VtaW5pIiwiY2FuY2VyIiwibGVvIiwidmlyZ28iLCJsaWJyYSIsInNjb3JwaW8iLCJzYWdpdHRhcml1cyIsImNhcHJpY29ybiIsImFxdWFyaXVzIiwicGlzY2VzIiwiY3JlYXRlUGxhY2Vob2xkZXJDaGFydCIsInllYXIiLCJtb250aCIsImRheSIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwiaG91ciIsIm1pbnV0ZSIsInBsYW5ldHMiLCJkZWdyZWUiLCJob3VzZSIsInJldHJvZ3JhZGUiLCJob3VzZXMiLCJBcnJheSIsImZyb20iLCJfIiwiaSIsIm51bWJlciIsImtleXMiLCJjdXNwIiwiYW5nbGVzIiwiYXNjZW5kYW50IiwibWlkaGVhdmVuIiwiZGVzY2VuZGFudCIsImltdW1Db2VsaSIsImFzcGVjdHMiLCJiaXJ0aERldGFpbHMiLCJkYXRlIiwidGltZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./services/astrology-service.ts\n");

/***/ }),

/***/ "(ssr)/./utils/environment.ts":
/*!******************************!*\
  !*** ./utils/environment.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EnvironmentError: () => (/* binding */ EnvironmentError),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   devError: () => (/* binding */ devError),\n/* harmony export */   devLog: () => (/* binding */ devLog),\n/* harmony export */   env: () => (/* binding */ env),\n/* harmony export */   getMonitoringConfig: () => (/* binding */ getMonitoringConfig),\n/* harmony export */   prodError: () => (/* binding */ prodError),\n/* harmony export */   validateEnvironment: () => (/* binding */ validateEnvironment),\n/* harmony export */   validateMonitoringEnv: () => (/* binding */ validateMonitoringEnv)\n/* harmony export */ });\n/**\n * Environment variable configuration\n * Simple and safe environment variable access for development and production\n */ // Environment configuration with safe fallbacks\nconst env = {\n    // Supabase\n    NEXT_PUBLIC_SUPABASE_URL: \"https://zzkvjfqjojerhwmkfdfn.supabase.co\" || 0,\n    NEXT_PUBLIC_SUPABASE_ANON_KEY: \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp6a3ZqZnFqb2plcmh3bWtmZGZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4OTE2MzEsImV4cCI6MjA2MDQ2NzYzMX0.bgUiYuIrUc3kcys6IL3i6yWt7lzwkR6P64xOpybO7D0\" || 0,\n    DATABASE_URL: process.env.DATABASE_URL || '',\n    // Astrology API (with development fallbacks)\n    USER_ID: process.env.USER_ID || '642085',\n    API_KEY: process.env.API_KEY || '13bfcdadccb0479d0210413485482bec21047ce0',\n    // Shopify (try both NEXT_PUBLIC_ and regular versions)\n    NEXT_PUBLIC_SHOPIFY_STOREFRONT_API_ENDPOINT: \"https://0wbv78-wi.myshopify.com/api/2024-01/graphql.json\" || 0 || 0,\n    NEXT_PUBLIC_SHOPIFY_STOREFRONT_ACCESS_TOKEN: \"0d3432993f819b0edf650257875519f5\" || 0 || 0,\n    // App Config\n    NODE_ENV: \"development\" || 0\n};\n// Development logging utility - only logs in development\nconst devLog = (...args)=>{\n    if (env.NODE_ENV === 'development') {\n        console.log(...args);\n    }\n};\n// Development error logging utility - only logs in development\nconst devError = (...args)=>{\n    if (env.NODE_ENV === 'development') {\n        console.error(...args);\n    }\n};\n// Production error logging utility - always logs errors\nconst prodError = (...args)=>{\n    console.error(...args);\n};\n// Environment validation class (for explicit validation when needed)\nclass EnvironmentError extends Error {\n    constructor(message){\n        super(message);\n        this.name = 'EnvironmentError';\n    }\n}\n// Optional validation function (only call when needed server-side)\nfunction validateEnvironment() {\n    if (env.NODE_ENV === 'production' && \"undefined\" === 'undefined') {\n        const missing = [];\n        if (!env.NEXT_PUBLIC_SUPABASE_URL) missing.push('NEXT_PUBLIC_SUPABASE_URL');\n        if (!env.NEXT_PUBLIC_SUPABASE_ANON_KEY) missing.push('NEXT_PUBLIC_SUPABASE_ANON_KEY');\n        if (!env.DATABASE_URL) missing.push('DATABASE_URL');\n        if (!env.USER_ID) missing.push('USER_ID');\n        if (!env.API_KEY) missing.push('API_KEY');\n        if (missing.length > 0) {\n            throw new EnvironmentError(`Missing required environment variables in production: ${missing.join(', ')}\\n` + 'Please check your .env file and ensure all required variables are set.');\n        }\n    }\n}\n/**\n * Get monitoring configuration from environment variables\n */ function getMonitoringConfig() {\n    return {\n        sentryDsn: process.env.NEXT_PUBLIC_SENTRY_DSN,\n        sentryEnvironment: \"development\" || 0,\n        vercelAnalyticsId: process.env.NEXT_PUBLIC_VERCEL_ANALYTICS_ID,\n        enableErrorReporting: process.env.FEATURE_ERROR_REPORTING !== 'false',\n        enablePerformanceTracking: process.env.FEATURE_PERFORMANCE_TRACKING !== 'false',\n        enableSecurityMonitoring: process.env.SECURITY_MONITORING_ENABLED === 'true'\n    };\n}\n/**\n * Validate monitoring environment variables\n */ function validateMonitoringEnv() {\n    const errors = [];\n    // Check for Sentry configuration in production\n    if (false) {}\n    // Validate Sentry DSN format if provided\n    if (process.env.NEXT_PUBLIC_SENTRY_DSN) {\n        const dsn = process.env.NEXT_PUBLIC_SENTRY_DSN;\n        if (!dsn.startsWith('https://') || !dsn.includes('@sentry.io')) {\n            errors.push('NEXT_PUBLIC_SENTRY_DSN appears to be invalid format');\n        }\n    }\n    // Check for analytics configuration\n    if (false) {}\n    return {\n        isValid: errors.length === 0,\n        errors\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (env);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi91dGlscy9lbnZpcm9ubWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFRCxnREFBZ0Q7QUFDekMsTUFBTUEsTUFBTTtJQUNqQixXQUFXO0lBQ1hDLDBCQUEwQkMsMENBQW9DLElBQUksQ0FBRTtJQUNwRUMsK0JBQStCRCxrTkFBeUMsSUFBSSxDQUFFO0lBQzlFRSxjQUFjRixRQUFRRixHQUFHLENBQUNJLFlBQVksSUFBSTtJQUUxQyw2Q0FBNkM7SUFDN0NDLFNBQVNILFFBQVFGLEdBQUcsQ0FBQ0ssT0FBTyxJQUFJO0lBQ2hDQyxTQUFTSixRQUFRRixHQUFHLENBQUNNLE9BQU8sSUFBSTtJQUVoQyx1REFBdUQ7SUFDdkRDLDZDQUNFTCwwREFBdUQsSUFDdkRBLENBQTJDLElBQzNDLENBQTBEO0lBQzVETyw2Q0FDRVAsa0NBQXVELElBQ3ZEQSxDQUEyQyxJQUMzQyxDQUFrQztJQUVwQyxhQUFhO0lBQ2JTLFVBQVVULGlCQUF3QixDQUFhO0FBQ2pELEVBQUM7QUFFRCx5REFBeUQ7QUFDbEQsTUFBTVUsU0FBUyxDQUFDLEdBQUdDO0lBQ3hCLElBQUliLElBQUlXLFFBQVEsS0FBSyxlQUFlO1FBQ2xDRyxRQUFRQyxHQUFHLElBQUlGO0lBQ2pCO0FBQ0YsRUFBQztBQUVELCtEQUErRDtBQUN4RCxNQUFNRyxXQUFXLENBQUMsR0FBR0g7SUFDMUIsSUFBSWIsSUFBSVcsUUFBUSxLQUFLLGVBQWU7UUFDbENHLFFBQVFHLEtBQUssSUFBSUo7SUFDbkI7QUFDRixFQUFDO0FBRUQsd0RBQXdEO0FBQ2pELE1BQU1LLFlBQVksQ0FBQyxHQUFHTDtJQUMzQkMsUUFBUUcsS0FBSyxJQUFJSjtBQUNuQixFQUFDO0FBRUQscUVBQXFFO0FBQzlELE1BQU1NLHlCQUF5QkM7SUFDcENDLFlBQVlDLE9BQWUsQ0FBRTtRQUMzQixLQUFLLENBQUNBO1FBQ04sSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRUEsbUVBQW1FO0FBQzVELFNBQVNDO0lBQ2QsSUFBSXhCLElBQUlXLFFBQVEsS0FBSyxnQkFBZ0IsZ0JBQWtCLGFBQWE7UUFDbEUsTUFBTWMsVUFBb0IsRUFBRTtRQUU1QixJQUFJLENBQUN6QixJQUFJQyx3QkFBd0IsRUFBRXdCLFFBQVFDLElBQUksQ0FBQztRQUNoRCxJQUFJLENBQUMxQixJQUFJRyw2QkFBNkIsRUFBRXNCLFFBQVFDLElBQUksQ0FBQztRQUNyRCxJQUFJLENBQUMxQixJQUFJSSxZQUFZLEVBQUVxQixRQUFRQyxJQUFJLENBQUM7UUFDcEMsSUFBSSxDQUFDMUIsSUFBSUssT0FBTyxFQUFFb0IsUUFBUUMsSUFBSSxDQUFDO1FBQy9CLElBQUksQ0FBQzFCLElBQUlNLE9BQU8sRUFBRW1CLFFBQVFDLElBQUksQ0FBQztRQUUvQixJQUFJRCxRQUFRRSxNQUFNLEdBQUcsR0FBRztZQUN0QixNQUFNLElBQUlSLGlCQUNSLENBQUMsc0RBQXNELEVBQUVNLFFBQVFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUMvRTtRQUVKO0lBQ0Y7QUFDRjtBQVdBOztDQUVDLEdBQ00sU0FBU0M7SUFDZCxPQUFPO1FBQ0xDLFdBQVc1QixRQUFRRixHQUFHLENBQUMrQixzQkFBc0I7UUFDN0NDLG1CQUFtQjlCLGlCQUF3QixDQUFhO1FBQ3hEK0IsbUJBQW1CL0IsUUFBUUYsR0FBRyxDQUFDa0MsK0JBQStCO1FBQzlEQyxzQkFBc0JqQyxRQUFRRixHQUFHLENBQUNvQyx1QkFBdUIsS0FBSztRQUM5REMsMkJBQTJCbkMsUUFBUUYsR0FBRyxDQUFDc0MsNEJBQTRCLEtBQUs7UUFDeEVDLDBCQUEwQnJDLFFBQVFGLEdBQUcsQ0FBQ3dDLDJCQUEyQixLQUFLO0lBQ3hFO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVNDO0lBQ2QsTUFBTUMsU0FBbUIsRUFBRTtJQUUzQiwrQ0FBK0M7SUFDL0MsSUFBSXhDLEtBQTRFLEVBQUUsRUFFakY7SUFFRCx5Q0FBeUM7SUFDekMsSUFBSUEsUUFBUUYsR0FBRyxDQUFDK0Isc0JBQXNCLEVBQUU7UUFDdEMsTUFBTVksTUFBTXpDLFFBQVFGLEdBQUcsQ0FBQytCLHNCQUFzQjtRQUM5QyxJQUFJLENBQUNZLElBQUlDLFVBQVUsQ0FBQyxlQUFlLENBQUNELElBQUlFLFFBQVEsQ0FBQyxlQUFlO1lBQzlESCxPQUFPaEIsSUFBSSxDQUFDO1FBQ2Q7SUFDRjtJQUVBLG9DQUFvQztJQUNwQyxJQUFJeEIsS0FFMEMsRUFBRSxFQUUvQztJQUVELE9BQU87UUFDTDZDLFNBQVNMLE9BQU9mLE1BQU0sS0FBSztRQUMzQmU7SUFDRjtBQUNGO0FBRUEsaUVBQWUxQyxHQUFHQSxFQUFBIiwic291cmNlcyI6WyIvVXNlcnMvbWFya29ub3Zha292c2tpL0RvY3VtZW50cy9WaXN1YWwgQ29kZS9Bc3Ryb0Jvb2svQXN0cm9Cb29rL3V0aWxzL2Vudmlyb25tZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRW52aXJvbm1lbnQgdmFyaWFibGUgY29uZmlndXJhdGlvblxuICogU2ltcGxlIGFuZCBzYWZlIGVudmlyb25tZW50IHZhcmlhYmxlIGFjY2VzcyBmb3IgZGV2ZWxvcG1lbnQgYW5kIHByb2R1Y3Rpb25cbiAqL1xuXG4vLyBFbnZpcm9ubWVudCBjb25maWd1cmF0aW9uIHdpdGggc2FmZSBmYWxsYmFja3NcbmV4cG9ydCBjb25zdCBlbnYgPSB7XG4gIC8vIFN1cGFiYXNlXG4gIE5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnLFxuICBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgJycsXG4gIERBVEFCQVNFX1VSTDogcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMIHx8ICcnLFxuICBcbiAgLy8gQXN0cm9sb2d5IEFQSSAod2l0aCBkZXZlbG9wbWVudCBmYWxsYmFja3MpXG4gIFVTRVJfSUQ6IHByb2Nlc3MuZW52LlVTRVJfSUQgfHwgJzY0MjA4NScsXG4gIEFQSV9LRVk6IHByb2Nlc3MuZW52LkFQSV9LRVkgfHwgJzEzYmZjZGFkY2NiMDQ3OWQwMjEwNDEzNDg1NDgyYmVjMjEwNDdjZTAnLFxuICBcbiAgLy8gU2hvcGlmeSAodHJ5IGJvdGggTkVYVF9QVUJMSUNfIGFuZCByZWd1bGFyIHZlcnNpb25zKVxuICBORVhUX1BVQkxJQ19TSE9QSUZZX1NUT1JFRlJPTlRfQVBJX0VORFBPSU5UOiBcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TSE9QSUZZX1NUT1JFRlJPTlRfQVBJX0VORFBPSU5UIHx8IFxuICAgIHByb2Nlc3MuZW52LlNIT1BJRllfU1RPUkVGUk9OVF9BUElfRU5EUE9JTlQgfHwgXG4gICAgJ2h0dHBzOi8vMHdidjc4LXdpLm15c2hvcGlmeS5jb20vYXBpLzIwMjQtMDEvZ3JhcGhxbC5qc29uJyxcbiAgTkVYVF9QVUJMSUNfU0hPUElGWV9TVE9SRUZST05UX0FDQ0VTU19UT0tFTjogXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU0hPUElGWV9TVE9SRUZST05UX0FDQ0VTU19UT0tFTiB8fCBcbiAgICBwcm9jZXNzLmVudi5TSE9QSUZZX1NUT1JFRlJPTlRfQUNDRVNTX1RPS0VOIHx8IFxuICAgICcwZDM0MzI5OTNmODE5YjBlZGY2NTAyNTc4NzU1MTlmNScsXG4gIFxuICAvLyBBcHAgQ29uZmlnXG4gIE5PREVfRU5WOiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnXG59XG5cbi8vIERldmVsb3BtZW50IGxvZ2dpbmcgdXRpbGl0eSAtIG9ubHkgbG9ncyBpbiBkZXZlbG9wbWVudFxuZXhwb3J0IGNvbnN0IGRldkxvZyA9ICguLi5hcmdzOiBhbnlbXSk6IHZvaWQgPT4ge1xuICBpZiAoZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY29uc29sZS5sb2coLi4uYXJncylcbiAgfVxufVxuXG4vLyBEZXZlbG9wbWVudCBlcnJvciBsb2dnaW5nIHV0aWxpdHkgLSBvbmx5IGxvZ3MgaW4gZGV2ZWxvcG1lbnRcbmV4cG9ydCBjb25zdCBkZXZFcnJvciA9ICguLi5hcmdzOiBhbnlbXSk6IHZvaWQgPT4ge1xuICBpZiAoZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgY29uc29sZS5lcnJvciguLi5hcmdzKVxuICB9XG59XG5cbi8vIFByb2R1Y3Rpb24gZXJyb3IgbG9nZ2luZyB1dGlsaXR5IC0gYWx3YXlzIGxvZ3MgZXJyb3JzXG5leHBvcnQgY29uc3QgcHJvZEVycm9yID0gKC4uLmFyZ3M6IGFueVtdKTogdm9pZCA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoLi4uYXJncylcbn1cblxuLy8gRW52aXJvbm1lbnQgdmFsaWRhdGlvbiBjbGFzcyAoZm9yIGV4cGxpY2l0IHZhbGlkYXRpb24gd2hlbiBuZWVkZWQpXG5leHBvcnQgY2xhc3MgRW52aXJvbm1lbnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSlcbiAgICB0aGlzLm5hbWUgPSAnRW52aXJvbm1lbnRFcnJvcidcbiAgfVxufVxuXG4vLyBPcHRpb25hbCB2YWxpZGF0aW9uIGZ1bmN0aW9uIChvbmx5IGNhbGwgd2hlbiBuZWVkZWQgc2VydmVyLXNpZGUpXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVFbnZpcm9ubWVudCgpOiB2b2lkIHtcbiAgaWYgKGVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgY29uc3QgbWlzc2luZzogc3RyaW5nW10gPSBbXVxuICAgIFxuICAgIGlmICghZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCkgbWlzc2luZy5wdXNoKCdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwnKVxuICAgIGlmICghZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZKSBtaXNzaW5nLnB1c2goJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJylcbiAgICBpZiAoIWVudi5EQVRBQkFTRV9VUkwpIG1pc3NpbmcucHVzaCgnREFUQUJBU0VfVVJMJylcbiAgICBpZiAoIWVudi5VU0VSX0lEKSBtaXNzaW5nLnB1c2goJ1VTRVJfSUQnKVxuICAgIGlmICghZW52LkFQSV9LRVkpIG1pc3NpbmcucHVzaCgnQVBJX0tFWScpXG5cbiAgICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgICB0aHJvdyBuZXcgRW52aXJvbm1lbnRFcnJvcihcbiAgICAgICAgYE1pc3NpbmcgcmVxdWlyZWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGluIHByb2R1Y3Rpb246ICR7bWlzc2luZy5qb2luKCcsICcpfVxcbmAgK1xuICAgICAgICAnUGxlYXNlIGNoZWNrIHlvdXIgLmVudiBmaWxlIGFuZCBlbnN1cmUgYWxsIHJlcXVpcmVkIHZhcmlhYmxlcyBhcmUgc2V0LidcbiAgICAgIClcbiAgICB9XG4gIH1cbn1cblxuaW50ZXJmYWNlIE1vbml0b3JpbmdDb25maWcge1xuICBzZW50cnlEc24/OiBzdHJpbmc7XG4gIHNlbnRyeUVudmlyb25tZW50OiBzdHJpbmc7XG4gIHZlcmNlbEFuYWx5dGljc0lkPzogc3RyaW5nO1xuICBlbmFibGVFcnJvclJlcG9ydGluZzogYm9vbGVhbjtcbiAgZW5hYmxlUGVyZm9ybWFuY2VUcmFja2luZzogYm9vbGVhbjtcbiAgZW5hYmxlU2VjdXJpdHlNb25pdG9yaW5nOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEdldCBtb25pdG9yaW5nIGNvbmZpZ3VyYXRpb24gZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1vbml0b3JpbmdDb25maWcoKTogTW9uaXRvcmluZ0NvbmZpZyB7XG4gIHJldHVybiB7XG4gICAgc2VudHJ5RHNuOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TRU5UUllfRFNOLFxuICAgIHNlbnRyeUVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCAnZGV2ZWxvcG1lbnQnLFxuICAgIHZlcmNlbEFuYWx5dGljc0lkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19WRVJDRUxfQU5BTFlUSUNTX0lELFxuICAgIGVuYWJsZUVycm9yUmVwb3J0aW5nOiBwcm9jZXNzLmVudi5GRUFUVVJFX0VSUk9SX1JFUE9SVElORyAhPT0gJ2ZhbHNlJyxcbiAgICBlbmFibGVQZXJmb3JtYW5jZVRyYWNraW5nOiBwcm9jZXNzLmVudi5GRUFUVVJFX1BFUkZPUk1BTkNFX1RSQUNLSU5HICE9PSAnZmFsc2UnLFxuICAgIGVuYWJsZVNlY3VyaXR5TW9uaXRvcmluZzogcHJvY2Vzcy5lbnYuU0VDVVJJVFlfTU9OSVRPUklOR19FTkFCTEVEID09PSAndHJ1ZScsXG4gIH07XG59XG5cbi8qKlxuICogVmFsaWRhdGUgbW9uaXRvcmluZyBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlTW9uaXRvcmluZ0VudigpOiB7IGlzVmFsaWQ6IGJvb2xlYW47IGVycm9yczogc3RyaW5nW10gfSB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgXG4gIC8vIENoZWNrIGZvciBTZW50cnkgY29uZmlndXJhdGlvbiBpbiBwcm9kdWN0aW9uXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nICYmICFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TRU5UUllfRFNOKSB7XG4gICAgZXJyb3JzLnB1c2goJ05FWFRfUFVCTElDX1NFTlRSWV9EU04gaXMgcmVjb21tZW5kZWQgZm9yIHByb2R1Y3Rpb24gZXJyb3IgbW9uaXRvcmluZycpO1xuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBTZW50cnkgRFNOIGZvcm1hdCBpZiBwcm92aWRlZFxuICBpZiAocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU0VOVFJZX0RTTikge1xuICAgIGNvbnN0IGRzbiA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NFTlRSWV9EU047XG4gICAgaWYgKCFkc24uc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSB8fCAhZHNuLmluY2x1ZGVzKCdAc2VudHJ5LmlvJykpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdORVhUX1BVQkxJQ19TRU5UUllfRFNOIGFwcGVhcnMgdG8gYmUgaW52YWxpZCBmb3JtYXQnKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZvciBhbmFseXRpY3MgY29uZmlndXJhdGlvblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyAmJiBcbiAgICAgICFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19WRVJDRUxfQU5BTFlUSUNTX0lEICYmIFxuICAgICAgIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dBX01FQVNVUkVNRU5UX0lEKSB7XG4gICAgZXJyb3JzLnB1c2goJ05vIGFuYWx5dGljcyBjb25maWd1cmF0aW9uIGZvdW5kIChORVhUX1BVQkxJQ19WRVJDRUxfQU5BTFlUSUNTX0lEIG9yIE5FWFRfUFVCTElDX0dBX01FQVNVUkVNRU5UX0lEKScpO1xuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGVudiAiXSwibmFtZXMiOlsiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwicHJvY2VzcyIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiREFUQUJBU0VfVVJMIiwiVVNFUl9JRCIsIkFQSV9LRVkiLCJORVhUX1BVQkxJQ19TSE9QSUZZX1NUT1JFRlJPTlRfQVBJX0VORFBPSU5UIiwiU0hPUElGWV9TVE9SRUZST05UX0FQSV9FTkRQT0lOVCIsIk5FWFRfUFVCTElDX1NIT1BJRllfU1RPUkVGUk9OVF9BQ0NFU1NfVE9LRU4iLCJTSE9QSUZZX1NUT1JFRlJPTlRfQUNDRVNTX1RPS0VOIiwiTk9ERV9FTlYiLCJkZXZMb2ciLCJhcmdzIiwiY29uc29sZSIsImxvZyIsImRldkVycm9yIiwiZXJyb3IiLCJwcm9kRXJyb3IiLCJFbnZpcm9ubWVudEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJuYW1lIiwidmFsaWRhdGVFbnZpcm9ubWVudCIsIm1pc3NpbmciLCJwdXNoIiwibGVuZ3RoIiwiam9pbiIsImdldE1vbml0b3JpbmdDb25maWciLCJzZW50cnlEc24iLCJORVhUX1BVQkxJQ19TRU5UUllfRFNOIiwic2VudHJ5RW52aXJvbm1lbnQiLCJ2ZXJjZWxBbmFseXRpY3NJZCIsIk5FWFRfUFVCTElDX1ZFUkNFTF9BTkFMWVRJQ1NfSUQiLCJlbmFibGVFcnJvclJlcG9ydGluZyIsIkZFQVRVUkVfRVJST1JfUkVQT1JUSU5HIiwiZW5hYmxlUGVyZm9ybWFuY2VUcmFja2luZyIsIkZFQVRVUkVfUEVSRk9STUFOQ0VfVFJBQ0tJTkciLCJlbmFibGVTZWN1cml0eU1vbml0b3JpbmciLCJTRUNVUklUWV9NT05JVE9SSU5HX0VOQUJMRUQiLCJ2YWxpZGF0ZU1vbml0b3JpbmdFbnYiLCJlcnJvcnMiLCJkc24iLCJzdGFydHNXaXRoIiwiaW5jbHVkZXMiLCJORVhUX1BVQkxJQ19HQV9NRUFTVVJFTUVOVF9JRCIsImlzVmFsaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./utils/environment.ts\n");

/***/ }),

/***/ "(ssr)/./utils/fallback-chart.ts":
/*!*********************************!*\
  !*** ./utils/fallback-chart.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFallbackChartSVG: () => (/* binding */ getFallbackChartSVG),\n/* harmony export */   getFallbackNatalChart: () => (/* binding */ getFallbackNatalChart),\n/* harmony export */   loadFallbackNatalChart: () => (/* binding */ loadFallbackNatalChart),\n/* harmony export */   preloadFallbackNatalChart: () => (/* binding */ preloadFallbackNatalChart),\n/* harmony export */   sanitizeSvg: () => (/* binding */ sanitizeSvg)\n/* harmony export */ });\n/* harmony import */ var _utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/safe-storage */ \"(ssr)/./utils/safe-storage.ts\");\n\nconst getFallbackChartSVG = ()=>{\n    return `<svg \n    xmlns=\"http://www.w3.org/2000/svg\" \n    viewBox=\"0 0 800 800\" \n    width=\"100%\" \n    height=\"100%\"\n  >\n    <!-- Outer circle -->\n    <circle cx=\"400\" cy=\"400\" r=\"350\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" />\n    \n    <!-- Inner circle -->\n    <circle cx=\"400\" cy=\"400\" r=\"300\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1\" />\n    \n    <!-- Zodiac divisions - 12 segments -->\n    ${Array.from({\n        length: 12\n    }).map((_, i)=>{\n        const angle = i * 30 * Math.PI / 180;\n        const x1 = 400 + 350 * Math.cos(angle);\n        const y1 = 400 + 350 * Math.sin(angle);\n        const x2 = 400 + 300 * Math.cos(angle);\n        const y2 = 400 + 300 * Math.sin(angle);\n        return `<line x1=\"${x1}\" y1=\"${y1}\" x2=\"${x2}\" y2=\"${y2}\" stroke=\"currentColor\" stroke-width=\"1\" />`;\n    }).join(\"\")}\n    \n    <!-- Zodiac symbols -->\n    ${[\n        {\n            symbol: \"\",\n            name: \"Aries\",\n            angle: 15\n        },\n        {\n            symbol: \"\",\n            name: \"Taurus\",\n            angle: 45\n        },\n        {\n            symbol: \"\",\n            name: \"Gemini\",\n            angle: 75\n        },\n        {\n            symbol: \"\",\n            name: \"Cancer\",\n            angle: 105\n        },\n        {\n            symbol: \"\",\n            name: \"Leo\",\n            angle: 135\n        },\n        {\n            symbol: \"\",\n            name: \"Virgo\",\n            angle: 165\n        },\n        {\n            symbol: \"\",\n            name: \"Libra\",\n            angle: 195\n        },\n        {\n            symbol: \"\",\n            name: \"Scorpio\",\n            angle: 225\n        },\n        {\n            symbol: \"\",\n            name: \"Sagittarius\",\n            angle: 255\n        },\n        {\n            symbol: \"\",\n            name: \"Capricorn\",\n            angle: 285\n        },\n        {\n            symbol: \"\",\n            name: \"Aquarius\",\n            angle: 315\n        },\n        {\n            symbol: \"\",\n            name: \"Pisces\",\n            angle: 345\n        }\n    ].map((sign)=>{\n        const angle = sign.angle * Math.PI / 180;\n        const x = 400 + 325 * Math.cos(angle);\n        const y = 400 + 325 * Math.sin(angle);\n        return `\n        <text \n          x=\"${x}\" \n          y=\"${y}\" \n          text-anchor=\"middle\" \n          dominant-baseline=\"middle\" \n          fill=\"currentColor\" \n          font-size=\"20\"\n          font-family=\"Arial, sans-serif\"\n        >\n          ${sign.symbol}\n        </text>\n      `;\n    }).join(\"\")}\n    \n    <!-- Center point -->\n    <circle cx=\"400\" cy=\"400\" r=\"5\" fill=\"currentColor\" />\n  </svg>`.trim();\n};\n// Keep the existing functions for backward compatibility\nfunction getFallbackNatalChart() {\n    return getFallbackChartSVG();\n}\nasync function loadFallbackNatalChart() {\n    // This function simulates loading the fallback chart.\n    return getFallbackChartSVG();\n}\nasync function preloadFallbackNatalChart() {\n    console.log(\"Preloading fallback natal chart\");\n    try {\n        // Try to load from public folder first\n        const response = await fetch(\"/images/fallback-natal-chart.svg\");\n        if (response.ok) {\n            const svgText = await response.text();\n            console.log(\"Preloaded SVG from public folder, length:\", svgText.length);\n            // Sanitize the SVG before storing\n            const sanitizedSvg = sanitizeSvg(svgText);\n            // Store in sessionStorage for quick access\n            (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__.safeSetSessionItem)(\"fallbackNatalChartSVG\", sanitizedSvg);\n        } else {\n            throw new Error(\"SVG file not found\");\n        }\n    } catch (error) {\n        console.log(\"Error preloading SVG, generating fallback:\", error);\n        // Generate fallback\n        const fallbackSvg = getFallbackChartSVG();\n        // Store in sessionStorage\n        (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__.safeSetSessionItem)(\"fallbackNatalChartSVG\", fallbackSvg);\n    }\n}\n// Helper function to sanitize SVG content\nfunction sanitizeSvg(svgContent) {\n    if (true) {\n        // Server-side - return as is\n        return svgContent;\n    }\n    try {\n        const parser = new DOMParser();\n        const svgDoc = parser.parseFromString(svgContent, \"image/svg+xml\");\n        const svgElement = svgDoc.documentElement;\n        // Fix invalid attributes - specifically the \"hidden\" attribute\n        const elementsWithHidden = svgElement.querySelectorAll(\"[hidden]\");\n        elementsWithHidden.forEach((el)=>{\n            const hiddenValue = el.getAttribute(\"hidden\");\n            if (hiddenValue === \"\" || hiddenValue === null) {\n                // Set a valid value for the hidden attribute\n                el.setAttribute(\"hidden\", \"true\");\n            }\n        });\n        return svgElement.outerHTML;\n    } catch (error) {\n        console.error(\"Error sanitizing SVG:\", error);\n        return svgContent;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLE9BQU9DLE9BQU87UUFDZFYsUUFBUUMsR0FBRyxDQUFDLDhDQUE4Q1M7UUFDMUQsb0JBQW9CO1FBQ3BCLE1BQU1DLGNBQWNyQztRQUNwQiwwQkFBMEI7UUFDMUJELHVFQUFrQkEsQ0FBQyx5QkFBeUJzQztJQUM5QztBQUNGO0FBRUEsMENBQTBDO0FBQ25DLFNBQVNILFlBQVlJLFVBQWtCO0lBQzVDLElBQUksSUFBNkIsRUFBRTtRQUNqQyw2QkFBNkI7UUFDN0IsT0FBT0E7SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNQyxTQUFTLElBQUlDO1FBQ25CLE1BQU1DLFNBQVNGLE9BQU9HLGVBQWUsQ0FBQ0osWUFBWTtRQUNsRCxNQUFNSyxhQUFhRixPQUFPRyxlQUFlO1FBRXpDLCtEQUErRDtRQUMvRCxNQUFNQyxxQkFBcUJGLFdBQVdHLGdCQUFnQixDQUFDO1FBQ3ZERCxtQkFBbUJFLE9BQU8sQ0FBQyxDQUFDQztZQUMxQixNQUFNQyxjQUFjRCxHQUFHRSxZQUFZLENBQUM7WUFDcEMsSUFBSUQsZ0JBQWdCLE1BQU1BLGdCQUFnQixNQUFNO2dCQUM5Qyw2Q0FBNkM7Z0JBQzdDRCxHQUFHRyxZQUFZLENBQUMsVUFBVTtZQUM1QjtRQUNGO1FBRUEsT0FBT1IsV0FBV1MsU0FBUztJQUM3QixFQUFFLE9BQU9oQixPQUFPO1FBQ2RWLFFBQVFVLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9FO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcmtvbm92YWtvdnNraS9Eb2N1bWVudHMvVmlzdWFsIENvZGUvQXN0cm9Cb29rL0FzdHJvQm9vay91dGlscy9mYWxsYmFjay1jaGFydC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzYWZlU2V0U2Vzc2lvbkl0ZW0gfSBmcm9tIFwiQC91dGlscy9zYWZlLXN0b3JhZ2VcIlxuXG5leHBvcnQgY29uc3QgZ2V0RmFsbGJhY2tDaGFydFNWRyA9ICgpID0+IHtcbiAgcmV0dXJuIGA8c3ZnIFxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBcbiAgICB2aWV3Qm94PVwiMCAwIDgwMCA4MDBcIiBcbiAgICB3aWR0aD1cIjEwMCVcIiBcbiAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgPlxuICAgIDwhLS0gT3V0ZXIgY2lyY2xlIC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCIzNTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiAvPlxuICAgIFxuICAgIDwhLS0gSW5uZXIgY2lyY2xlIC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCIzMDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjFcIiAvPlxuICAgIFxuICAgIDwhLS0gWm9kaWFjIGRpdmlzaW9ucyAtIDEyIHNlZ21lbnRzIC0tPlxuICAgICR7QXJyYXkuZnJvbSh7IGxlbmd0aDogMTIgfSlcbiAgICAgIC5tYXAoKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAqIDMwICogTWF0aC5QSSkgLyAxODBcbiAgICAgICAgY29uc3QgeDEgPSA0MDAgKyAzNTAgKiBNYXRoLmNvcyhhbmdsZSlcbiAgICAgICAgY29uc3QgeTEgPSA0MDAgKyAzNTAgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgY29uc3QgeDIgPSA0MDAgKyAzMDAgKiBNYXRoLmNvcyhhbmdsZSlcbiAgICAgICAgY29uc3QgeTIgPSA0MDAgKyAzMDAgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgcmV0dXJuIGA8bGluZSB4MT1cIiR7eDF9XCIgeTE9XCIke3kxfVwiIHgyPVwiJHt4Mn1cIiB5Mj1cIiR7eTJ9XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIC8+YFxuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpfVxuICAgIFxuICAgIDwhLS0gWm9kaWFjIHN5bWJvbHMgLS0+XG4gICAgJHtbXG4gICAgICB7IHN5bWJvbDogXCLimYhcIiwgbmFtZTogXCJBcmllc1wiLCBhbmdsZTogMTUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZiVwiLCBuYW1lOiBcIlRhdXJ1c1wiLCBhbmdsZTogNDUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZilwiLCBuYW1lOiBcIkdlbWluaVwiLCBhbmdsZTogNzUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZi1wiLCBuYW1lOiBcIkNhbmNlclwiLCBhbmdsZTogMTA1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimYxcIiwgbmFtZTogXCJMZW9cIiwgYW5nbGU6IDEzNSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmNXCIsIG5hbWU6IFwiVmlyZ29cIiwgYW5nbGU6IDE2NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmOXCIsIG5hbWU6IFwiTGlicmFcIiwgYW5nbGU6IDE5NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmPXCIsIG5hbWU6IFwiU2NvcnBpb1wiLCBhbmdsZTogMjI1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimZBcIiwgbmFtZTogXCJTYWdpdHRhcml1c1wiLCBhbmdsZTogMjU1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimZFcIiwgbmFtZTogXCJDYXByaWNvcm5cIiwgYW5nbGU6IDI4NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmSXCIsIG5hbWU6IFwiQXF1YXJpdXNcIiwgYW5nbGU6IDMxNSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmTXCIsIG5hbWU6IFwiUGlzY2VzXCIsIGFuZ2xlOiAzNDUgfSxcbiAgICBdXG4gICAgICAubWFwKChzaWduKSA9PiB7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gKHNpZ24uYW5nbGUgKiBNYXRoLlBJKSAvIDE4MFxuICAgICAgICBjb25zdCB4ID0gNDAwICsgMzI1ICogTWF0aC5jb3MoYW5nbGUpXG4gICAgICAgIGNvbnN0IHkgPSA0MDAgKyAzMjUgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPHRleHQgXG4gICAgICAgICAgeD1cIiR7eH1cIiBcbiAgICAgICAgICB5PVwiJHt5fVwiIFxuICAgICAgICAgIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgXG4gICAgICAgICAgZG9taW5hbnQtYmFzZWxpbmU9XCJtaWRkbGVcIiBcbiAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgZm9udC1zaXplPVwiMjBcIlxuICAgICAgICAgIGZvbnQtZmFtaWx5PVwiQXJpYWwsIHNhbnMtc2VyaWZcIlxuICAgICAgICA+XG4gICAgICAgICAgJHtzaWduLnN5bWJvbH1cbiAgICAgICAgPC90ZXh0PlxuICAgICAgYFxuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpfVxuICAgIFxuICAgIDwhLS0gQ2VudGVyIHBvaW50IC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCI1XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIC8+XG4gIDwvc3ZnPmAudHJpbSgpXG59XG5cbi8vIEtlZXAgdGhlIGV4aXN0aW5nIGZ1bmN0aW9ucyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZhbGxiYWNrTmF0YWxDaGFydCgpOiBzdHJpbmcge1xuICByZXR1cm4gZ2V0RmFsbGJhY2tDaGFydFNWRygpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRmFsbGJhY2tOYXRhbENoYXJ0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIFRoaXMgZnVuY3Rpb24gc2ltdWxhdGVzIGxvYWRpbmcgdGhlIGZhbGxiYWNrIGNoYXJ0LlxuICByZXR1cm4gZ2V0RmFsbGJhY2tDaGFydFNWRygpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVsb2FkRmFsbGJhY2tOYXRhbENoYXJ0KCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zb2xlLmxvZyhcIlByZWxvYWRpbmcgZmFsbGJhY2sgbmF0YWwgY2hhcnRcIilcbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gbG9hZCBmcm9tIHB1YmxpYyBmb2xkZXIgZmlyc3RcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2ltYWdlcy9mYWxsYmFjay1uYXRhbC1jaGFydC5zdmdcIilcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IHN2Z1RleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgIGNvbnNvbGUubG9nKFwiUHJlbG9hZGVkIFNWRyBmcm9tIHB1YmxpYyBmb2xkZXIsIGxlbmd0aDpcIiwgc3ZnVGV4dC5sZW5ndGgpXG5cbiAgICAgIC8vIFNhbml0aXplIHRoZSBTVkcgYmVmb3JlIHN0b3JpbmdcbiAgICAgIGNvbnN0IHNhbml0aXplZFN2ZyA9IHNhbml0aXplU3ZnKHN2Z1RleHQpXG5cbiAgICAgIC8vIFN0b3JlIGluIHNlc3Npb25TdG9yYWdlIGZvciBxdWljayBhY2Nlc3NcbiAgICAgIHNhZmVTZXRTZXNzaW9uSXRlbShcImZhbGxiYWNrTmF0YWxDaGFydFNWR1wiLCBzYW5pdGl6ZWRTdmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVkcgZmlsZSBub3QgZm91bmRcIilcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJFcnJvciBwcmVsb2FkaW5nIFNWRywgZ2VuZXJhdGluZyBmYWxsYmFjazpcIiwgZXJyb3IpXG4gICAgLy8gR2VuZXJhdGUgZmFsbGJhY2tcbiAgICBjb25zdCBmYWxsYmFja1N2ZyA9IGdldEZhbGxiYWNrQ2hhcnRTVkcoKVxuICAgIC8vIFN0b3JlIGluIHNlc3Npb25TdG9yYWdlXG4gICAgc2FmZVNldFNlc3Npb25JdGVtKFwiZmFsbGJhY2tOYXRhbENoYXJ0U1ZHXCIsIGZhbGxiYWNrU3ZnKTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2FuaXRpemUgU1ZHIGNvbnRlbnRcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVN2ZyhzdmdDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIFNlcnZlci1zaWRlIC0gcmV0dXJuIGFzIGlzXG4gICAgcmV0dXJuIHN2Z0NvbnRlbnRcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpXG4gICAgY29uc3Qgc3ZnRG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhzdmdDb250ZW50LCBcImltYWdlL3N2Zyt4bWxcIilcbiAgICBjb25zdCBzdmdFbGVtZW50ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudFxuXG4gICAgLy8gRml4IGludmFsaWQgYXR0cmlidXRlcyAtIHNwZWNpZmljYWxseSB0aGUgXCJoaWRkZW5cIiBhdHRyaWJ1dGVcbiAgICBjb25zdCBlbGVtZW50c1dpdGhIaWRkZW4gPSBzdmdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaGlkZGVuXVwiKVxuICAgIGVsZW1lbnRzV2l0aEhpZGRlbi5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgY29uc3QgaGlkZGVuVmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoXCJoaWRkZW5cIilcbiAgICAgIGlmIChoaWRkZW5WYWx1ZSA9PT0gXCJcIiB8fCBoaWRkZW5WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBTZXQgYSB2YWxpZCB2YWx1ZSBmb3IgdGhlIGhpZGRlbiBhdHRyaWJ1dGVcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiaGlkZGVuXCIsIFwidHJ1ZVwiKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gc3ZnRWxlbWVudC5vdXRlckhUTUxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2FuaXRpemluZyBTVkc6XCIsIGVycm9yKVxuICAgIHJldHVybiBzdmdDb250ZW50XG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbInNhZmVTZXRTZXNzaW9uSXRlbSIsImdldEZhbGxiYWNrQ2hhcnRTVkciLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJtYXAiLCJfIiwiaSIsImFuZ2xlIiwiTWF0aCIsIlBJIiwieDEiLCJjb3MiLCJ5MSIsInNpbiIsIngyIiwieTIiLCJqb2luIiwic3ltYm9sIiwibmFtZSIsInNpZ24iLCJ4IiwieSIsInRyaW0iLCJnZXRGYWxsYmFja05hdGFsQ2hhcnQiLCJsb2FkRmFsbGJhY2tOYXRhbENoYXJ0IiwicHJlbG9hZEZhbGxiYWNrTmF0YWxDaGFydCIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzdmdUZXh0IiwidGV4dCIsInNhbml0aXplZFN2ZyIsInNhbml0aXplU3ZnIiwiRXJyb3IiLCJlcnJvciIsImZhbGxiYWNrU3ZnIiwic3ZnQ29udGVudCIsInBhcnNlciIsIkRPTVBhcnNlciIsInN2Z0RvYyIsInBhcnNlRnJvbVN0cmluZyIsInN2Z0VsZW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJlbGVtZW50c1dpdGhIaWRkZW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsIiwiaGlkZGVuVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJvdXRlckhUTUwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./utils/fallback-chart.ts\n");

/***/ })

};
;