"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_services_astrology-service_ts";
exports.ids = ["_ssr_services_astrology-service_ts"];
exports.modules = {

/***/ "(ssr)/./services/astrology-api-service.ts":
/*!*******************************************!*\
  !*** ./services/astrology-api-service.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAuthErrors: () => (/* binding */ clearAuthErrors),\n/* harmony export */   fetchNatalChart: () => (/* binding */ fetchNatalChart),\n/* harmony export */   fetchNatalWheelChart: () => (/* binding */ fetchNatalWheelChart),\n/* harmony export */   fetchNatalWheelChartSVG: () => (/* binding */ fetchNatalWheelChartSVG),\n/* harmony export */   geocodeLocation: () => (/* binding */ geocodeLocation),\n/* harmony export */   getDailyHoroscope: () => (/* binding */ getDailyHoroscope),\n/* harmony export */   getNatalChartInterpretation: () => (/* binding */ getNatalChartInterpretation),\n/* harmony export */   getNatalChartInterpretationFromAPI: () => (/* binding */ getNatalChartInterpretationFromAPI)\n/* harmony export */ });\n/* harmony import */ var _utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/fallback-chart */ \"(ssr)/./utils/fallback-chart.ts\");\n/* harmony import */ var _utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/safe-storage */ \"(ssr)/./utils/safe-storage.ts\");\n/**\n * AstrologyAPI Service\n * Handles all interactions with the astrologyapi.com API\n */ \n\n// API configuration - using the provided credentials\nconst USER_ID = process.env.USER_ID || \"640668\";\nconst API_KEY = process.env.API_KEY || \"f54e96a1b5d0607f65433e754ae9a4f94fa5a9f8\";\nconst ASTROLOGY_API_BASE_URL = \"https://json.astrologyapi.com/v1\";\n// Check if API credentials are properly configured\nconst hasValidCredentials = ()=>{\n    const hasCredentials = USER_ID && API_KEY && USER_ID.length > 0 && API_KEY.length > 0;\n    console.log(\"Debug - Has Valid Credentials:\", hasCredentials);\n    console.log(\"Debug - User ID Length:\", USER_ID.length);\n    console.log(\"Debug - API Key Length:\", API_KEY.length);\n    return hasCredentials;\n};\n// Store authentication error status in session storage to avoid repeated failed attempts\nconst setAuthError = (hasError)=>{\n    (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeSetSessionItem)(\"astrology_api_auth_error\", hasError ? \"true\" : \"false\");\n    console.log(\"Debug - Set Auth Error:\", hasError);\n};\n// Check if we've already encountered an authentication error\nconst hasAuthError = ()=>{\n    const hasError = (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeGetSessionItem)(\"astrology_api_auth_error\") === \"true\";\n    console.log(\"Debug - Has Auth Error:\", hasError);\n    return hasError;\n};\n// Clear any stored authentication errors\nconst clearAuthErrors = ()=>{\n    (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeRemoveSessionItem)(\"astrology_api_auth_error\");\n    console.log(\"Debug - Cleared Auth Errors\");\n};\n/**\n * Creates Basic Auth headers for API requests\n * Implements the same approach as the successful Python example\n */ const getAuthHeaders = ()=>{\n    try {\n        // Create the auth string in the format \"userId:apiKey\"\n        const authString = `${USER_ID}:${API_KEY}`;\n        console.log(\"Debug - Auth String Format:\", `${USER_ID}:API_KEY`);\n        // Encode to base64 - similar to Python's HTTPBasicAuth\n        let base64Auth = \"\";\n        if (false) {} else if (typeof Buffer !== \"undefined\") {\n            base64Auth = Buffer.from(authString).toString(\"base64\");\n            console.log(\"Debug - Using Buffer for encoding\");\n        } else {\n            console.error(\"Debug - No method available for base64 encoding\");\n            throw new Error(\"Base64 encoding not available\");\n        }\n        console.log(\"Debug - Base64 Auth (first 10 chars):\", base64Auth.substring(0, 10) + \"...\");\n        // Return headers with Basic Auth\n        return {\n            Authorization: `Basic ${base64Auth}`,\n            \"Content-Type\": \"application/json\"\n        };\n    } catch (error) {\n        console.error(\"Error creating auth headers:\", error);\n        return {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"\"\n        };\n    }\n};\n/**\n * Fetches natal chart data from AstrologyAPI\n */ async function fetchNatalChart(birthDate, birthTime, latitude, longitude, timezone = 5.5) {\n    try {\n        // Check for previous auth errors to avoid repeated failed API calls\n        if (hasAuthError()) {\n            console.warn(\"Skipping API call due to previous authentication error\");\n            throw new Error(\"API authentication error - using fallback data\");\n        }\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        // Format date and time for API\n        const [year, month, day] = birthDate.split(\"-\").map(Number);\n        const [hour, minute] = birthTime.split(\":\").map(Number);\n        // Prepare the request body\n        const requestBody = {\n            day,\n            month,\n            year,\n            hour,\n            min: minute,\n            lat: latitude,\n            lon: longitude,\n            tzone: timezone\n        };\n        console.log(\"Fetching natal chart with params:\", requestBody);\n        console.log(\"Using auth headers:\", getAuthHeaders());\n        // Make the API request for planets\n        const planetsResponse = await fetch(`${ASTROLOGY_API_BASE_URL}/planets`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        // Parse the response even if status is not OK to check for auth errors\n        const planetsData = await planetsResponse.json();\n        // Check for authentication error in response\n        if (planetsData.status === false && planetsData.msg) {\n            console.error(\"API error:\", planetsData.msg);\n            // Check if it's an authentication error\n            if (planetsData.msg.includes(\"invalid\") || planetsData.msg.includes(\"User ID\")) {\n                setAuthError(true);\n            }\n            throw new Error(planetsData.msg);\n        }\n        if (!planetsResponse.ok) {\n            throw new Error(`Planets API error: ${planetsResponse.status} ${planetsResponse.statusText}`);\n        }\n        // Fetch houses data\n        const housesResponse = await fetch(`${ASTROLOGY_API_BASE_URL}/houses`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        const housesData = await housesResponse.json();\n        if (housesData.status === false && housesData.msg) {\n            throw new Error(housesData.msg);\n        }\n        if (!housesResponse.ok) {\n            throw new Error(`Houses API error: ${housesResponse.status} ${housesResponse.statusText}`);\n        }\n        // Fetch aspects data\n        const aspectsResponse = await fetch(`${ASTROLOGY_API_BASE_URL}/aspects`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        let aspectsData = [];\n        if (aspectsResponse.ok) {\n            aspectsData = await aspectsResponse.json();\n        }\n        // Format the data into our application's structure\n        return formatNatalChartResponse(planetsData, housesData, aspectsData, {\n            date: birthDate,\n            time: birthTime,\n            location: {\n                latitude,\n                longitude,\n                name: \"\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error fetching natal chart:\", error);\n        throw error;\n    }\n}\n/**\n * Fetches natal wheel chart from AstrologyAPI\n * Updated to handle the new response format that returns a chart URL\n */ async function fetchNatalWheelChart(birthDate, birthTime, latitude, longitude, timezone = 5.5, sign_icon_color = \"WHITE\", sign_background = [\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\"\n]) {\n    try {\n        console.log(\"Debug - fetchNatalWheelChart called with:\", {\n            birthDate,\n            birthTime,\n            latitude,\n            longitude,\n            timezone\n        });\n        // Check for previous auth errors to avoid repeated failed API calls\n        if (hasAuthError()) {\n            console.warn(\"Skipping API call due to previous authentication error\");\n            // Use the general fallback SVG for other charts\n            return {\n                chartUrl: \"\",\n                svgContent: (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)()\n            };\n        }\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            console.warn(\"Missing API credentials for AstrologyAPI\");\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        // Format date and time for API\n        const [year, month, day] = birthDate.split(\"-\").map(Number);\n        const [hour, minute] = birthTime.split(\":\").map(Number);\n        // Prepare the request body\n        const requestBody = {\n            day,\n            month,\n            year,\n            hour,\n            min: minute,\n            lat: latitude,\n            lon: longitude,\n            tzone: timezone,\n            planet_icon_color: \"Black\",\n            sign_icon_color: \"Black\",\n            sign_background: [\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\"\n            ],\n            inner_circle_background: \"#F4FAFC\",\n            outer_circle_background: \"#F4FAFC\",\n            chart_size: 1000,\n            image_type: \"svg\"\n        };\n        console.log(\"Debug - Request Body:\", requestBody);\n        // Get auth headers\n        const headers = getAuthHeaders();\n        console.log(\"Debug - Headers:\", {\n            Authorization: headers.Authorization ? \"Basic ***\" : \"Missing\",\n            \"Content-Type\": headers[\"Content-Type\"]\n        });\n        // Make the API request\n        console.log(\"Debug - Fetching from URL:\", `${ASTROLOGY_API_BASE_URL}/natal_wheel_chart`);\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/natal_wheel_chart`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify(requestBody)\n        });\n        // Log the response status for debugging\n        console.log(`Debug - API Response Status: ${response.status} ${response.statusText}`);\n        // Get the raw response text first for debugging\n        const rawResponseText = await response.text();\n        console.log(\"Debug - Raw Response (first 200 chars):\", rawResponseText.substring(0, 200));\n        // Try to parse the response as JSON\n        let data;\n        try {\n            data = JSON.parse(rawResponseText);\n            console.log(\"Debug - Response Keys:\", Object.keys(data));\n        } catch (e) {\n            console.error(\"Debug - Failed to parse response as JSON:\", e);\n            throw new Error(`Failed to parse API response as JSON: ${rawResponseText.substring(0, 100)}...`);\n        }\n        // Check for error in response\n        if (data.status === false && data.msg) {\n            console.error(\"API error:\", data.msg);\n            // Check if it's an authentication error\n            if (data.msg.includes(\"invalid\") || data.msg.includes(\"User ID\")) {\n                setAuthError(true);\n            }\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Natal wheel chart API error: ${response.status} ${response.statusText}`);\n        }\n        // Check if we have the chart_url in the response\n        if (data.chart_url) {\n            console.log(\"Debug - Successfully retrieved chart URL:\", data.chart_url);\n            // Clear any stored auth errors since the request succeeded\n            clearAuthErrors();\n            return {\n                chartUrl: data.chart_url\n            };\n        } else if (data.svg) {\n            console.log(\"Debug - Retrieved SVG content instead of URL, length:\", data.svg.length);\n            // Clear any stored auth errors since the request succeeded\n            clearAuthErrors();\n            return {\n                chartUrl: \"\",\n                svgContent: data.svg\n            };\n        } else {\n            console.error(\"API response missing chart_url and svg data:\", data);\n            throw new Error(\"No chart data returned from the API\");\n        }\n    } catch (error) {\n        console.error(\"Error fetching natal wheel chart:\", error);\n        // Use the general fallback SVG for other charts\n        return {\n            chartUrl: \"\",\n            svgContent: (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)()\n        };\n    }\n}\n// Keep the old function for backward compatibility\nasync function fetchNatalWheelChartSVG(birthDate, birthTime, latitude, longitude, timezone = 5.5) {\n    try {\n        const result = await fetchNatalWheelChart(birthDate, birthTime, latitude, longitude, timezone);\n        // If we have SVG content, return it\n        if (result.svgContent) {\n            return result.svgContent;\n        }\n        // If we have a chart URL, fetch the SVG content\n        if (result.chartUrl) {\n            console.log(\"Debug - Fetching SVG content from URL:\", result.chartUrl);\n            try {\n                const svgResponse = await fetch(result.chartUrl);\n                if (!svgResponse.ok) {\n                    throw new Error(`Failed to fetch SVG from URL: ${svgResponse.status} ${svgResponse.statusText}`);\n                }\n                const svgContent = await svgResponse.text();\n                console.log(\"Debug - Successfully fetched SVG content, length:\", svgContent.length);\n                return svgContent;\n            } catch (error) {\n                console.error(\"Error fetching SVG from URL:\", error);\n                // Return fallback SVG if we can't fetch from URL\n                return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n            }\n        }\n        // Return fallback SVG if no chart data available\n        return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n    } catch (error) {\n        console.error(\"Error in fetchNatalWheelChartSVG:\", error);\n        // Return fallback SVG for other charts\n        return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n    }\n}\n/**\n * Geocodes a location string to get latitude and longitude using AstrologyAPI\n */ async function geocodeLocation(location) {\n    try {\n        console.log(\"Geocoding location:\", location);\n        if (!hasValidCredentials()) {\n            console.warn(\"Missing API credentials for AstrologyAPI\");\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        const headers = getAuthHeaders();\n        console.log(\"Using auth headers:\", headers);\n        // Use GET, not POST\n        const url = `${ASTROLOGY_API_BASE_URL}/geo_details?place=${encodeURIComponent(location)}`;\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers\n        });\n        if (!response.ok) {\n            console.error(\"Geocoding API error:\", response.status);\n            throw new Error(`Geocoding API error: ${response.status}`);\n        }\n        const data = await response.json();\n        if (!data || !data.latitude || !data.longitude) {\n            console.error(\"Invalid geocoding response:\", data);\n            throw new Error(\"Invalid geocoding response\");\n        }\n        return {\n            latitude: data.latitude,\n            longitude: data.longitude,\n            name: data.name || location\n        };\n    } catch (error) {\n        console.error(\"Error geocoding location:\", error);\n        // Fallback: Las Vegas\n        return {\n            latitude: 36.1699,\n            longitude: -115.1398,\n            name: location\n        };\n    }\n}\n/**\n * Formats the API response into our application's data structure\n */ function formatNatalChartResponse(planetsData, housesData, aspectsData, birthDetails) {\n    // Extract and format planet positions\n    const validCelestialBodies = [\n        \"sun\",\n        \"moon\",\n        \"mercury\",\n        \"venus\",\n        \"mars\",\n        \"jupiter\",\n        \"saturn\",\n        \"uranus\",\n        \"neptune\",\n        \"pluto\",\n        \"chiron\",\n        \"north_node\",\n        \"south_node\"\n    ];\n    const planets = planetsData.map((planet)=>{\n        const planetName = convertPlanetName(planet.name);\n        if (!validCelestialBodies.includes(planetName)) return null;\n        return {\n            name: planetName,\n            sign: planet.sign.toLowerCase(),\n            degree: planet.norm_degree,\n            house: planet.house,\n            retrograde: planet.is_retrograde === 1,\n            aspectsToOtherPlanets: []\n        };\n    }).filter(Boolean);\n    // Extract and format houses\n    const houses = Object.keys(housesData).map((key)=>{\n        const house = housesData[key];\n        return {\n            number: Number.parseInt(key.replace(\"house\", \"\")),\n            sign: house.sign.toLowerCase(),\n            degree: house.degree,\n            cusp: true\n        };\n    });\n    // Extract and format angles (Ascendant, Midheaven, etc.)\n    const angles = {\n        ascendant: {\n            sign: housesData.ascendant.sign.toLowerCase(),\n            degree: housesData.ascendant.degree\n        },\n        midheaven: {\n            sign: housesData.midheaven.sign.toLowerCase(),\n            degree: housesData.midheaven.degree\n        },\n        descendant: {\n            sign: getOppositeSign(housesData.ascendant.sign.toLowerCase()),\n            degree: (housesData.ascendant.degree + 180) % 360\n        },\n        imumCoeli: {\n            sign: getOppositeSign(housesData.midheaven.sign.toLowerCase()),\n            degree: (housesData.midheaven.degree + 180) % 360\n        }\n    };\n    // Format aspects data\n    const aspects = aspectsData.map((aspect)=>({\n            aspect: aspect.aspect.toLowerCase(),\n            planet1: convertPlanetName(aspect.planet1),\n            planet2: convertPlanetName(aspect.planet2),\n            orb: aspect.orb,\n            applying: aspect.applying === 1\n        }));\n    return {\n        planets,\n        houses,\n        angles,\n        aspects,\n        birthDetails\n    };\n}\n/**\n * Converts AstrologyAPI planet names to our application's format\n */ function convertPlanetName(apiPlanetName) {\n    const planetMap = {\n        Sun: \"sun\",\n        Moon: \"moon\",\n        Mercury: \"mercury\",\n        Venus: \"venus\",\n        Mars: \"mars\",\n        Jupiter: \"jupiter\",\n        Saturn: \"saturn\",\n        Uranus: \"uranus\",\n        Neptune: \"neptune\",\n        Pluto: \"pluto\",\n        Rahu: \"north_node\",\n        Ketu: \"south_node\"\n    };\n    return planetMap[apiPlanetName] || apiPlanetName.toLowerCase();\n}\n/**\n * Gets the opposite zodiac sign\n */ function getOppositeSign(sign) {\n    const zodiacSigns = [\n        \"aries\",\n        \"taurus\",\n        \"gemini\",\n        \"cancer\",\n        \"leo\",\n        \"virgo\",\n        \"libra\",\n        \"scorpio\",\n        \"sagittarius\",\n        \"capricorn\",\n        \"aquarius\",\n        \"pisces\"\n    ];\n    const index = zodiacSigns.indexOf(sign);\n    if (index === -1) return \"aries\" // Default fallback\n    ;\n    const oppositeIndex = (index + 6) % 12;\n    return zodiacSigns[oppositeIndex];\n}\n/**\n * Gets interpretations for a natal chart\n */ async function getNatalChartInterpretation(natalChart) {\n    try {\n        // This would be implemented to fetch interpretations from AstrologyAPI\n        // For now, we'll return a placeholder interpretation\n        return {\n            overview: {\n                title: \"Your Cosmic Blueprint\",\n                description: \"Your natal chart reveals your unique cosmic blueprint, showing the positions of the planets at the moment of your birth. This celestial snapshot offers insights into your personality, strengths, challenges, and life path.\"\n            },\n            sunSign: {\n                title: \"Sun Sign\",\n                description: \"Your Sun sign represents your core essence and life purpose.\",\n                keywords: [\n                    \"identity\",\n                    \"purpose\",\n                    \"vitality\"\n                ]\n            },\n            moonSign: {\n                title: \"Moon Sign\",\n                description: \"Your Moon sign reflects your emotional nature and subconscious patterns.\",\n                keywords: [\n                    \"emotions\",\n                    \"instincts\",\n                    \"comfort\"\n                ]\n            },\n            ascendantSign: {\n                title: \"Ascendant\",\n                description: \"Your Ascendant represents how you present yourself to the world.\",\n                keywords: [\n                    \"appearance\",\n                    \"first impressions\",\n                    \"personal style\"\n                ]\n            },\n            planetPositions: {\n                sun: {\n                    description: \"Your Sun placement indicates your core identity and purpose in life.\",\n                    keywords: [\n                        \"identity\",\n                        \"purpose\",\n                        \"vitality\"\n                    ]\n                },\n                moon: {\n                    description: \"Your Moon placement reveals your emotional nature and subconscious patterns.\",\n                    keywords: [\n                        \"emotions\",\n                        \"instincts\",\n                        \"comfort\"\n                    ]\n                },\n                mercury: {\n                    description: \"Your Mercury placement shows how you think and communicate.\",\n                    keywords: [\n                        \"communication\",\n                        \"thinking\",\n                        \"learning\"\n                    ]\n                },\n                venus: {\n                    description: \"Your Venus placement indicates how you express and receive love and beauty.\",\n                    keywords: [\n                        \"love\",\n                        \"beauty\",\n                        \"values\"\n                    ]\n                },\n                mars: {\n                    description: \"Your Mars placement shows how you assert yourself and take action.\",\n                    keywords: [\n                        \"action\",\n                        \"desire\",\n                        \"energy\"\n                    ]\n                },\n                jupiter: {\n                    description: \"Your Jupiter placement reveals where you find growth and expansion.\",\n                    keywords: [\n                        \"growth\",\n                        \"luck\",\n                        \"abundance\"\n                    ]\n                },\n                saturn: {\n                    description: \"Your Saturn placement indicates where you face challenges and learn discipline.\",\n                    keywords: [\n                        \"discipline\",\n                        \"responsibility\",\n                        \"structure\"\n                    ]\n                },\n                uranus: {\n                    description: \"Your Uranus placement shows where you seek freedom and innovation.\",\n                    keywords: [\n                        \"innovation\",\n                        \"rebellion\",\n                        \"change\"\n                    ]\n                },\n                neptune: {\n                    description: \"Your Neptune placement reveals your spiritual and creative aspirations.\",\n                    keywords: [\n                        \"spirituality\",\n                        \"dreams\",\n                        \"illusion\"\n                    ]\n                },\n                pluto: {\n                    description: \"Your Pluto placement indicates where you experience transformation and power.\",\n                    keywords: [\n                        \"transformation\",\n                        \"power\",\n                        \"rebirth\"\n                    ]\n                }\n            },\n            houses: {\n                1: {\n                    description: \"The 1st house represents your self-image and how you present yourself to the world.\"\n                },\n                2: {\n                    description: \"The 2nd house represents your values, possessions, and resources.\"\n                },\n                3: {\n                    description: \"The 3rd house represents communication, learning, and your immediate environment.\"\n                },\n                4: {\n                    description: \"The 4th house represents your home, family, and emotional foundations.\"\n                },\n                5: {\n                    description: \"The 5th house represents creativity, pleasure, and self-expression.\"\n                },\n                6: {\n                    description: \"The 6th house represents work, health, and daily routines.\"\n                },\n                7: {\n                    description: \"The 7th house represents partnerships, relationships, and open enemies.\"\n                },\n                8: {\n                    description: \"The 8th house represents transformation, shared resources, and the occult.\"\n                },\n                9: {\n                    description: \"The 9th house represents higher education, philosophy, and long-distance travel.\"\n                },\n                10: {\n                    description: \"The 10th house represents career, public image, and authority.\"\n                },\n                11: {\n                    description: \"The 11th house represents friendships, groups, and aspirations.\"\n                },\n                12: {\n                    description: \"The 12th house represents the unconscious, spirituality, and hidden enemies.\"\n                }\n            }\n        };\n    } catch (error) {\n        console.error(\"Error getting chart interpretation:\", error);\n        throw error;\n    }\n}\n/**\n * Gets a daily horoscope for a zodiac sign\n */ async function getDailyHoroscope(sign) {\n    try {\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            throw new Error(\"API credentials not configured\");\n        }\n        // Make the API request\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/horoscope_prediction/daily/${sign}`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify({})\n        });\n        const data = await response.json();\n        // Check for error in response\n        if (data.status === false && data.msg) {\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Horoscope error: ${response.status} ${response.statusText}`);\n        }\n        // Format the response to match our application's structure\n        return {\n            sign: sign,\n            date: new Date().toISOString().split(\"T\")[0],\n            prediction: data.prediction || \"Your horoscope for today is not available.\",\n            lucky_number: data.lucky_number || \"7\",\n            lucky_color: data.lucky_color || \"Blue\",\n            mood: data.mood || \"Reflective\",\n            compatibility: data.compatibility || \"Libra\"\n        };\n    } catch (error) {\n        console.error(\"Error getting daily horoscope:\", error);\n        throw error;\n    }\n}\nasync function getNatalChartInterpretationFromAPI(birthData) {\n    try {\n        if (!hasValidCredentials()) {\n            throw new Error(\"API credentials not configured\");\n        }\n        const headers = getAuthHeaders();\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/natal_chart_interpretation`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify(birthData)\n        });\n        const data = await response.json();\n        if (data.status === false && data.msg) {\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Interpretation API error: ${response.status} ${response.statusText}`);\n        }\n        return data;\n    } catch (error) {\n        console.error(\"Error fetching natal chart interpretation:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDVCxFQUFFLE9BQU81RCxPQUFPO1FBQ2RkLFFBQVFjLEtBQUssQ0FBQyw4Q0FBOENBO1FBQzVELE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcmtvbm92YWtvdnNraS9Eb2N1bWVudHMvVmlzdWFsIENvZGUvQXN0cm9Cb29rL0FzdHJvQm9vay9zZXJ2aWNlcy9hc3Ryb2xvZ3ktYXBpLXNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBc3Ryb2xvZ3lBUEkgU2VydmljZVxuICogSGFuZGxlcyBhbGwgaW50ZXJhY3Rpb25zIHdpdGggdGhlIGFzdHJvbG9neWFwaS5jb20gQVBJXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBOYXRhbENoYXJ0LCBQbGFuZXRQb3NpdGlvbiwgWm9kaWFjU2lnbiwgSG91c2UsIEFuZ2xlLCBDZWxlc3RpYWxCb2R5IH0gZnJvbSBcIkAvdHlwZXMvYXN0cm9sb2d5XCJcbmltcG9ydCB7IGdldEZhbGxiYWNrTmF0YWxDaGFydCB9IGZyb20gXCJAL3V0aWxzL2ZhbGxiYWNrLWNoYXJ0XCJcbmltcG9ydCB7IHNhZmVHZXRTZXNzaW9uSXRlbSwgc2FmZVNldFNlc3Npb25JdGVtLCBzYWZlUmVtb3ZlU2Vzc2lvbkl0ZW0gfSBmcm9tIFwiQC91dGlscy9zYWZlLXN0b3JhZ2VcIlxuXG4vLyBBUEkgY29uZmlndXJhdGlvbiAtIHVzaW5nIHRoZSBwcm92aWRlZCBjcmVkZW50aWFsc1xuY29uc3QgVVNFUl9JRCA9IHByb2Nlc3MuZW52LlVTRVJfSUQgfHwgXCI2NDA2NjhcIlxuY29uc3QgQVBJX0tFWSA9IHByb2Nlc3MuZW52LkFQSV9LRVkgfHwgXCJmNTRlOTZhMWI1ZDA2MDdmNjU0MzNlNzU0YWU5YTRmOTRmYTVhOWY4XCJcbmNvbnN0IEFTVFJPTE9HWV9BUElfQkFTRV9VUkwgPSBcImh0dHBzOi8vanNvbi5hc3Ryb2xvZ3lhcGkuY29tL3YxXCJcblxuLy8gQ2hlY2sgaWYgQVBJIGNyZWRlbnRpYWxzIGFyZSBwcm9wZXJseSBjb25maWd1cmVkXG5jb25zdCBoYXNWYWxpZENyZWRlbnRpYWxzID0gKCkgPT4ge1xuICBjb25zdCBoYXNDcmVkZW50aWFscyA9IFVTRVJfSUQgJiYgQVBJX0tFWSAmJiBVU0VSX0lELmxlbmd0aCA+IDAgJiYgQVBJX0tFWS5sZW5ndGggPiAwXG5cbiAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIEhhcyBWYWxpZCBDcmVkZW50aWFsczpcIiwgaGFzQ3JlZGVudGlhbHMpXG4gIGNvbnNvbGUubG9nKFwiRGVidWcgLSBVc2VyIElEIExlbmd0aDpcIiwgVVNFUl9JRC5sZW5ndGgpXG4gIGNvbnNvbGUubG9nKFwiRGVidWcgLSBBUEkgS2V5IExlbmd0aDpcIiwgQVBJX0tFWS5sZW5ndGgpXG5cbiAgcmV0dXJuIGhhc0NyZWRlbnRpYWxzXG59XG5cbi8vIFN0b3JlIGF1dGhlbnRpY2F0aW9uIGVycm9yIHN0YXR1cyBpbiBzZXNzaW9uIHN0b3JhZ2UgdG8gYXZvaWQgcmVwZWF0ZWQgZmFpbGVkIGF0dGVtcHRzXG5jb25zdCBzZXRBdXRoRXJyb3IgPSAoaGFzRXJyb3I6IGJvb2xlYW4pID0+IHtcbiAgc2FmZVNldFNlc3Npb25JdGVtKFwiYXN0cm9sb2d5X2FwaV9hdXRoX2Vycm9yXCIsIGhhc0Vycm9yID8gXCJ0cnVlXCIgOiBcImZhbHNlXCIpO1xuICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gU2V0IEF1dGggRXJyb3I6XCIsIGhhc0Vycm9yKTtcbn1cblxuLy8gQ2hlY2sgaWYgd2UndmUgYWxyZWFkeSBlbmNvdW50ZXJlZCBhbiBhdXRoZW50aWNhdGlvbiBlcnJvclxuY29uc3QgaGFzQXV0aEVycm9yID0gKCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBoYXNFcnJvciA9IHNhZmVHZXRTZXNzaW9uSXRlbShcImFzdHJvbG9neV9hcGlfYXV0aF9lcnJvclwiKSA9PT0gXCJ0cnVlXCI7XG4gIGNvbnNvbGUubG9nKFwiRGVidWcgLSBIYXMgQXV0aCBFcnJvcjpcIiwgaGFzRXJyb3IpO1xuICByZXR1cm4gaGFzRXJyb3I7XG59XG5cbi8vIENsZWFyIGFueSBzdG9yZWQgYXV0aGVudGljYXRpb24gZXJyb3JzXG5leHBvcnQgY29uc3QgY2xlYXJBdXRoRXJyb3JzID0gKCkgPT4ge1xuICBzYWZlUmVtb3ZlU2Vzc2lvbkl0ZW0oXCJhc3Ryb2xvZ3lfYXBpX2F1dGhfZXJyb3JcIik7XG4gIGNvbnNvbGUubG9nKFwiRGVidWcgLSBDbGVhcmVkIEF1dGggRXJyb3JzXCIpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgQmFzaWMgQXV0aCBoZWFkZXJzIGZvciBBUEkgcmVxdWVzdHNcbiAqIEltcGxlbWVudHMgdGhlIHNhbWUgYXBwcm9hY2ggYXMgdGhlIHN1Y2Nlc3NmdWwgUHl0aG9uIGV4YW1wbGVcbiAqL1xuY29uc3QgZ2V0QXV0aEhlYWRlcnMgPSAoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBhdXRoIHN0cmluZyBpbiB0aGUgZm9ybWF0IFwidXNlcklkOmFwaUtleVwiXG4gICAgY29uc3QgYXV0aFN0cmluZyA9IGAke1VTRVJfSUR9OiR7QVBJX0tFWX1gXG4gICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIEF1dGggU3RyaW5nIEZvcm1hdDpcIiwgYCR7VVNFUl9JRH06QVBJX0tFWWApXG5cbiAgICAvLyBFbmNvZGUgdG8gYmFzZTY0IC0gc2ltaWxhciB0byBQeXRob24ncyBIVFRQQmFzaWNBdXRoXG4gICAgbGV0IGJhc2U2NEF1dGggPSBcIlwiXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmJ0b2EpIHtcbiAgICAgIGJhc2U2NEF1dGggPSB3aW5kb3cuYnRvYShhdXRoU3RyaW5nKVxuICAgICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFVzaW5nIHdpbmRvdy5idG9hIGZvciBlbmNvZGluZ1wiKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgYmFzZTY0QXV0aCA9IEJ1ZmZlci5mcm9tKGF1dGhTdHJpbmcpLnRvU3RyaW5nKFwiYmFzZTY0XCIpXG4gICAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gVXNpbmcgQnVmZmVyIGZvciBlbmNvZGluZ1wiKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRGVidWcgLSBObyBtZXRob2QgYXZhaWxhYmxlIGZvciBiYXNlNjQgZW5jb2RpbmdcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhc2U2NCBlbmNvZGluZyBub3QgYXZhaWxhYmxlXCIpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIEJhc2U2NCBBdXRoIChmaXJzdCAxMCBjaGFycyk6XCIsIGJhc2U2NEF1dGguc3Vic3RyaW5nKDAsIDEwKSArIFwiLi4uXCIpXG5cbiAgICAvLyBSZXR1cm4gaGVhZGVycyB3aXRoIEJhc2ljIEF1dGhcbiAgICByZXR1cm4ge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7YmFzZTY0QXV0aH1gLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBhdXRoIGhlYWRlcnM6XCIsIGVycm9yKVxuICAgIHJldHVybiB7XG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIlwiLCAvLyBSZXR1cm4gZW1wdHkgc3RyaW5nIGluc3RlYWQgb2YgdW5kZWZpbmVkXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRmV0Y2hlcyBuYXRhbCBjaGFydCBkYXRhIGZyb20gQXN0cm9sb2d5QVBJXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE5hdGFsQ2hhcnQoXG4gIGJpcnRoRGF0ZTogc3RyaW5nLFxuICBiaXJ0aFRpbWU6IHN0cmluZyxcbiAgbGF0aXR1ZGU6IG51bWJlcixcbiAgbG9uZ2l0dWRlOiBudW1iZXIsXG4gIHRpbWV6b25lID0gNS41LCAvLyBEZWZhdWx0IHRvIElTVFxuKTogUHJvbWlzZTxOYXRhbENoYXJ0PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgZm9yIHByZXZpb3VzIGF1dGggZXJyb3JzIHRvIGF2b2lkIHJlcGVhdGVkIGZhaWxlZCBBUEkgY2FsbHNcbiAgICBpZiAoaGFzQXV0aEVycm9yKCkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlNraXBwaW5nIEFQSSBjYWxsIGR1ZSB0byBwcmV2aW91cyBhdXRoZW50aWNhdGlvbiBlcnJvclwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIGF1dGhlbnRpY2F0aW9uIGVycm9yIC0gdXNpbmcgZmFsbGJhY2sgZGF0YVwiKVxuICAgIH1cblxuICAgIC8vIENoZWNrIGNyZWRlbnRpYWxzIGZpcnN0XG4gICAgaWYgKCFoYXNWYWxpZENyZWRlbnRpYWxzKCkpIHtcbiAgICAgIHNldEF1dGhFcnJvcih0cnVlKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkXCIpXG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IGRhdGUgYW5kIHRpbWUgZm9yIEFQSVxuICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGJpcnRoRGF0ZS5zcGxpdChcIi1cIikubWFwKE51bWJlcilcbiAgICBjb25zdCBbaG91ciwgbWludXRlXSA9IGJpcnRoVGltZS5zcGxpdChcIjpcIikubWFwKE51bWJlcilcblxuICAgIC8vIFByZXBhcmUgdGhlIHJlcXVlc3QgYm9keVxuICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgZGF5LFxuICAgICAgbW9udGgsXG4gICAgICB5ZWFyLFxuICAgICAgaG91cixcbiAgICAgIG1pbjogbWludXRlLFxuICAgICAgbGF0OiBsYXRpdHVkZSxcbiAgICAgIGxvbjogbG9uZ2l0dWRlLFxuICAgICAgdHpvbmU6IHRpbWV6b25lLFxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiRmV0Y2hpbmcgbmF0YWwgY2hhcnQgd2l0aCBwYXJhbXM6XCIsIHJlcXVlc3RCb2R5KVxuICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgYXV0aCBoZWFkZXJzOlwiLCBnZXRBdXRoSGVhZGVycygpKVxuXG4gICAgLy8gTWFrZSB0aGUgQVBJIHJlcXVlc3QgZm9yIHBsYW5ldHNcbiAgICBjb25zdCBwbGFuZXRzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9wbGFuZXRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IGdldEF1dGhIZWFkZXJzKCksXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSlcblxuICAgIC8vIFBhcnNlIHRoZSByZXNwb25zZSBldmVuIGlmIHN0YXR1cyBpcyBub3QgT0sgdG8gY2hlY2sgZm9yIGF1dGggZXJyb3JzXG4gICAgY29uc3QgcGxhbmV0c0RhdGEgPSBhd2FpdCBwbGFuZXRzUmVzcG9uc2UuanNvbigpXG5cbiAgICAvLyBDaGVjayBmb3IgYXV0aGVudGljYXRpb24gZXJyb3IgaW4gcmVzcG9uc2VcbiAgICBpZiAocGxhbmV0c0RhdGEuc3RhdHVzID09PSBmYWxzZSAmJiBwbGFuZXRzRGF0YS5tc2cpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBUEkgZXJyb3I6XCIsIHBsYW5ldHNEYXRhLm1zZylcblxuICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhbiBhdXRoZW50aWNhdGlvbiBlcnJvclxuICAgICAgaWYgKHBsYW5ldHNEYXRhLm1zZy5pbmNsdWRlcyhcImludmFsaWRcIikgfHwgcGxhbmV0c0RhdGEubXNnLmluY2x1ZGVzKFwiVXNlciBJRFwiKSkge1xuICAgICAgICBzZXRBdXRoRXJyb3IodHJ1ZSlcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKHBsYW5ldHNEYXRhLm1zZylcbiAgICB9XG5cbiAgICBpZiAoIXBsYW5ldHNSZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBQbGFuZXRzIEFQSSBlcnJvcjogJHtwbGFuZXRzUmVzcG9uc2Uuc3RhdHVzfSAke3BsYW5ldHNSZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggaG91c2VzIGRhdGFcbiAgICBjb25zdCBob3VzZXNSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FTVFJPTE9HWV9BUElfQkFTRV9VUkx9L2hvdXNlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiBnZXRBdXRoSGVhZGVycygpLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgIH0pXG5cbiAgICBjb25zdCBob3VzZXNEYXRhID0gYXdhaXQgaG91c2VzUmVzcG9uc2UuanNvbigpXG5cbiAgICBpZiAoaG91c2VzRGF0YS5zdGF0dXMgPT09IGZhbHNlICYmIGhvdXNlc0RhdGEubXNnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoaG91c2VzRGF0YS5tc2cpXG4gICAgfVxuXG4gICAgaWYgKCFob3VzZXNSZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBIb3VzZXMgQVBJIGVycm9yOiAke2hvdXNlc1Jlc3BvbnNlLnN0YXR1c30gJHtob3VzZXNSZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgfVxuXG4gICAgLy8gRmV0Y2ggYXNwZWN0cyBkYXRhXG4gICAgY29uc3QgYXNwZWN0c1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vYXNwZWN0c2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiBnZXRBdXRoSGVhZGVycygpLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgIH0pXG5cbiAgICBsZXQgYXNwZWN0c0RhdGEgPSBbXVxuICAgIGlmIChhc3BlY3RzUmVzcG9uc2Uub2spIHtcbiAgICAgIGFzcGVjdHNEYXRhID0gYXdhaXQgYXNwZWN0c1Jlc3BvbnNlLmpzb24oKVxuICAgIH1cblxuICAgIC8vIEZvcm1hdCB0aGUgZGF0YSBpbnRvIG91ciBhcHBsaWNhdGlvbidzIHN0cnVjdHVyZVxuICAgIHJldHVybiBmb3JtYXROYXRhbENoYXJ0UmVzcG9uc2UocGxhbmV0c0RhdGEsIGhvdXNlc0RhdGEsIGFzcGVjdHNEYXRhLCB7XG4gICAgICBkYXRlOiBiaXJ0aERhdGUsXG4gICAgICB0aW1lOiBiaXJ0aFRpbWUsXG4gICAgICBsb2NhdGlvbjoge1xuICAgICAgICBsYXRpdHVkZSxcbiAgICAgICAgbG9uZ2l0dWRlLFxuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgfSxcbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBuYXRhbCBjaGFydDpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIEZldGNoZXMgbmF0YWwgd2hlZWwgY2hhcnQgZnJvbSBBc3Ryb2xvZ3lBUElcbiAqIFVwZGF0ZWQgdG8gaGFuZGxlIHRoZSBuZXcgcmVzcG9uc2UgZm9ybWF0IHRoYXQgcmV0dXJucyBhIGNoYXJ0IFVSTFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hOYXRhbFdoZWVsQ2hhcnQoXG4gIGJpcnRoRGF0ZTogc3RyaW5nLFxuICBiaXJ0aFRpbWU6IHN0cmluZyxcbiAgbGF0aXR1ZGU6IG51bWJlcixcbiAgbG9uZ2l0dWRlOiBudW1iZXIsXG4gIHRpbWV6b25lID0gNS41LCAvLyBEZWZhdWx0IHRvIElTVFxuICBzaWduX2ljb25fY29sb3I6IHN0cmluZyA9IFwiV0hJVEVcIixcbiAgc2lnbl9iYWNrZ3JvdW5kOiBzdHJpbmdbXSA9IFtcbiAgICBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiLFxuICAgIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCJcbiAgXVxuKTogUHJvbWlzZTx7IGNoYXJ0VXJsOiBzdHJpbmc7IHN2Z0NvbnRlbnQ/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiRGVidWcgLSBmZXRjaE5hdGFsV2hlZWxDaGFydCBjYWxsZWQgd2l0aDpcIiwgeyBiaXJ0aERhdGUsIGJpcnRoVGltZSwgbGF0aXR1ZGUsIGxvbmdpdHVkZSwgdGltZXpvbmUgfSlcblxuICAgIC8vIENoZWNrIGZvciBwcmV2aW91cyBhdXRoIGVycm9ycyB0byBhdm9pZCByZXBlYXRlZCBmYWlsZWQgQVBJIGNhbGxzXG4gICAgaWYgKGhhc0F1dGhFcnJvcigpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJTa2lwcGluZyBBUEkgY2FsbCBkdWUgdG8gcHJldmlvdXMgYXV0aGVudGljYXRpb24gZXJyb3JcIilcblxuICAgICAgLy8gVXNlIHRoZSBnZW5lcmFsIGZhbGxiYWNrIFNWRyBmb3Igb3RoZXIgY2hhcnRzXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjaGFydFVybDogXCJcIixcbiAgICAgICAgc3ZnQ29udGVudDogZ2V0RmFsbGJhY2tOYXRhbENoYXJ0KCksXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgY3JlZGVudGlhbHMgZmlyc3RcbiAgICBpZiAoIWhhc1ZhbGlkQ3JlZGVudGlhbHMoKSkge1xuICAgICAgY29uc29sZS53YXJuKFwiTWlzc2luZyBBUEkgY3JlZGVudGlhbHMgZm9yIEFzdHJvbG9neUFQSVwiKVxuICAgICAgc2V0QXV0aEVycm9yKHRydWUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWRcIilcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgZGF0ZSBhbmQgdGltZSBmb3IgQVBJXG4gICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gYmlydGhEYXRlLnNwbGl0KFwiLVwiKS5tYXAoTnVtYmVyKVxuICAgIGNvbnN0IFtob3VyLCBtaW51dGVdID0gYmlydGhUaW1lLnNwbGl0KFwiOlwiKS5tYXAoTnVtYmVyKVxuXG4gICAgLy8gUHJlcGFyZSB0aGUgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICBkYXksXG4gICAgICBtb250aCxcbiAgICAgIHllYXIsXG4gICAgICBob3VyLFxuICAgICAgbWluOiBtaW51dGUsXG4gICAgICBsYXQ6IGxhdGl0dWRlLFxuICAgICAgbG9uOiBsb25naXR1ZGUsXG4gICAgICB0em9uZTogdGltZXpvbmUsXG4gICAgICBwbGFuZXRfaWNvbl9jb2xvcjogXCJCbGFja1wiLFxuICAgICAgc2lnbl9pY29uX2NvbG9yOiBcIkJsYWNrXCIsXG4gICAgICBzaWduX2JhY2tncm91bmQ6IFtcbiAgICAgICAgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIixcbiAgICAgICAgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIlxuICAgICAgXSxcbiAgICAgIGlubmVyX2NpcmNsZV9iYWNrZ3JvdW5kOiBcIiNGNEZBRkNcIixcbiAgICAgIG91dGVyX2NpcmNsZV9iYWNrZ3JvdW5kOiBcIiNGNEZBRkNcIixcbiAgICAgIGNoYXJ0X3NpemU6IDEwMDAsXG4gICAgICBpbWFnZV90eXBlOiBcInN2Z1wiXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFJlcXVlc3QgQm9keTpcIiwgcmVxdWVzdEJvZHkpXG5cbiAgICAvLyBHZXQgYXV0aCBoZWFkZXJzXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEF1dGhIZWFkZXJzKClcbiAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gSGVhZGVyczpcIiwge1xuICAgICAgQXV0aG9yaXphdGlvbjogaGVhZGVycy5BdXRob3JpemF0aW9uID8gXCJCYXNpYyAqKipcIiA6IFwiTWlzc2luZ1wiLFxuICAgICAgXCJDb250ZW50LVR5cGVcIjogaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSxcbiAgICB9KVxuXG4gICAgLy8gTWFrZSB0aGUgQVBJIHJlcXVlc3RcbiAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gRmV0Y2hpbmcgZnJvbSBVUkw6XCIsIGAke0FTVFJPTE9HWV9BUElfQkFTRV9VUkx9L25hdGFsX3doZWVsX2NoYXJ0YClcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vbmF0YWxfd2hlZWxfY2hhcnRgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICB9KVxuXG4gICAgLy8gTG9nIHRoZSByZXNwb25zZSBzdGF0dXMgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUubG9nKGBEZWJ1ZyAtIEFQSSBSZXNwb25zZSBTdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcblxuICAgIC8vIEdldCB0aGUgcmF3IHJlc3BvbnNlIHRleHQgZmlyc3QgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnN0IHJhd1Jlc3BvbnNlVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKVxuICAgIGNvbnNvbGUubG9nKFwiRGVidWcgLSBSYXcgUmVzcG9uc2UgKGZpcnN0IDIwMCBjaGFycyk6XCIsIHJhd1Jlc3BvbnNlVGV4dC5zdWJzdHJpbmcoMCwgMjAwKSlcblxuICAgIC8vIFRyeSB0byBwYXJzZSB0aGUgcmVzcG9uc2UgYXMgSlNPTlxuICAgIGxldCBkYXRhXG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHJhd1Jlc3BvbnNlVGV4dClcbiAgICAgIGNvbnNvbGUubG9nKFwiRGVidWcgLSBSZXNwb25zZSBLZXlzOlwiLCBPYmplY3Qua2V5cyhkYXRhKSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRGVidWcgLSBGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgYXMgSlNPTjpcIiwgZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIEFQSSByZXNwb25zZSBhcyBKU09OOiAke3Jhd1Jlc3BvbnNlVGV4dC5zdWJzdHJpbmcoMCwgMTAwKX0uLi5gKVxuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBlcnJvciBpbiByZXNwb25zZVxuICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gZmFsc2UgJiYgZGF0YS5tc2cpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBUEkgZXJyb3I6XCIsIGRhdGEubXNnKVxuXG4gICAgICAvLyBDaGVjayBpZiBpdCdzIGFuIGF1dGhlbnRpY2F0aW9uIGVycm9yXG4gICAgICBpZiAoZGF0YS5tc2cuaW5jbHVkZXMoXCJpbnZhbGlkXCIpIHx8IGRhdGEubXNnLmluY2x1ZGVzKFwiVXNlciBJRFwiKSkge1xuICAgICAgICBzZXRBdXRoRXJyb3IodHJ1ZSlcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubXNnKVxuICAgIH1cblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTmF0YWwgd2hlZWwgY2hhcnQgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSB0aGUgY2hhcnRfdXJsIGluIHRoZSByZXNwb25zZVxuICAgIGlmIChkYXRhLmNoYXJ0X3VybCkge1xuICAgICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFN1Y2Nlc3NmdWxseSByZXRyaWV2ZWQgY2hhcnQgVVJMOlwiLCBkYXRhLmNoYXJ0X3VybClcblxuICAgICAgLy8gQ2xlYXIgYW55IHN0b3JlZCBhdXRoIGVycm9ycyBzaW5jZSB0aGUgcmVxdWVzdCBzdWNjZWVkZWRcbiAgICAgIGNsZWFyQXV0aEVycm9ycygpXG5cbiAgICAgIHJldHVybiB7IGNoYXJ0VXJsOiBkYXRhLmNoYXJ0X3VybCB9XG4gICAgfVxuICAgIC8vIEZhbGxiYWNrIHRvIHRoZSBvbGQgZm9ybWF0IGlmIHN2ZyBwcm9wZXJ0eSBleGlzdHNcbiAgICBlbHNlIGlmIChkYXRhLnN2Zykge1xuICAgICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFJldHJpZXZlZCBTVkcgY29udGVudCBpbnN0ZWFkIG9mIFVSTCwgbGVuZ3RoOlwiLCBkYXRhLnN2Zy5sZW5ndGgpXG5cbiAgICAgIC8vIENsZWFyIGFueSBzdG9yZWQgYXV0aCBlcnJvcnMgc2luY2UgdGhlIHJlcXVlc3Qgc3VjY2VlZGVkXG4gICAgICBjbGVhckF1dGhFcnJvcnMoKVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjaGFydFVybDogXCJcIixcbiAgICAgICAgc3ZnQ29udGVudDogZGF0YS5zdmcsXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJBUEkgcmVzcG9uc2UgbWlzc2luZyBjaGFydF91cmwgYW5kIHN2ZyBkYXRhOlwiLCBkYXRhKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhcnQgZGF0YSByZXR1cm5lZCBmcm9tIHRoZSBBUElcIilcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIG5hdGFsIHdoZWVsIGNoYXJ0OlwiLCBlcnJvcilcblxuICAgIC8vIFVzZSB0aGUgZ2VuZXJhbCBmYWxsYmFjayBTVkcgZm9yIG90aGVyIGNoYXJ0c1xuICAgIHJldHVybiB7XG4gICAgICBjaGFydFVybDogXCJcIixcbiAgICAgIHN2Z0NvbnRlbnQ6IGdldEZhbGxiYWNrTmF0YWxDaGFydCgpLFxuICAgIH1cbiAgfVxufVxuXG4vLyBLZWVwIHRoZSBvbGQgZnVuY3Rpb24gZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE5hdGFsV2hlZWxDaGFydFNWRyhcbiAgYmlydGhEYXRlOiBzdHJpbmcsXG4gIGJpcnRoVGltZTogc3RyaW5nLFxuICBsYXRpdHVkZTogbnVtYmVyLFxuICBsb25naXR1ZGU6IG51bWJlcixcbiAgdGltZXpvbmUgPSA1LjUsIC8vIERlZmF1bHQgdG8gSVNUXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoTmF0YWxXaGVlbENoYXJ0KGJpcnRoRGF0ZSwgYmlydGhUaW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lem9uZSlcblxuICAgIC8vIElmIHdlIGhhdmUgU1ZHIGNvbnRlbnQsIHJldHVybiBpdFxuICAgIGlmIChyZXN1bHQuc3ZnQ29udGVudCkge1xuICAgICAgcmV0dXJuIHJlc3VsdC5zdmdDb250ZW50XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIGNoYXJ0IFVSTCwgZmV0Y2ggdGhlIFNWRyBjb250ZW50XG4gICAgaWYgKHJlc3VsdC5jaGFydFVybCkge1xuICAgICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIEZldGNoaW5nIFNWRyBjb250ZW50IGZyb20gVVJMOlwiLCByZXN1bHQuY2hhcnRVcmwpXG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN2Z1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVzdWx0LmNoYXJ0VXJsKVxuICAgICAgICBpZiAoIXN2Z1Jlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggU1ZHIGZyb20gVVJMOiAke3N2Z1Jlc3BvbnNlLnN0YXR1c30gJHtzdmdSZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdmdDb250ZW50ID0gYXdhaXQgc3ZnUmVzcG9uc2UudGV4dCgpXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRGVidWcgLSBTdWNjZXNzZnVsbHkgZmV0Y2hlZCBTVkcgY29udGVudCwgbGVuZ3RoOlwiLCBzdmdDb250ZW50Lmxlbmd0aClcblxuICAgICAgICByZXR1cm4gc3ZnQ29udGVudFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIFNWRyBmcm9tIFVSTDpcIiwgZXJyb3IpXG5cbiAgICAgICAgLy8gUmV0dXJuIGZhbGxiYWNrIFNWRyBpZiB3ZSBjYW4ndCBmZXRjaCBmcm9tIFVSTFxuICAgICAgICByZXR1cm4gZ2V0RmFsbGJhY2tOYXRhbENoYXJ0KClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gZmFsbGJhY2sgU1ZHIGlmIG5vIGNoYXJ0IGRhdGEgYXZhaWxhYmxlXG4gICAgcmV0dXJuIGdldEZhbGxiYWNrTmF0YWxDaGFydCgpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHOlwiLCBlcnJvcilcblxuICAgIC8vIFJldHVybiBmYWxsYmFjayBTVkcgZm9yIG90aGVyIGNoYXJ0c1xuICAgIHJldHVybiBnZXRGYWxsYmFja05hdGFsQ2hhcnQoKVxuICB9XG59XG5cbi8qKlxuICogR2VvY29kZXMgYSBsb2NhdGlvbiBzdHJpbmcgdG8gZ2V0IGxhdGl0dWRlIGFuZCBsb25naXR1ZGUgdXNpbmcgQXN0cm9sb2d5QVBJXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW9jb2RlTG9jYXRpb24obG9jYXRpb246IHN0cmluZyk6IFByb21pc2U8eyBsYXRpdHVkZTogbnVtYmVyOyBsb25naXR1ZGU6IG51bWJlcjsgbmFtZTogc3RyaW5nIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIkdlb2NvZGluZyBsb2NhdGlvbjpcIiwgbG9jYXRpb24pO1xuXG4gICAgaWYgKCFoYXNWYWxpZENyZWRlbnRpYWxzKCkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIk1pc3NpbmcgQVBJIGNyZWRlbnRpYWxzIGZvciBBc3Ryb2xvZ3lBUElcIik7XG4gICAgICBzZXRBdXRoRXJyb3IodHJ1ZSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgaGVhZGVycyA9IGdldEF1dGhIZWFkZXJzKCk7XG4gICAgY29uc29sZS5sb2coXCJVc2luZyBhdXRoIGhlYWRlcnM6XCIsIGhlYWRlcnMpO1xuXG4gICAgLy8gVXNlIEdFVCwgbm90IFBPU1RcbiAgICBjb25zdCB1cmwgPSBgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9nZW9fZGV0YWlscz9wbGFjZT0ke2VuY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbil9YDtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgaGVhZGVycyxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJHZW9jb2RpbmcgQVBJIGVycm9yOlwiLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBHZW9jb2RpbmcgQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgaWYgKCFkYXRhIHx8ICFkYXRhLmxhdGl0dWRlIHx8ICFkYXRhLmxvbmdpdHVkZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgZ2VvY29kaW5nIHJlc3BvbnNlOlwiLCBkYXRhKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZ2VvY29kaW5nIHJlc3BvbnNlXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBsYXRpdHVkZTogZGF0YS5sYXRpdHVkZSxcbiAgICAgIGxvbmdpdHVkZTogZGF0YS5sb25naXR1ZGUsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUgfHwgbG9jYXRpb24sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2VvY29kaW5nIGxvY2F0aW9uOlwiLCBlcnJvcik7XG4gICAgLy8gRmFsbGJhY2s6IExhcyBWZWdhc1xuICAgIHJldHVybiB7XG4gICAgICBsYXRpdHVkZTogMzYuMTY5OSxcbiAgICAgIGxvbmdpdHVkZTogLTExNS4xMzk4LFxuICAgICAgbmFtZTogbG9jYXRpb24sXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdHMgdGhlIEFQSSByZXNwb25zZSBpbnRvIG91ciBhcHBsaWNhdGlvbidzIGRhdGEgc3RydWN0dXJlXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdE5hdGFsQ2hhcnRSZXNwb25zZShcbiAgcGxhbmV0c0RhdGE6IGFueVtdLFxuICBob3VzZXNEYXRhOiBhbnksXG4gIGFzcGVjdHNEYXRhOiBhbnlbXSxcbiAgYmlydGhEZXRhaWxzOiBhbnksXG4pOiBOYXRhbENoYXJ0IHtcbiAgLy8gRXh0cmFjdCBhbmQgZm9ybWF0IHBsYW5ldCBwb3NpdGlvbnNcbiAgY29uc3QgdmFsaWRDZWxlc3RpYWxCb2RpZXMgPSBbXG4gICAgXCJzdW5cIiwgXCJtb29uXCIsIFwibWVyY3VyeVwiLCBcInZlbnVzXCIsIFwibWFyc1wiLCBcImp1cGl0ZXJcIiwgXCJzYXR1cm5cIiwgXCJ1cmFudXNcIiwgXCJuZXB0dW5lXCIsIFwicGx1dG9cIiwgXCJjaGlyb25cIiwgXCJub3J0aF9ub2RlXCIsIFwic291dGhfbm9kZVwiXG4gIF0gYXMgY29uc3Q7XG4gIGNvbnN0IHBsYW5ldHM6IFBsYW5ldFBvc2l0aW9uW10gPSBwbGFuZXRzRGF0YVxuICAgIC5tYXAoKHBsYW5ldCkgPT4ge1xuICAgICAgY29uc3QgcGxhbmV0TmFtZSA9IGNvbnZlcnRQbGFuZXROYW1lKHBsYW5ldC5uYW1lKVxuICAgICAgaWYgKCF2YWxpZENlbGVzdGlhbEJvZGllcy5pbmNsdWRlcyhwbGFuZXROYW1lIGFzIGFueSkpIHJldHVybiBudWxsXG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBwbGFuZXROYW1lIGFzIENlbGVzdGlhbEJvZHksXG4gICAgICAgIHNpZ246IHBsYW5ldC5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbixcbiAgICAgICAgZGVncmVlOiBwbGFuZXQubm9ybV9kZWdyZWUsXG4gICAgICAgIGhvdXNlOiBwbGFuZXQuaG91c2UsXG4gICAgICAgIHJldHJvZ3JhZGU6IHBsYW5ldC5pc19yZXRyb2dyYWRlID09PSAxLFxuICAgICAgICBhc3BlY3RzVG9PdGhlclBsYW5ldHM6IFtdLFxuICAgICAgfVxuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKSBhcyBQbGFuZXRQb3NpdGlvbltdXG5cbiAgLy8gRXh0cmFjdCBhbmQgZm9ybWF0IGhvdXNlc1xuICBjb25zdCBob3VzZXM6IEhvdXNlW10gPSBPYmplY3Qua2V5cyhob3VzZXNEYXRhKS5tYXAoKGtleSkgPT4ge1xuICAgIGNvbnN0IGhvdXNlID0gaG91c2VzRGF0YVtrZXldXG4gICAgcmV0dXJuIHtcbiAgICAgIG51bWJlcjogTnVtYmVyLnBhcnNlSW50KGtleS5yZXBsYWNlKFwiaG91c2VcIiwgXCJcIikpLFxuICAgICAgc2lnbjogaG91c2Uuc2lnbi50b0xvd2VyQ2FzZSgpIGFzIFpvZGlhY1NpZ24sXG4gICAgICBkZWdyZWU6IGhvdXNlLmRlZ3JlZSxcbiAgICAgIGN1c3A6IHRydWUsXG4gICAgfVxuICB9KVxuXG4gIC8vIEV4dHJhY3QgYW5kIGZvcm1hdCBhbmdsZXMgKEFzY2VuZGFudCwgTWlkaGVhdmVuLCBldGMuKVxuICBjb25zdCBhbmdsZXMgPSB7XG4gICAgYXNjZW5kYW50OiB7XG4gICAgICBzaWduOiBob3VzZXNEYXRhLmFzY2VuZGFudC5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbixcbiAgICAgIGRlZ3JlZTogaG91c2VzRGF0YS5hc2NlbmRhbnQuZGVncmVlLFxuICAgIH0sXG4gICAgbWlkaGVhdmVuOiB7XG4gICAgICBzaWduOiBob3VzZXNEYXRhLm1pZGhlYXZlbi5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbixcbiAgICAgIGRlZ3JlZTogaG91c2VzRGF0YS5taWRoZWF2ZW4uZGVncmVlLFxuICAgIH0sXG4gICAgZGVzY2VuZGFudDoge1xuICAgICAgc2lnbjogZ2V0T3Bwb3NpdGVTaWduKGhvdXNlc0RhdGEuYXNjZW5kYW50LnNpZ24udG9Mb3dlckNhc2UoKSBhcyBab2RpYWNTaWduKSxcbiAgICAgIGRlZ3JlZTogKGhvdXNlc0RhdGEuYXNjZW5kYW50LmRlZ3JlZSArIDE4MCkgJSAzNjAsXG4gICAgfSxcbiAgICBpbXVtQ29lbGk6IHtcbiAgICAgIHNpZ246IGdldE9wcG9zaXRlU2lnbihob3VzZXNEYXRhLm1pZGhlYXZlbi5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbiksXG4gICAgICBkZWdyZWU6IChob3VzZXNEYXRhLm1pZGhlYXZlbi5kZWdyZWUgKyAxODApICUgMzYwLFxuICAgIH0sXG4gIH1cblxuICAvLyBGb3JtYXQgYXNwZWN0cyBkYXRhXG4gIGNvbnN0IGFzcGVjdHMgPSBhc3BlY3RzRGF0YS5tYXAoKGFzcGVjdCkgPT4gKHtcbiAgICBhc3BlY3Q6IGFzcGVjdC5hc3BlY3QudG9Mb3dlckNhc2UoKSxcbiAgICBwbGFuZXQxOiBjb252ZXJ0UGxhbmV0TmFtZShhc3BlY3QucGxhbmV0MSksXG4gICAgcGxhbmV0MjogY29udmVydFBsYW5ldE5hbWUoYXNwZWN0LnBsYW5ldDIpLFxuICAgIG9yYjogYXNwZWN0Lm9yYixcbiAgICBhcHBseWluZzogYXNwZWN0LmFwcGx5aW5nID09PSAxLFxuICB9KSlcblxuICByZXR1cm4ge1xuICAgIHBsYW5ldHMsXG4gICAgaG91c2VzLFxuICAgIGFuZ2xlcyxcbiAgICBhc3BlY3RzLFxuICAgIGJpcnRoRGV0YWlscyxcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIEFzdHJvbG9neUFQSSBwbGFuZXQgbmFtZXMgdG8gb3VyIGFwcGxpY2F0aW9uJ3MgZm9ybWF0XG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRQbGFuZXROYW1lKGFwaVBsYW5ldE5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHBsYW5ldE1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICBTdW46IFwic3VuXCIsXG4gICAgTW9vbjogXCJtb29uXCIsXG4gICAgTWVyY3VyeTogXCJtZXJjdXJ5XCIsXG4gICAgVmVudXM6IFwidmVudXNcIixcbiAgICBNYXJzOiBcIm1hcnNcIixcbiAgICBKdXBpdGVyOiBcImp1cGl0ZXJcIixcbiAgICBTYXR1cm46IFwic2F0dXJuXCIsXG4gICAgVXJhbnVzOiBcInVyYW51c1wiLFxuICAgIE5lcHR1bmU6IFwibmVwdHVuZVwiLFxuICAgIFBsdXRvOiBcInBsdXRvXCIsXG4gICAgUmFodTogXCJub3J0aF9ub2RlXCIsXG4gICAgS2V0dTogXCJzb3V0aF9ub2RlXCIsXG4gIH1cblxuICByZXR1cm4gcGxhbmV0TWFwW2FwaVBsYW5ldE5hbWVdIHx8IGFwaVBsYW5ldE5hbWUudG9Mb3dlckNhc2UoKVxufVxuXG4vKipcbiAqIEdldHMgdGhlIG9wcG9zaXRlIHpvZGlhYyBzaWduXG4gKi9cbmZ1bmN0aW9uIGdldE9wcG9zaXRlU2lnbihzaWduOiBab2RpYWNTaWduKTogWm9kaWFjU2lnbiB7XG4gIGNvbnN0IHpvZGlhY1NpZ25zOiBab2RpYWNTaWduW10gPSBbXG4gICAgXCJhcmllc1wiLFxuICAgIFwidGF1cnVzXCIsXG4gICAgXCJnZW1pbmlcIixcbiAgICBcImNhbmNlclwiLFxuICAgIFwibGVvXCIsXG4gICAgXCJ2aXJnb1wiLFxuICAgIFwibGlicmFcIixcbiAgICBcInNjb3JwaW9cIixcbiAgICBcInNhZ2l0dGFyaXVzXCIsXG4gICAgXCJjYXByaWNvcm5cIixcbiAgICBcImFxdWFyaXVzXCIsXG4gICAgXCJwaXNjZXNcIixcbiAgXVxuXG4gIGNvbnN0IGluZGV4ID0gem9kaWFjU2lnbnMuaW5kZXhPZihzaWduKVxuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gXCJhcmllc1wiIC8vIERlZmF1bHQgZmFsbGJhY2tcblxuICBjb25zdCBvcHBvc2l0ZUluZGV4ID0gKGluZGV4ICsgNikgJSAxMlxuICByZXR1cm4gem9kaWFjU2lnbnNbb3Bwb3NpdGVJbmRleF1cbn1cblxuLyoqXG4gKiBHZXRzIGludGVycHJldGF0aW9ucyBmb3IgYSBuYXRhbCBjaGFydFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TmF0YWxDaGFydEludGVycHJldGF0aW9uKG5hdGFsQ2hhcnQ6IE5hdGFsQ2hhcnQpOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIC8vIFRoaXMgd291bGQgYmUgaW1wbGVtZW50ZWQgdG8gZmV0Y2ggaW50ZXJwcmV0YXRpb25zIGZyb20gQXN0cm9sb2d5QVBJXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgcmV0dXJuIGEgcGxhY2Vob2xkZXIgaW50ZXJwcmV0YXRpb25cbiAgICByZXR1cm4ge1xuICAgICAgb3ZlcnZpZXc6IHtcbiAgICAgICAgdGl0bGU6IFwiWW91ciBDb3NtaWMgQmx1ZXByaW50XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgIFwiWW91ciBuYXRhbCBjaGFydCByZXZlYWxzIHlvdXIgdW5pcXVlIGNvc21pYyBibHVlcHJpbnQsIHNob3dpbmcgdGhlIHBvc2l0aW9ucyBvZiB0aGUgcGxhbmV0cyBhdCB0aGUgbW9tZW50IG9mIHlvdXIgYmlydGguIFRoaXMgY2VsZXN0aWFsIHNuYXBzaG90IG9mZmVycyBpbnNpZ2h0cyBpbnRvIHlvdXIgcGVyc29uYWxpdHksIHN0cmVuZ3RocywgY2hhbGxlbmdlcywgYW5kIGxpZmUgcGF0aC5cIixcbiAgICAgIH0sXG4gICAgICBzdW5TaWduOiB7XG4gICAgICAgIHRpdGxlOiBcIlN1biBTaWduXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgU3VuIHNpZ24gcmVwcmVzZW50cyB5b3VyIGNvcmUgZXNzZW5jZSBhbmQgbGlmZSBwdXJwb3NlLlwiLFxuICAgICAgICBrZXl3b3JkczogW1wiaWRlbnRpdHlcIiwgXCJwdXJwb3NlXCIsIFwidml0YWxpdHlcIl0sXG4gICAgICB9LFxuICAgICAgbW9vblNpZ246IHtcbiAgICAgICAgdGl0bGU6IFwiTW9vbiBTaWduXCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgTW9vbiBzaWduIHJlZmxlY3RzIHlvdXIgZW1vdGlvbmFsIG5hdHVyZSBhbmQgc3ViY29uc2Npb3VzIHBhdHRlcm5zLlwiLFxuICAgICAgICBrZXl3b3JkczogW1wiZW1vdGlvbnNcIiwgXCJpbnN0aW5jdHNcIiwgXCJjb21mb3J0XCJdLFxuICAgICAgfSxcbiAgICAgIGFzY2VuZGFudFNpZ246IHtcbiAgICAgICAgdGl0bGU6IFwiQXNjZW5kYW50XCIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgQXNjZW5kYW50IHJlcHJlc2VudHMgaG93IHlvdSBwcmVzZW50IHlvdXJzZWxmIHRvIHRoZSB3b3JsZC5cIixcbiAgICAgICAga2V5d29yZHM6IFtcImFwcGVhcmFuY2VcIiwgXCJmaXJzdCBpbXByZXNzaW9uc1wiLCBcInBlcnNvbmFsIHN0eWxlXCJdLFxuICAgICAgfSxcbiAgICAgIHBsYW5ldFBvc2l0aW9uczoge1xuICAgICAgICBzdW46IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFN1biBwbGFjZW1lbnQgaW5kaWNhdGVzIHlvdXIgY29yZSBpZGVudGl0eSBhbmQgcHVycG9zZSBpbiBsaWZlLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJpZGVudGl0eVwiLCBcInB1cnBvc2VcIiwgXCJ2aXRhbGl0eVwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgbW9vbjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgTW9vbiBwbGFjZW1lbnQgcmV2ZWFscyB5b3VyIGVtb3Rpb25hbCBuYXR1cmUgYW5kIHN1YmNvbnNjaW91cyBwYXR0ZXJucy5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiZW1vdGlvbnNcIiwgXCJpbnN0aW5jdHNcIiwgXCJjb21mb3J0XCJdLFxuICAgICAgICB9LFxuICAgICAgICBtZXJjdXJ5OiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBNZXJjdXJ5IHBsYWNlbWVudCBzaG93cyBob3cgeW91IHRoaW5rIGFuZCBjb21tdW5pY2F0ZS5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiY29tbXVuaWNhdGlvblwiLCBcInRoaW5raW5nXCIsIFwibGVhcm5pbmdcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIHZlbnVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBWZW51cyBwbGFjZW1lbnQgaW5kaWNhdGVzIGhvdyB5b3UgZXhwcmVzcyBhbmQgcmVjZWl2ZSBsb3ZlIGFuZCBiZWF1dHkuXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImxvdmVcIiwgXCJiZWF1dHlcIiwgXCJ2YWx1ZXNcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIG1hcnM6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIE1hcnMgcGxhY2VtZW50IHNob3dzIGhvdyB5b3UgYXNzZXJ0IHlvdXJzZWxmIGFuZCB0YWtlIGFjdGlvbi5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiYWN0aW9uXCIsIFwiZGVzaXJlXCIsIFwiZW5lcmd5XCJdLFxuICAgICAgICB9LFxuICAgICAgICBqdXBpdGVyOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBKdXBpdGVyIHBsYWNlbWVudCByZXZlYWxzIHdoZXJlIHlvdSBmaW5kIGdyb3d0aCBhbmQgZXhwYW5zaW9uLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJncm93dGhcIiwgXCJsdWNrXCIsIFwiYWJ1bmRhbmNlXCJdLFxuICAgICAgICB9LFxuICAgICAgICBzYXR1cm46IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFNhdHVybiBwbGFjZW1lbnQgaW5kaWNhdGVzIHdoZXJlIHlvdSBmYWNlIGNoYWxsZW5nZXMgYW5kIGxlYXJuIGRpc2NpcGxpbmUuXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImRpc2NpcGxpbmVcIiwgXCJyZXNwb25zaWJpbGl0eVwiLCBcInN0cnVjdHVyZVwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgdXJhbnVzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBVcmFudXMgcGxhY2VtZW50IHNob3dzIHdoZXJlIHlvdSBzZWVrIGZyZWVkb20gYW5kIGlubm92YXRpb24uXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImlubm92YXRpb25cIiwgXCJyZWJlbGxpb25cIiwgXCJjaGFuZ2VcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIG5lcHR1bmU6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIE5lcHR1bmUgcGxhY2VtZW50IHJldmVhbHMgeW91ciBzcGlyaXR1YWwgYW5kIGNyZWF0aXZlIGFzcGlyYXRpb25zLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJzcGlyaXR1YWxpdHlcIiwgXCJkcmVhbXNcIiwgXCJpbGx1c2lvblwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgcGx1dG86IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFBsdXRvIHBsYWNlbWVudCBpbmRpY2F0ZXMgd2hlcmUgeW91IGV4cGVyaWVuY2UgdHJhbnNmb3JtYXRpb24gYW5kIHBvd2VyLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJ0cmFuc2Zvcm1hdGlvblwiLCBcInBvd2VyXCIsIFwicmViaXJ0aFwiXSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBob3VzZXM6IHtcbiAgICAgICAgMToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSAxc3QgaG91c2UgcmVwcmVzZW50cyB5b3VyIHNlbGYtaW1hZ2UgYW5kIGhvdyB5b3UgcHJlc2VudCB5b3Vyc2VsZiB0byB0aGUgd29ybGQuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDI6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgMm5kIGhvdXNlIHJlcHJlc2VudHMgeW91ciB2YWx1ZXMsIHBvc3Nlc3Npb25zLCBhbmQgcmVzb3VyY2VzLlwiLFxuICAgICAgICB9LFxuICAgICAgICAzOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDNyZCBob3VzZSByZXByZXNlbnRzIGNvbW11bmljYXRpb24sIGxlYXJuaW5nLCBhbmQgeW91ciBpbW1lZGlhdGUgZW52aXJvbm1lbnQuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDQ6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgNHRoIGhvdXNlIHJlcHJlc2VudHMgeW91ciBob21lLCBmYW1pbHksIGFuZCBlbW90aW9uYWwgZm91bmRhdGlvbnMuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDU6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgNXRoIGhvdXNlIHJlcHJlc2VudHMgY3JlYXRpdml0eSwgcGxlYXN1cmUsIGFuZCBzZWxmLWV4cHJlc3Npb24uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDY6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgNnRoIGhvdXNlIHJlcHJlc2VudHMgd29yaywgaGVhbHRoLCBhbmQgZGFpbHkgcm91dGluZXMuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDc6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgN3RoIGhvdXNlIHJlcHJlc2VudHMgcGFydG5lcnNoaXBzLCByZWxhdGlvbnNoaXBzLCBhbmQgb3BlbiBlbmVtaWVzLlwiLFxuICAgICAgICB9LFxuICAgICAgICA4OiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDh0aCBob3VzZSByZXByZXNlbnRzIHRyYW5zZm9ybWF0aW9uLCBzaGFyZWQgcmVzb3VyY2VzLCBhbmQgdGhlIG9jY3VsdC5cIixcbiAgICAgICAgfSxcbiAgICAgICAgOToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSA5dGggaG91c2UgcmVwcmVzZW50cyBoaWdoZXIgZWR1Y2F0aW9uLCBwaGlsb3NvcGh5LCBhbmQgbG9uZy1kaXN0YW5jZSB0cmF2ZWwuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDEwOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDEwdGggaG91c2UgcmVwcmVzZW50cyBjYXJlZXIsIHB1YmxpYyBpbWFnZSwgYW5kIGF1dGhvcml0eS5cIixcbiAgICAgICAgfSxcbiAgICAgICAgMTE6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgMTF0aCBob3VzZSByZXByZXNlbnRzIGZyaWVuZHNoaXBzLCBncm91cHMsIGFuZCBhc3BpcmF0aW9ucy5cIixcbiAgICAgICAgfSxcbiAgICAgICAgMTI6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgMTJ0aCBob3VzZSByZXByZXNlbnRzIHRoZSB1bmNvbnNjaW91cywgc3Bpcml0dWFsaXR5LCBhbmQgaGlkZGVuIGVuZW1pZXMuXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjaGFydCBpbnRlcnByZXRhdGlvbjpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgYSBkYWlseSBob3Jvc2NvcGUgZm9yIGEgem9kaWFjIHNpZ25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERhaWx5SG9yb3Njb3BlKHNpZ246IFpvZGlhY1NpZ24pOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGNyZWRlbnRpYWxzIGZpcnN0XG4gICAgaWYgKCFoYXNWYWxpZENyZWRlbnRpYWxzKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZFwiKVxuICAgIH1cblxuICAgIC8vIE1ha2UgdGhlIEFQSSByZXF1ZXN0XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9ob3Jvc2NvcGVfcHJlZGljdGlvbi9kYWlseS8ke3NpZ259YCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IGdldEF1dGhIZWFkZXJzKCksXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7fSksXG4gICAgfSlcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcblxuICAgIC8vIENoZWNrIGZvciBlcnJvciBpbiByZXNwb25zZVxuICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gZmFsc2UgJiYgZGF0YS5tc2cpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1zZylcbiAgICB9XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEhvcm9zY29wZSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICAgIH1cblxuICAgIC8vIEZvcm1hdCB0aGUgcmVzcG9uc2UgdG8gbWF0Y2ggb3VyIGFwcGxpY2F0aW9uJ3Mgc3RydWN0dXJlXG4gICAgcmV0dXJuIHtcbiAgICAgIHNpZ246IHNpZ24sXG4gICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLFxuICAgICAgcHJlZGljdGlvbjogZGF0YS5wcmVkaWN0aW9uIHx8IFwiWW91ciBob3Jvc2NvcGUgZm9yIHRvZGF5IGlzIG5vdCBhdmFpbGFibGUuXCIsXG4gICAgICBsdWNreV9udW1iZXI6IGRhdGEubHVja3lfbnVtYmVyIHx8IFwiN1wiLFxuICAgICAgbHVja3lfY29sb3I6IGRhdGEubHVja3lfY29sb3IgfHwgXCJCbHVlXCIsXG4gICAgICBtb29kOiBkYXRhLm1vb2QgfHwgXCJSZWZsZWN0aXZlXCIsXG4gICAgICBjb21wYXRpYmlsaXR5OiBkYXRhLmNvbXBhdGliaWxpdHkgfHwgXCJMaWJyYVwiLFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBkYWlseSBob3Jvc2NvcGU6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5hdGFsQ2hhcnRJbnRlcnByZXRhdGlvbkZyb21BUEkoYmlydGhEYXRhOiB7XG4gIGRheTogbnVtYmVyO1xuICBtb250aDogbnVtYmVyO1xuICB5ZWFyOiBudW1iZXI7XG4gIGhvdXI6IG51bWJlcjtcbiAgbWluOiBudW1iZXI7XG4gIGxhdDogbnVtYmVyO1xuICBsb246IG51bWJlcjtcbiAgdHpvbmU6IG51bWJlcjtcbiAgaG91c2VfdHlwZT86IHN0cmluZztcbn0pOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIGlmICghaGFzVmFsaWRDcmVkZW50aWFscygpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWRcIilcbiAgICB9XG4gICAgY29uc3QgaGVhZGVycyA9IGdldEF1dGhIZWFkZXJzKClcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FTVFJPTE9HWV9BUElfQkFTRV9VUkx9L25hdGFsX2NoYXJ0X2ludGVycHJldGF0aW9uYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShiaXJ0aERhdGEpLFxuICAgIH0pXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gZmFsc2UgJiYgZGF0YS5tc2cpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLm1zZylcbiAgICB9XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcnByZXRhdGlvbiBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgY2hhcnQgaW50ZXJwcmV0YXRpb246XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbImdldEZhbGxiYWNrTmF0YWxDaGFydCIsInNhZmVHZXRTZXNzaW9uSXRlbSIsInNhZmVTZXRTZXNzaW9uSXRlbSIsInNhZmVSZW1vdmVTZXNzaW9uSXRlbSIsIlVTRVJfSUQiLCJwcm9jZXNzIiwiZW52IiwiQVBJX0tFWSIsIkFTVFJPTE9HWV9BUElfQkFTRV9VUkwiLCJoYXNWYWxpZENyZWRlbnRpYWxzIiwiaGFzQ3JlZGVudGlhbHMiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwic2V0QXV0aEVycm9yIiwiaGFzRXJyb3IiLCJoYXNBdXRoRXJyb3IiLCJjbGVhckF1dGhFcnJvcnMiLCJnZXRBdXRoSGVhZGVycyIsImF1dGhTdHJpbmciLCJiYXNlNjRBdXRoIiwid2luZG93IiwiYnRvYSIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsImVycm9yIiwiRXJyb3IiLCJzdWJzdHJpbmciLCJBdXRob3JpemF0aW9uIiwiZmV0Y2hOYXRhbENoYXJ0IiwiYmlydGhEYXRlIiwiYmlydGhUaW1lIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJ0aW1lem9uZSIsIndhcm4iLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJzcGxpdCIsIm1hcCIsIk51bWJlciIsImhvdXIiLCJtaW51dGUiLCJyZXF1ZXN0Qm9keSIsIm1pbiIsImxhdCIsImxvbiIsInR6b25lIiwicGxhbmV0c1Jlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwbGFuZXRzRGF0YSIsImpzb24iLCJzdGF0dXMiLCJtc2ciLCJpbmNsdWRlcyIsIm9rIiwic3RhdHVzVGV4dCIsImhvdXNlc1Jlc3BvbnNlIiwiaG91c2VzRGF0YSIsImFzcGVjdHNSZXNwb25zZSIsImFzcGVjdHNEYXRhIiwiZm9ybWF0TmF0YWxDaGFydFJlc3BvbnNlIiwiZGF0ZSIsInRpbWUiLCJsb2NhdGlvbiIsIm5hbWUiLCJmZXRjaE5hdGFsV2hlZWxDaGFydCIsInNpZ25faWNvbl9jb2xvciIsInNpZ25fYmFja2dyb3VuZCIsImNoYXJ0VXJsIiwic3ZnQ29udGVudCIsInBsYW5ldF9pY29uX2NvbG9yIiwiaW5uZXJfY2lyY2xlX2JhY2tncm91bmQiLCJvdXRlcl9jaXJjbGVfYmFja2dyb3VuZCIsImNoYXJ0X3NpemUiLCJpbWFnZV90eXBlIiwicmVzcG9uc2UiLCJyYXdSZXNwb25zZVRleHQiLCJ0ZXh0IiwiZGF0YSIsInBhcnNlIiwiT2JqZWN0Iiwia2V5cyIsImUiLCJjaGFydF91cmwiLCJzdmciLCJmZXRjaE5hdGFsV2hlZWxDaGFydFNWRyIsInJlc3VsdCIsInN2Z1Jlc3BvbnNlIiwiZ2VvY29kZUxvY2F0aW9uIiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYmlydGhEZXRhaWxzIiwidmFsaWRDZWxlc3RpYWxCb2RpZXMiLCJwbGFuZXRzIiwicGxhbmV0IiwicGxhbmV0TmFtZSIsImNvbnZlcnRQbGFuZXROYW1lIiwic2lnbiIsInRvTG93ZXJDYXNlIiwiZGVncmVlIiwibm9ybV9kZWdyZWUiLCJob3VzZSIsInJldHJvZ3JhZGUiLCJpc19yZXRyb2dyYWRlIiwiYXNwZWN0c1RvT3RoZXJQbGFuZXRzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImhvdXNlcyIsImtleSIsIm51bWJlciIsInBhcnNlSW50IiwicmVwbGFjZSIsImN1c3AiLCJhbmdsZXMiLCJhc2NlbmRhbnQiLCJtaWRoZWF2ZW4iLCJkZXNjZW5kYW50IiwiZ2V0T3Bwb3NpdGVTaWduIiwiaW11bUNvZWxpIiwiYXNwZWN0cyIsImFzcGVjdCIsInBsYW5ldDEiLCJwbGFuZXQyIiwib3JiIiwiYXBwbHlpbmciLCJhcGlQbGFuZXROYW1lIiwicGxhbmV0TWFwIiwiU3VuIiwiTW9vbiIsIk1lcmN1cnkiLCJWZW51cyIsIk1hcnMiLCJKdXBpdGVyIiwiU2F0dXJuIiwiVXJhbnVzIiwiTmVwdHVuZSIsIlBsdXRvIiwiUmFodSIsIktldHUiLCJ6b2RpYWNTaWducyIsImluZGV4IiwiaW5kZXhPZiIsIm9wcG9zaXRlSW5kZXgiLCJnZXROYXRhbENoYXJ0SW50ZXJwcmV0YXRpb24iLCJuYXRhbENoYXJ0Iiwib3ZlcnZpZXciLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic3VuU2lnbiIsImtleXdvcmRzIiwibW9vblNpZ24iLCJhc2NlbmRhbnRTaWduIiwicGxhbmV0UG9zaXRpb25zIiwic3VuIiwibW9vbiIsIm1lcmN1cnkiLCJ2ZW51cyIsIm1hcnMiLCJqdXBpdGVyIiwic2F0dXJuIiwidXJhbnVzIiwibmVwdHVuZSIsInBsdXRvIiwiZ2V0RGFpbHlIb3Jvc2NvcGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJwcmVkaWN0aW9uIiwibHVja3lfbnVtYmVyIiwibHVja3lfY29sb3IiLCJtb29kIiwiY29tcGF0aWJpbGl0eSIsImdldE5hdGFsQ2hhcnRJbnRlcnByZXRhdGlvbkZyb21BUEkiLCJiaXJ0aERhdGEiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./services/astrology-api-service.ts\n");

/***/ }),

/***/ "(ssr)/./services/astrology-service.ts":
/*!***************************************!*\
  !*** ./services/astrology-service.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchNatalChart: () => (/* binding */ fetchNatalChart),\n/* harmony export */   fetchNatalWheelChartSVG: () => (/* binding */ fetchNatalWheelChartSVG),\n/* harmony export */   geocodeLocation: () => (/* binding */ geocodeLocation),\n/* harmony export */   getDailyHoroscope: () => (/* binding */ getDailyHoroscope),\n/* harmony export */   getNatalChartInterpretation: () => (/* binding */ getNatalChartInterpretation)\n/* harmony export */ });\n/* harmony import */ var _astrology_api_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./astrology-api-service */ \"(ssr)/./services/astrology-api-service.ts\");\n/**\n * Astrology Service\n * Handles all interactions with astrology APIs and data processing\n */ \n/**\n * Fetches natal chart data\n */ async function fetchNatalChart(birthDate, birthTime, latitude, longitude) {\n    try {\n        // Calculate timezone from longitude (approximate)\n        // In a real app, you would use a timezone API or library\n        const timezone = Math.round(longitude / 15);\n        // Use the AstrologyAPI service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.fetchNatalChart)(birthDate, birthTime, latitude, longitude, timezone);\n    } catch (error) {\n        console.error(\"Error fetching natal chart:\", error);\n        throw error;\n    }\n}\n/**\n * Fetches natal wheel chart SVG\n */ async function fetchNatalWheelChartSVG(birthDate, birthTime, latitude, longitude) {\n    try {\n        // Calculate timezone from longitude (approximate)\n        const timezone = Math.round(longitude / 15);\n        // Use the AstrologyAPI service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.fetchNatalWheelChartSVG)(birthDate, birthTime, latitude, longitude, timezone);\n    } catch (error) {\n        console.error(\"Error fetching natal wheel chart SVG:\", error);\n        throw error;\n    }\n}\n/**\n * Geocodes a location string to get latitude and longitude\n */ async function geocodeLocation(locationString) {\n    try {\n        // Try to use a simple geocoding approach first\n        const simpleGeocode = getSimpleGeocoding(locationString);\n        if (simpleGeocode) {\n            console.log(\"Using simple geocoding for:\", locationString);\n            return simpleGeocode;\n        }\n        // Try the direct API call first\n        try {\n            const result = await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.geocodeLocation)(locationString);\n            if (result.latitude !== 0 || result.longitude !== 0) {\n                return result;\n            }\n        } catch (error) {\n            console.warn(\"Direct API geocoding failed, trying /api/geocode\", error);\n        }\n        // Fallback: use the custom /api/geocode endpoint with POST\n        try {\n            const response = await fetch(\"/api/geocode\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    location: locationString\n                })\n            });\n            if (response.ok) {\n                const data = await response.json();\n                return {\n                    latitude: data.latitude,\n                    longitude: data.longitude,\n                    name: data.name || locationString\n                };\n            }\n        } catch (error) {\n            console.error(\"Error using /api/geocode fallback:\", error);\n        }\n        // Final fallback\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    } catch (error) {\n        console.error(\"Error in geocoding service:\", error);\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    }\n}\n/**\n * Simple geocoding function for common locations\n * This serves as a fallback when the API fails\n */ function getSimpleGeocoding(locationString, forceFallback = false) {\n    // Normalize the input\n    const normalizedInput = locationString.toLowerCase().trim();\n    // Common city coordinates\n    const cityCoordinates = {\n        // North America\n        \"new york\": [\n            40.7128,\n            -74.006\n        ],\n        \"los angeles\": [\n            34.0522,\n            -118.2437\n        ],\n        chicago: [\n            41.8781,\n            -87.6298\n        ],\n        toronto: [\n            43.6532,\n            -79.3832\n        ],\n        \"mexico city\": [\n            19.4326,\n            -99.1332\n        ],\n        // Europe\n        london: [\n            51.5074,\n            -0.1278\n        ],\n        paris: [\n            48.8566,\n            2.3522\n        ],\n        berlin: [\n            52.52,\n            13.405\n        ],\n        madrid: [\n            40.4168,\n            -3.7038\n        ],\n        rome: [\n            41.9028,\n            12.4964\n        ],\n        amsterdam: [\n            52.3676,\n            4.9041\n        ],\n        vienna: [\n            48.2082,\n            16.3738\n        ],\n        hamburg: [\n            53.5511,\n            9.9937\n        ],\n        // Asia\n        tokyo: [\n            35.6762,\n            139.6503\n        ],\n        beijing: [\n            39.9042,\n            116.4074\n        ],\n        mumbai: [\n            19.076,\n            72.8777\n        ],\n        singapore: [\n            1.3521,\n            103.8198\n        ],\n        // Australia\n        sydney: [\n            -33.8688,\n            151.2093\n        ],\n        melbourne: [\n            -37.8136,\n            144.9631\n        ],\n        // South America\n        \"rio de janeiro\": [\n            -22.9068,\n            -43.1729\n        ],\n        \"buenos aires\": [\n            -34.6037,\n            -58.3816\n        ],\n        // Africa\n        cairo: [\n            30.0444,\n            31.2357\n        ],\n        \"cape town\": [\n            -33.9249,\n            18.4241\n        ]\n    };\n    // Check for exact matches\n    for (const [city, coordinates] of Object.entries(cityCoordinates)){\n        if (normalizedInput.includes(city)) {\n            return {\n                latitude: coordinates[0],\n                longitude: coordinates[1],\n                name: locationString\n            };\n        }\n    }\n    // If we're forcing a fallback or the input is very short, use a default\n    if (forceFallback || normalizedInput.length < 3) {\n        // Default to a central location (0,0 is in the Atlantic Ocean)\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    }\n    // No match found\n    return null;\n}\n/**\n * Gets interpretations for a natal chart\n */ async function getNatalChartInterpretation(natalChart) {\n    try {\n        // Use the AstrologyAPI interpretation service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.getNatalChartInterpretation)(natalChart);\n    } catch (error) {\n        console.error(\"Error getting chart interpretation:\", error);\n        throw error;\n    }\n}\n/**\n * Gets a daily horoscope for a zodiac sign\n */ async function getDailyHoroscope(sign) {\n    try {\n        // Use the AstrologyAPI horoscope service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.getDailyHoroscope)(sign);\n    } catch (error) {\n        console.error(\"Error getting daily horoscope:\", error);\n        throw error;\n    }\n}\n// Define zodiacSymbols\nconst zodiacSymbols = {\n    aries: \"\",\n    taurus: \"\",\n    gemini: \"\",\n    cancer: \"\",\n    leo: \"\",\n    virgo: \"\",\n    libra: \"\",\n    scorpio: \"\",\n    sagittarius: \"\",\n    capricorn: \"\",\n    aquarius: \"\",\n    pisces: \"\"\n};\n// Add a function to create a placeholder chart when the API fails\nfunction createPlaceholderChart(birthDate, birthTime, latitude, longitude) {\n    // Create a basic placeholder chart with minimal data\n    const [year, month, day] = birthDate.split(\"-\").map(Number);\n    const [hour, minute] = birthTime.split(\":\").map(Number);\n    // Generate some placeholder planets\n    const planets = [\n        {\n            name: \"sun\",\n            sign: \"aries\",\n            degree: 15,\n            house: 1,\n            retrograde: false\n        },\n        {\n            name: \"moon\",\n            sign: \"taurus\",\n            degree: 25,\n            house: 2,\n            retrograde: false\n        },\n        {\n            name: \"mercury\",\n            sign: \"gemini\",\n            degree: 5,\n            house: 3,\n            retrograde: false\n        },\n        {\n            name: \"venus\",\n            sign: \"cancer\",\n            degree: 10,\n            house: 4,\n            retrograde: false\n        },\n        {\n            name: \"mars\",\n            sign: \"leo\",\n            degree: 20,\n            house: 5,\n            retrograde: false\n        },\n        {\n            name: \"jupiter\",\n            sign: \"virgo\",\n            degree: 15,\n            house: 6,\n            retrograde: false\n        },\n        {\n            name: \"saturn\",\n            sign: \"libra\",\n            degree: 5,\n            house: 7,\n            retrograde: true\n        }\n    ];\n    // Generate placeholder houses\n    const houses = Array.from({\n        length: 12\n    }, (_, i)=>({\n            number: i + 1,\n            sign: Object.keys(zodiacSymbols)[i % 12],\n            degree: i * 30 % 360,\n            cusp: true\n        }));\n    // Generate placeholder angles\n    const angles = {\n        ascendant: {\n            sign: \"aries\",\n            degree: 0\n        },\n        midheaven: {\n            sign: \"capricorn\",\n            degree: 270\n        },\n        descendant: {\n            sign: \"libra\",\n            degree: 180\n        },\n        imumCoeli: {\n            sign: \"cancer\",\n            degree: 90\n        }\n    };\n    return {\n        planets,\n        houses,\n        angles,\n        aspects: [],\n        birthDetails: {\n            date: birthDate,\n            time: birthTime,\n            location: {\n                latitude,\n                longitude,\n                name: \"Location data unavailable\"\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQUc7SUFDMUM7SUFFQSxPQUFPO1FBQ0xEO1FBQ0FJO1FBQ0FRO1FBQ0FLLFNBQVMsRUFBRTtRQUNYQyxjQUFjO1lBQ1pDLE1BQU1sRztZQUNObUcsTUFBTWxHO1lBQ05xQixVQUFVO2dCQUNScEI7Z0JBQ0FDO2dCQUNBdUIsTUFBTTtZQUNSO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFya29ub3Zha292c2tpL0RvY3VtZW50cy9WaXN1YWwgQ29kZS9Bc3Ryb0Jvb2svQXN0cm9Cb29rL3NlcnZpY2VzL2FzdHJvbG9neS1zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXN0cm9sb2d5IFNlcnZpY2VcbiAqIEhhbmRsZXMgYWxsIGludGVyYWN0aW9ucyB3aXRoIGFzdHJvbG9neSBBUElzIGFuZCBkYXRhIHByb2Nlc3NpbmdcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IE5hdGFsQ2hhcnQsIENoYXJ0SW50ZXJwcmV0YXRpb24sIFpvZGlhY1NpZ24gfSBmcm9tIFwiQC90eXBlcy9hc3Ryb2xvZ3lcIlxuaW1wb3J0IHtcbiAgZmV0Y2hOYXRhbENoYXJ0IGFzIGZldGNoTmF0YWxDaGFydEZyb21BUEksXG4gIGdlb2NvZGVMb2NhdGlvbiBhcyBnZW9jb2RlTG9jYXRpb25Gcm9tQVBJLFxuICBnZXROYXRhbENoYXJ0SW50ZXJwcmV0YXRpb24gYXMgZ2V0SW50ZXJwcmV0YXRpb25Gcm9tQVBJLFxuICBnZXREYWlseUhvcm9zY29wZSBhcyBnZXREYWlseUhvcm9zY29wZUZyb21BUEksXG4gIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHIGFzIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHRnJvbUFQSSxcbn0gZnJvbSBcIi4vYXN0cm9sb2d5LWFwaS1zZXJ2aWNlXCJcblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIGNoYXJ0IGRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTmF0YWxDaGFydChcbiAgYmlydGhEYXRlOiBzdHJpbmcsXG4gIGJpcnRoVGltZTogc3RyaW5nLFxuICBsYXRpdHVkZTogbnVtYmVyLFxuICBsb25naXR1ZGU6IG51bWJlcixcbik6IFByb21pc2U8TmF0YWxDaGFydD4ge1xuICB0cnkge1xuICAgIC8vIENhbGN1bGF0ZSB0aW1lem9uZSBmcm9tIGxvbmdpdHVkZSAoYXBwcm94aW1hdGUpXG4gICAgLy8gSW4gYSByZWFsIGFwcCwgeW91IHdvdWxkIHVzZSBhIHRpbWV6b25lIEFQSSBvciBsaWJyYXJ5XG4gICAgY29uc3QgdGltZXpvbmUgPSBNYXRoLnJvdW5kKGxvbmdpdHVkZSAvIDE1KVxuXG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBmZXRjaE5hdGFsQ2hhcnRGcm9tQVBJKGJpcnRoRGF0ZSwgYmlydGhUaW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lem9uZSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgY2hhcnQ6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIHdoZWVsIGNoYXJ0IFNWR1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hOYXRhbFdoZWVsQ2hhcnRTVkcoXG4gIGJpcnRoRGF0ZTogc3RyaW5nLFxuICBiaXJ0aFRpbWU6IHN0cmluZyxcbiAgbGF0aXR1ZGU6IG51bWJlcixcbiAgbG9uZ2l0dWRlOiBudW1iZXIsXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIENhbGN1bGF0ZSB0aW1lem9uZSBmcm9tIGxvbmdpdHVkZSAoYXBwcm94aW1hdGUpXG4gICAgY29uc3QgdGltZXpvbmUgPSBNYXRoLnJvdW5kKGxvbmdpdHVkZSAvIDE1KVxuXG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBmZXRjaE5hdGFsV2hlZWxDaGFydFNWR0Zyb21BUEkoYmlydGhEYXRlLCBiaXJ0aFRpbWUsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHRpbWV6b25lKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBuYXRhbCB3aGVlbCBjaGFydCBTVkc6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBHZW9jb2RlcyBhIGxvY2F0aW9uIHN0cmluZyB0byBnZXQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VvY29kZUxvY2F0aW9uKFxuICBsb2NhdGlvblN0cmluZzogc3RyaW5nLFxuKTogUHJvbWlzZTx7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIC8vIFRyeSB0byB1c2UgYSBzaW1wbGUgZ2VvY29kaW5nIGFwcHJvYWNoIGZpcnN0XG4gICAgY29uc3Qgc2ltcGxlR2VvY29kZSA9IGdldFNpbXBsZUdlb2NvZGluZyhsb2NhdGlvblN0cmluZylcbiAgICBpZiAoc2ltcGxlR2VvY29kZSkge1xuICAgICAgY29uc29sZS5sb2coXCJVc2luZyBzaW1wbGUgZ2VvY29kaW5nIGZvcjpcIiwgbG9jYXRpb25TdHJpbmcpXG4gICAgICByZXR1cm4gc2ltcGxlR2VvY29kZVxuICAgIH1cblxuICAgIC8vIFRyeSB0aGUgZGlyZWN0IEFQSSBjYWxsIGZpcnN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlb2NvZGVMb2NhdGlvbkZyb21BUEkobG9jYXRpb25TdHJpbmcpXG4gICAgICBpZiAocmVzdWx0LmxhdGl0dWRlICE9PSAwIHx8IHJlc3VsdC5sb25naXR1ZGUgIT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJEaXJlY3QgQVBJIGdlb2NvZGluZyBmYWlsZWQsIHRyeWluZyAvYXBpL2dlb2NvZGVcIiwgZXJyb3IpXG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2s6IHVzZSB0aGUgY3VzdG9tIC9hcGkvZ2VvY29kZSBlbmRwb2ludCB3aXRoIFBPU1RcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvZ2VvY29kZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBsb2NhdGlvbjogbG9jYXRpb25TdHJpbmcgfSlcbiAgICAgIH0pXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhdGl0dWRlOiBkYXRhLmxhdGl0dWRlLFxuICAgICAgICAgIGxvbmdpdHVkZTogZGF0YS5sb25naXR1ZGUsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lIHx8IGxvY2F0aW9uU3RyaW5nLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1c2luZyAvYXBpL2dlb2NvZGUgZmFsbGJhY2s6XCIsIGVycm9yKVxuICAgIH1cblxuICAgIC8vIEZpbmFsIGZhbGxiYWNrXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAwLFxuICAgICAgbG9uZ2l0dWRlOiAwLFxuICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZW9jb2Rpbmcgc2VydmljZTpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAwLFxuICAgICAgbG9uZ2l0dWRlOiAwLFxuICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2ltcGxlIGdlb2NvZGluZyBmdW5jdGlvbiBmb3IgY29tbW9uIGxvY2F0aW9uc1xuICogVGhpcyBzZXJ2ZXMgYXMgYSBmYWxsYmFjayB3aGVuIHRoZSBBUEkgZmFpbHNcbiAqL1xuZnVuY3Rpb24gZ2V0U2ltcGxlR2VvY29kaW5nKFxuICBsb2NhdGlvblN0cmluZzogc3RyaW5nLFxuICBmb3JjZUZhbGxiYWNrID0gZmFsc2UsXG4pOiB7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfSB8IG51bGwge1xuICAvLyBOb3JtYWxpemUgdGhlIGlucHV0XG4gIGNvbnN0IG5vcm1hbGl6ZWRJbnB1dCA9IGxvY2F0aW9uU3RyaW5nLnRvTG93ZXJDYXNlKCkudHJpbSgpXG5cbiAgLy8gQ29tbW9uIGNpdHkgY29vcmRpbmF0ZXNcbiAgY29uc3QgY2l0eUNvb3JkaW5hdGVzOiBSZWNvcmQ8c3RyaW5nLCBbbnVtYmVyLCBudW1iZXJdPiA9IHtcbiAgICAvLyBOb3J0aCBBbWVyaWNhXG4gICAgXCJuZXcgeW9ya1wiOiBbNDAuNzEyOCwgLTc0LjAwNl0sXG4gICAgXCJsb3MgYW5nZWxlc1wiOiBbMzQuMDUyMiwgLTExOC4yNDM3XSxcbiAgICBjaGljYWdvOiBbNDEuODc4MSwgLTg3LjYyOThdLFxuICAgIHRvcm9udG86IFs0My42NTMyLCAtNzkuMzgzMl0sXG4gICAgXCJtZXhpY28gY2l0eVwiOiBbMTkuNDMyNiwgLTk5LjEzMzJdLFxuXG4gICAgLy8gRXVyb3BlXG4gICAgbG9uZG9uOiBbNTEuNTA3NCwgLTAuMTI3OF0sXG4gICAgcGFyaXM6IFs0OC44NTY2LCAyLjM1MjJdLFxuICAgIGJlcmxpbjogWzUyLjUyLCAxMy40MDVdLFxuICAgIG1hZHJpZDogWzQwLjQxNjgsIC0zLjcwMzhdLFxuICAgIHJvbWU6IFs0MS45MDI4LCAxMi40OTY0XSxcbiAgICBhbXN0ZXJkYW06IFs1Mi4zNjc2LCA0LjkwNDFdLFxuICAgIHZpZW5uYTogWzQ4LjIwODIsIDE2LjM3MzhdLFxuICAgIGhhbWJ1cmc6IFs1My41NTExLCA5Ljk5MzddLFxuXG4gICAgLy8gQXNpYVxuICAgIHRva3lvOiBbMzUuNjc2MiwgMTM5LjY1MDNdLFxuICAgIGJlaWppbmc6IFszOS45MDQyLCAxMTYuNDA3NF0sXG4gICAgbXVtYmFpOiBbMTkuMDc2LCA3Mi44Nzc3XSxcbiAgICBzaW5nYXBvcmU6IFsxLjM1MjEsIDEwMy44MTk4XSxcblxuICAgIC8vIEF1c3RyYWxpYVxuICAgIHN5ZG5leTogWy0zMy44Njg4LCAxNTEuMjA5M10sXG4gICAgbWVsYm91cm5lOiBbLTM3LjgxMzYsIDE0NC45NjMxXSxcblxuICAgIC8vIFNvdXRoIEFtZXJpY2FcbiAgICBcInJpbyBkZSBqYW5laXJvXCI6IFstMjIuOTA2OCwgLTQzLjE3MjldLFxuICAgIFwiYnVlbm9zIGFpcmVzXCI6IFstMzQuNjAzNywgLTU4LjM4MTZdLFxuXG4gICAgLy8gQWZyaWNhXG4gICAgY2Fpcm86IFszMC4wNDQ0LCAzMS4yMzU3XSxcbiAgICBcImNhcGUgdG93blwiOiBbLTMzLjkyNDksIDE4LjQyNDFdLFxuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGV4YWN0IG1hdGNoZXNcbiAgZm9yIChjb25zdCBbY2l0eSwgY29vcmRpbmF0ZXNdIG9mIE9iamVjdC5lbnRyaWVzKGNpdHlDb29yZGluYXRlcykpIHtcbiAgICBpZiAobm9ybWFsaXplZElucHV0LmluY2x1ZGVzKGNpdHkpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYXRpdHVkZTogY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIG5hbWU6IGxvY2F0aW9uU3RyaW5nLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIElmIHdlJ3JlIGZvcmNpbmcgYSBmYWxsYmFjayBvciB0aGUgaW5wdXQgaXMgdmVyeSBzaG9ydCwgdXNlIGEgZGVmYXVsdFxuICBpZiAoZm9yY2VGYWxsYmFjayB8fCBub3JtYWxpemVkSW5wdXQubGVuZ3RoIDwgMykge1xuICAgIC8vIERlZmF1bHQgdG8gYSBjZW50cmFsIGxvY2F0aW9uICgwLDAgaXMgaW4gdGhlIEF0bGFudGljIE9jZWFuKVxuICAgIHJldHVybiB7XG4gICAgICBsYXRpdHVkZTogMCxcbiAgICAgIGxvbmdpdHVkZTogMCxcbiAgICAgIG5hbWU6IGxvY2F0aW9uU3RyaW5nLFxuICAgIH1cbiAgfVxuXG4gIC8vIE5vIG1hdGNoIGZvdW5kXG4gIHJldHVybiBudWxsXG59XG5cbi8qKlxuICogR2V0cyBpbnRlcnByZXRhdGlvbnMgZm9yIGEgbmF0YWwgY2hhcnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5hdGFsQ2hhcnRJbnRlcnByZXRhdGlvbihuYXRhbENoYXJ0OiBOYXRhbENoYXJ0KTogUHJvbWlzZTxDaGFydEludGVycHJldGF0aW9uPiB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgaW50ZXJwcmV0YXRpb24gc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBnZXRJbnRlcnByZXRhdGlvbkZyb21BUEkobmF0YWxDaGFydClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjaGFydCBpbnRlcnByZXRhdGlvbjpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgYSBkYWlseSBob3Jvc2NvcGUgZm9yIGEgem9kaWFjIHNpZ25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERhaWx5SG9yb3Njb3BlKHNpZ246IFpvZGlhY1NpZ24pOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIC8vIFVzZSB0aGUgQXN0cm9sb2d5QVBJIGhvcm9zY29wZSBzZXJ2aWNlXG4gICAgcmV0dXJuIGF3YWl0IGdldERhaWx5SG9yb3Njb3BlRnJvbUFQSShzaWduKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGRhaWx5IGhvcm9zY29wZTpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBEZWZpbmUgem9kaWFjU3ltYm9sc1xuY29uc3Qgem9kaWFjU3ltYm9sczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgYXJpZXM6IFwi4pmIXCIsXG4gIHRhdXJ1czogXCLimYlcIixcbiAgZ2VtaW5pOiBcIuKZilwiLFxuICBjYW5jZXI6IFwi4pmLXCIsXG4gIGxlbzogXCLimYxcIixcbiAgdmlyZ286IFwi4pmNXCIsXG4gIGxpYnJhOiBcIuKZjlwiLFxuICBzY29ycGlvOiBcIuKZj1wiLFxuICBzYWdpdHRhcml1czogXCLimZBcIixcbiAgY2Fwcmljb3JuOiBcIuKZkVwiLFxuICBhcXVhcml1czogXCLimZJcIixcbiAgcGlzY2VzOiBcIuKZk1wiLFxufVxuXG4vLyBEZWZpbmUgdGhlIFBsYW5ldFBvc2l0aW9uIHR5cGVcbmludGVyZmFjZSBQbGFuZXRQb3NpdGlvbiB7XG4gIG5hbWU6IHN0cmluZ1xuICBzaWduOiBzdHJpbmdcbiAgZGVncmVlOiBudW1iZXJcbiAgaG91c2U6IG51bWJlclxuICByZXRyb2dyYWRlOiBib29sZWFuXG59XG5cbi8vIEFkZCBhIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIHBsYWNlaG9sZGVyIGNoYXJ0IHdoZW4gdGhlIEFQSSBmYWlsc1xuZnVuY3Rpb24gY3JlYXRlUGxhY2Vob2xkZXJDaGFydChiaXJ0aERhdGU6IHN0cmluZywgYmlydGhUaW1lOiBzdHJpbmcsIGxhdGl0dWRlOiBudW1iZXIsIGxvbmdpdHVkZTogbnVtYmVyKTogTmF0YWxDaGFydCB7XG4gIC8vIENyZWF0ZSBhIGJhc2ljIHBsYWNlaG9sZGVyIGNoYXJ0IHdpdGggbWluaW1hbCBkYXRhXG4gIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGJpcnRoRGF0ZS5zcGxpdChcIi1cIikubWFwKE51bWJlcilcbiAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSBiaXJ0aFRpbWUuc3BsaXQoXCI6XCIpLm1hcChOdW1iZXIpXG5cbiAgLy8gR2VuZXJhdGUgc29tZSBwbGFjZWhvbGRlciBwbGFuZXRzXG4gIGNvbnN0IHBsYW5ldHM6IFBsYW5ldFBvc2l0aW9uW10gPSBbXG4gICAgeyBuYW1lOiBcInN1blwiLCBzaWduOiBcImFyaWVzXCIsIGRlZ3JlZTogMTUsIGhvdXNlOiAxLCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJtb29uXCIsIHNpZ246IFwidGF1cnVzXCIsIGRlZ3JlZTogMjUsIGhvdXNlOiAyLCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJtZXJjdXJ5XCIsIHNpZ246IFwiZ2VtaW5pXCIsIGRlZ3JlZTogNSwgaG91c2U6IDMsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcInZlbnVzXCIsIHNpZ246IFwiY2FuY2VyXCIsIGRlZ3JlZTogMTAsIGhvdXNlOiA0LCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJtYXJzXCIsIHNpZ246IFwibGVvXCIsIGRlZ3JlZTogMjAsIGhvdXNlOiA1LCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJqdXBpdGVyXCIsIHNpZ246IFwidmlyZ29cIiwgZGVncmVlOiAxNSwgaG91c2U6IDYsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcInNhdHVyblwiLCBzaWduOiBcImxpYnJhXCIsIGRlZ3JlZTogNSwgaG91c2U6IDcsIHJldHJvZ3JhZGU6IHRydWUgfSxcbiAgXVxuXG4gIC8vIEdlbmVyYXRlIHBsYWNlaG9sZGVyIGhvdXNlc1xuICBjb25zdCBob3VzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMiB9LCAoXywgaSkgPT4gKHtcbiAgICBudW1iZXI6IGkgKyAxLFxuICAgIHNpZ246IE9iamVjdC5rZXlzKHpvZGlhY1N5bWJvbHMpW2kgJSAxMl0gYXMgWm9kaWFjU2lnbixcbiAgICBkZWdyZWU6IChpICogMzApICUgMzYwLFxuICAgIGN1c3A6IHRydWUsXG4gIH0pKVxuXG4gIC8vIEdlbmVyYXRlIHBsYWNlaG9sZGVyIGFuZ2xlc1xuICBjb25zdCBhbmdsZXMgPSB7XG4gICAgYXNjZW5kYW50OiB7IHNpZ246IFwiYXJpZXNcIiwgZGVncmVlOiAwIH0sXG4gICAgbWlkaGVhdmVuOiB7IHNpZ246IFwiY2Fwcmljb3JuXCIsIGRlZ3JlZTogMjcwIH0sXG4gICAgZGVzY2VuZGFudDogeyBzaWduOiBcImxpYnJhXCIsIGRlZ3JlZTogMTgwIH0sXG4gICAgaW11bUNvZWxpOiB7IHNpZ246IFwiY2FuY2VyXCIsIGRlZ3JlZTogOTAgfSxcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGxhbmV0cyxcbiAgICBob3VzZXMsXG4gICAgYW5nbGVzLFxuICAgIGFzcGVjdHM6IFtdLFxuICAgIGJpcnRoRGV0YWlsczoge1xuICAgICAgZGF0ZTogYmlydGhEYXRlLFxuICAgICAgdGltZTogYmlydGhUaW1lLFxuICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgbGF0aXR1ZGUsXG4gICAgICAgIGxvbmdpdHVkZSxcbiAgICAgICAgbmFtZTogXCJMb2NhdGlvbiBkYXRhIHVuYXZhaWxhYmxlXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbImZldGNoTmF0YWxDaGFydCIsImZldGNoTmF0YWxDaGFydEZyb21BUEkiLCJnZW9jb2RlTG9jYXRpb24iLCJnZW9jb2RlTG9jYXRpb25Gcm9tQVBJIiwiZ2V0TmF0YWxDaGFydEludGVycHJldGF0aW9uIiwiZ2V0SW50ZXJwcmV0YXRpb25Gcm9tQVBJIiwiZ2V0RGFpbHlIb3Jvc2NvcGUiLCJnZXREYWlseUhvcm9zY29wZUZyb21BUEkiLCJmZXRjaE5hdGFsV2hlZWxDaGFydFNWRyIsImZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHRnJvbUFQSSIsImJpcnRoRGF0ZSIsImJpcnRoVGltZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwidGltZXpvbmUiLCJNYXRoIiwicm91bmQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2NhdGlvblN0cmluZyIsInNpbXBsZUdlb2NvZGUiLCJnZXRTaW1wbGVHZW9jb2RpbmciLCJsb2ciLCJyZXN1bHQiLCJ3YXJuIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxvY2F0aW9uIiwib2siLCJkYXRhIiwianNvbiIsIm5hbWUiLCJmb3JjZUZhbGxiYWNrIiwibm9ybWFsaXplZElucHV0IiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiY2l0eUNvb3JkaW5hdGVzIiwiY2hpY2FnbyIsInRvcm9udG8iLCJsb25kb24iLCJwYXJpcyIsImJlcmxpbiIsIm1hZHJpZCIsInJvbWUiLCJhbXN0ZXJkYW0iLCJ2aWVubmEiLCJoYW1idXJnIiwidG9reW8iLCJiZWlqaW5nIiwibXVtYmFpIiwic2luZ2Fwb3JlIiwic3lkbmV5IiwibWVsYm91cm5lIiwiY2Fpcm8iLCJjaXR5IiwiY29vcmRpbmF0ZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJuYXRhbENoYXJ0Iiwic2lnbiIsInpvZGlhY1N5bWJvbHMiLCJhcmllcyIsInRhdXJ1cyIsImdlbWluaSIsImNhbmNlciIsImxlbyIsInZpcmdvIiwibGlicmEiLCJzY29ycGlvIiwic2FnaXR0YXJpdXMiLCJjYXByaWNvcm4iLCJhcXVhcml1cyIsInBpc2NlcyIsImNyZWF0ZVBsYWNlaG9sZGVyQ2hhcnQiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJzcGxpdCIsIm1hcCIsIk51bWJlciIsImhvdXIiLCJtaW51dGUiLCJwbGFuZXRzIiwiZGVncmVlIiwiaG91c2UiLCJyZXRyb2dyYWRlIiwiaG91c2VzIiwiQXJyYXkiLCJmcm9tIiwiXyIsImkiLCJudW1iZXIiLCJrZXlzIiwiY3VzcCIsImFuZ2xlcyIsImFzY2VuZGFudCIsIm1pZGhlYXZlbiIsImRlc2NlbmRhbnQiLCJpbXVtQ29lbGkiLCJhc3BlY3RzIiwiYmlydGhEZXRhaWxzIiwiZGF0ZSIsInRpbWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./services/astrology-service.ts\n");

/***/ }),

/***/ "(ssr)/./utils/fallback-chart.ts":
/*!*********************************!*\
  !*** ./utils/fallback-chart.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFallbackChartSVG: () => (/* binding */ getFallbackChartSVG),\n/* harmony export */   getFallbackNatalChart: () => (/* binding */ getFallbackNatalChart),\n/* harmony export */   loadFallbackNatalChart: () => (/* binding */ loadFallbackNatalChart),\n/* harmony export */   preloadFallbackNatalChart: () => (/* binding */ preloadFallbackNatalChart),\n/* harmony export */   sanitizeSvg: () => (/* binding */ sanitizeSvg)\n/* harmony export */ });\n/* harmony import */ var _utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/safe-storage */ \"(ssr)/./utils/safe-storage.ts\");\n\nconst getFallbackChartSVG = ()=>{\n    return `<svg \n    xmlns=\"http://www.w3.org/2000/svg\" \n    viewBox=\"0 0 800 800\" \n    width=\"100%\" \n    height=\"100%\"\n  >\n    <!-- Outer circle -->\n    <circle cx=\"400\" cy=\"400\" r=\"350\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" />\n    \n    <!-- Inner circle -->\n    <circle cx=\"400\" cy=\"400\" r=\"300\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1\" />\n    \n    <!-- Zodiac divisions - 12 segments -->\n    ${Array.from({\n        length: 12\n    }).map((_, i)=>{\n        const angle = i * 30 * Math.PI / 180;\n        const x1 = 400 + 350 * Math.cos(angle);\n        const y1 = 400 + 350 * Math.sin(angle);\n        const x2 = 400 + 300 * Math.cos(angle);\n        const y2 = 400 + 300 * Math.sin(angle);\n        return `<line x1=\"${x1}\" y1=\"${y1}\" x2=\"${x2}\" y2=\"${y2}\" stroke=\"currentColor\" stroke-width=\"1\" />`;\n    }).join(\"\")}\n    \n    <!-- Zodiac symbols -->\n    ${[\n        {\n            symbol: \"\",\n            name: \"Aries\",\n            angle: 15\n        },\n        {\n            symbol: \"\",\n            name: \"Taurus\",\n            angle: 45\n        },\n        {\n            symbol: \"\",\n            name: \"Gemini\",\n            angle: 75\n        },\n        {\n            symbol: \"\",\n            name: \"Cancer\",\n            angle: 105\n        },\n        {\n            symbol: \"\",\n            name: \"Leo\",\n            angle: 135\n        },\n        {\n            symbol: \"\",\n            name: \"Virgo\",\n            angle: 165\n        },\n        {\n            symbol: \"\",\n            name: \"Libra\",\n            angle: 195\n        },\n        {\n            symbol: \"\",\n            name: \"Scorpio\",\n            angle: 225\n        },\n        {\n            symbol: \"\",\n            name: \"Sagittarius\",\n            angle: 255\n        },\n        {\n            symbol: \"\",\n            name: \"Capricorn\",\n            angle: 285\n        },\n        {\n            symbol: \"\",\n            name: \"Aquarius\",\n            angle: 315\n        },\n        {\n            symbol: \"\",\n            name: \"Pisces\",\n            angle: 345\n        }\n    ].map((sign)=>{\n        const angle = sign.angle * Math.PI / 180;\n        const x = 400 + 325 * Math.cos(angle);\n        const y = 400 + 325 * Math.sin(angle);\n        return `\n        <text \n          x=\"${x}\" \n          y=\"${y}\" \n          text-anchor=\"middle\" \n          dominant-baseline=\"middle\" \n          fill=\"currentColor\" \n          font-size=\"20\"\n          font-family=\"Arial, sans-serif\"\n        >\n          ${sign.symbol}\n        </text>\n      `;\n    }).join(\"\")}\n    \n    <!-- Center point -->\n    <circle cx=\"400\" cy=\"400\" r=\"5\" fill=\"currentColor\" />\n  </svg>`.trim();\n};\n// Keep the existing functions for backward compatibility\nfunction getFallbackNatalChart() {\n    return getFallbackChartSVG();\n}\nasync function loadFallbackNatalChart() {\n    // This function simulates loading the fallback chart.\n    return getFallbackChartSVG();\n}\nasync function preloadFallbackNatalChart() {\n    console.log(\"Preloading fallback natal chart\");\n    try {\n        // Try to load from public folder first\n        const response = await fetch(\"/images/fallback-natal-chart.svg\");\n        if (response.ok) {\n            const svgText = await response.text();\n            console.log(\"Preloaded SVG from public folder, length:\", svgText.length);\n            // Sanitize the SVG before storing\n            const sanitizedSvg = sanitizeSvg(svgText);\n            // Store in sessionStorage for quick access\n            (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__.safeSetSessionItem)(\"fallbackNatalChartSVG\", sanitizedSvg);\n        } else {\n            throw new Error(\"SVG file not found\");\n        }\n    } catch (error) {\n        console.log(\"Error preloading SVG, generating fallback:\", error);\n        // Generate fallback\n        const fallbackSvg = getFallbackChartSVG();\n        // Store in sessionStorage\n        (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__.safeSetSessionItem)(\"fallbackNatalChartSVG\", fallbackSvg);\n    }\n}\n// Helper function to sanitize SVG content\nfunction sanitizeSvg(svgContent) {\n    if (true) {\n        // Server-side - return as is\n        return svgContent;\n    }\n    try {\n        const parser = new DOMParser();\n        const svgDoc = parser.parseFromString(svgContent, \"image/svg+xml\");\n        const svgElement = svgDoc.documentElement;\n        // Fix invalid attributes - specifically the \"hidden\" attribute\n        const elementsWithHidden = svgElement.querySelectorAll(\"[hidden]\");\n        elementsWithHidden.forEach((el)=>{\n            const hiddenValue = el.getAttribute(\"hidden\");\n            if (hiddenValue === \"\" || hiddenValue === null) {\n                // Set a valid value for the hidden attribute\n                el.setAttribute(\"hidden\", \"true\");\n            }\n        });\n        return svgElement.outerHTML;\n    } catch (error) {\n        console.error(\"Error sanitizing SVG:\", error);\n        return svgContent;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLE9BQU9DLE9BQU87UUFDZFYsUUFBUUMsR0FBRyxDQUFDLDhDQUE4Q1M7UUFDMUQsb0JBQW9CO1FBQ3BCLE1BQU1DLGNBQWNyQztRQUNwQiwwQkFBMEI7UUFDMUJELHVFQUFrQkEsQ0FBQyx5QkFBeUJzQztJQUM5QztBQUNGO0FBRUEsMENBQTBDO0FBQ25DLFNBQVNILFlBQVlJLFVBQWtCO0lBQzVDLElBQUksSUFBNkIsRUFBRTtRQUNqQyw2QkFBNkI7UUFDN0IsT0FBT0E7SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNQyxTQUFTLElBQUlDO1FBQ25CLE1BQU1DLFNBQVNGLE9BQU9HLGVBQWUsQ0FBQ0osWUFBWTtRQUNsRCxNQUFNSyxhQUFhRixPQUFPRyxlQUFlO1FBRXpDLCtEQUErRDtRQUMvRCxNQUFNQyxxQkFBcUJGLFdBQVdHLGdCQUFnQixDQUFDO1FBQ3ZERCxtQkFBbUJFLE9BQU8sQ0FBQyxDQUFDQztZQUMxQixNQUFNQyxjQUFjRCxHQUFHRSxZQUFZLENBQUM7WUFDcEMsSUFBSUQsZ0JBQWdCLE1BQU1BLGdCQUFnQixNQUFNO2dCQUM5Qyw2Q0FBNkM7Z0JBQzdDRCxHQUFHRyxZQUFZLENBQUMsVUFBVTtZQUM1QjtRQUNGO1FBRUEsT0FBT1IsV0FBV1MsU0FBUztJQUM3QixFQUFFLE9BQU9oQixPQUFPO1FBQ2RWLFFBQVFVLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9FO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcmtvbm92YWtvdnNraS9Eb2N1bWVudHMvVmlzdWFsIENvZGUvQXN0cm9Cb29rL0FzdHJvQm9vay91dGlscy9mYWxsYmFjay1jaGFydC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzYWZlU2V0U2Vzc2lvbkl0ZW0gfSBmcm9tIFwiQC91dGlscy9zYWZlLXN0b3JhZ2VcIlxuXG5leHBvcnQgY29uc3QgZ2V0RmFsbGJhY2tDaGFydFNWRyA9ICgpID0+IHtcbiAgcmV0dXJuIGA8c3ZnIFxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBcbiAgICB2aWV3Qm94PVwiMCAwIDgwMCA4MDBcIiBcbiAgICB3aWR0aD1cIjEwMCVcIiBcbiAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgPlxuICAgIDwhLS0gT3V0ZXIgY2lyY2xlIC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCIzNTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiAvPlxuICAgIFxuICAgIDwhLS0gSW5uZXIgY2lyY2xlIC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCIzMDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjFcIiAvPlxuICAgIFxuICAgIDwhLS0gWm9kaWFjIGRpdmlzaW9ucyAtIDEyIHNlZ21lbnRzIC0tPlxuICAgICR7QXJyYXkuZnJvbSh7IGxlbmd0aDogMTIgfSlcbiAgICAgIC5tYXAoKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAqIDMwICogTWF0aC5QSSkgLyAxODBcbiAgICAgICAgY29uc3QgeDEgPSA0MDAgKyAzNTAgKiBNYXRoLmNvcyhhbmdsZSlcbiAgICAgICAgY29uc3QgeTEgPSA0MDAgKyAzNTAgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgY29uc3QgeDIgPSA0MDAgKyAzMDAgKiBNYXRoLmNvcyhhbmdsZSlcbiAgICAgICAgY29uc3QgeTIgPSA0MDAgKyAzMDAgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgcmV0dXJuIGA8bGluZSB4MT1cIiR7eDF9XCIgeTE9XCIke3kxfVwiIHgyPVwiJHt4Mn1cIiB5Mj1cIiR7eTJ9XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIC8+YFxuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpfVxuICAgIFxuICAgIDwhLS0gWm9kaWFjIHN5bWJvbHMgLS0+XG4gICAgJHtbXG4gICAgICB7IHN5bWJvbDogXCLimYhcIiwgbmFtZTogXCJBcmllc1wiLCBhbmdsZTogMTUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZiVwiLCBuYW1lOiBcIlRhdXJ1c1wiLCBhbmdsZTogNDUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZilwiLCBuYW1lOiBcIkdlbWluaVwiLCBhbmdsZTogNzUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZi1wiLCBuYW1lOiBcIkNhbmNlclwiLCBhbmdsZTogMTA1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimYxcIiwgbmFtZTogXCJMZW9cIiwgYW5nbGU6IDEzNSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmNXCIsIG5hbWU6IFwiVmlyZ29cIiwgYW5nbGU6IDE2NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmOXCIsIG5hbWU6IFwiTGlicmFcIiwgYW5nbGU6IDE5NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmPXCIsIG5hbWU6IFwiU2NvcnBpb1wiLCBhbmdsZTogMjI1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimZBcIiwgbmFtZTogXCJTYWdpdHRhcml1c1wiLCBhbmdsZTogMjU1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimZFcIiwgbmFtZTogXCJDYXByaWNvcm5cIiwgYW5nbGU6IDI4NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmSXCIsIG5hbWU6IFwiQXF1YXJpdXNcIiwgYW5nbGU6IDMxNSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmTXCIsIG5hbWU6IFwiUGlzY2VzXCIsIGFuZ2xlOiAzNDUgfSxcbiAgICBdXG4gICAgICAubWFwKChzaWduKSA9PiB7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gKHNpZ24uYW5nbGUgKiBNYXRoLlBJKSAvIDE4MFxuICAgICAgICBjb25zdCB4ID0gNDAwICsgMzI1ICogTWF0aC5jb3MoYW5nbGUpXG4gICAgICAgIGNvbnN0IHkgPSA0MDAgKyAzMjUgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPHRleHQgXG4gICAgICAgICAgeD1cIiR7eH1cIiBcbiAgICAgICAgICB5PVwiJHt5fVwiIFxuICAgICAgICAgIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgXG4gICAgICAgICAgZG9taW5hbnQtYmFzZWxpbmU9XCJtaWRkbGVcIiBcbiAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgZm9udC1zaXplPVwiMjBcIlxuICAgICAgICAgIGZvbnQtZmFtaWx5PVwiQXJpYWwsIHNhbnMtc2VyaWZcIlxuICAgICAgICA+XG4gICAgICAgICAgJHtzaWduLnN5bWJvbH1cbiAgICAgICAgPC90ZXh0PlxuICAgICAgYFxuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpfVxuICAgIFxuICAgIDwhLS0gQ2VudGVyIHBvaW50IC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCI1XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIC8+XG4gIDwvc3ZnPmAudHJpbSgpXG59XG5cbi8vIEtlZXAgdGhlIGV4aXN0aW5nIGZ1bmN0aW9ucyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZhbGxiYWNrTmF0YWxDaGFydCgpOiBzdHJpbmcge1xuICByZXR1cm4gZ2V0RmFsbGJhY2tDaGFydFNWRygpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRmFsbGJhY2tOYXRhbENoYXJ0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIFRoaXMgZnVuY3Rpb24gc2ltdWxhdGVzIGxvYWRpbmcgdGhlIGZhbGxiYWNrIGNoYXJ0LlxuICByZXR1cm4gZ2V0RmFsbGJhY2tDaGFydFNWRygpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVsb2FkRmFsbGJhY2tOYXRhbENoYXJ0KCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zb2xlLmxvZyhcIlByZWxvYWRpbmcgZmFsbGJhY2sgbmF0YWwgY2hhcnRcIilcbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gbG9hZCBmcm9tIHB1YmxpYyBmb2xkZXIgZmlyc3RcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2ltYWdlcy9mYWxsYmFjay1uYXRhbC1jaGFydC5zdmdcIilcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IHN2Z1RleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgIGNvbnNvbGUubG9nKFwiUHJlbG9hZGVkIFNWRyBmcm9tIHB1YmxpYyBmb2xkZXIsIGxlbmd0aDpcIiwgc3ZnVGV4dC5sZW5ndGgpXG5cbiAgICAgIC8vIFNhbml0aXplIHRoZSBTVkcgYmVmb3JlIHN0b3JpbmdcbiAgICAgIGNvbnN0IHNhbml0aXplZFN2ZyA9IHNhbml0aXplU3ZnKHN2Z1RleHQpXG5cbiAgICAgIC8vIFN0b3JlIGluIHNlc3Npb25TdG9yYWdlIGZvciBxdWljayBhY2Nlc3NcbiAgICAgIHNhZmVTZXRTZXNzaW9uSXRlbShcImZhbGxiYWNrTmF0YWxDaGFydFNWR1wiLCBzYW5pdGl6ZWRTdmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVkcgZmlsZSBub3QgZm91bmRcIilcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJFcnJvciBwcmVsb2FkaW5nIFNWRywgZ2VuZXJhdGluZyBmYWxsYmFjazpcIiwgZXJyb3IpXG4gICAgLy8gR2VuZXJhdGUgZmFsbGJhY2tcbiAgICBjb25zdCBmYWxsYmFja1N2ZyA9IGdldEZhbGxiYWNrQ2hhcnRTVkcoKVxuICAgIC8vIFN0b3JlIGluIHNlc3Npb25TdG9yYWdlXG4gICAgc2FmZVNldFNlc3Npb25JdGVtKFwiZmFsbGJhY2tOYXRhbENoYXJ0U1ZHXCIsIGZhbGxiYWNrU3ZnKTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2FuaXRpemUgU1ZHIGNvbnRlbnRcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVN2ZyhzdmdDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIFNlcnZlci1zaWRlIC0gcmV0dXJuIGFzIGlzXG4gICAgcmV0dXJuIHN2Z0NvbnRlbnRcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpXG4gICAgY29uc3Qgc3ZnRG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhzdmdDb250ZW50LCBcImltYWdlL3N2Zyt4bWxcIilcbiAgICBjb25zdCBzdmdFbGVtZW50ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudFxuXG4gICAgLy8gRml4IGludmFsaWQgYXR0cmlidXRlcyAtIHNwZWNpZmljYWxseSB0aGUgXCJoaWRkZW5cIiBhdHRyaWJ1dGVcbiAgICBjb25zdCBlbGVtZW50c1dpdGhIaWRkZW4gPSBzdmdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaGlkZGVuXVwiKVxuICAgIGVsZW1lbnRzV2l0aEhpZGRlbi5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgY29uc3QgaGlkZGVuVmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoXCJoaWRkZW5cIilcbiAgICAgIGlmIChoaWRkZW5WYWx1ZSA9PT0gXCJcIiB8fCBoaWRkZW5WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBTZXQgYSB2YWxpZCB2YWx1ZSBmb3IgdGhlIGhpZGRlbiBhdHRyaWJ1dGVcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiaGlkZGVuXCIsIFwidHJ1ZVwiKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gc3ZnRWxlbWVudC5vdXRlckhUTUxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2FuaXRpemluZyBTVkc6XCIsIGVycm9yKVxuICAgIHJldHVybiBzdmdDb250ZW50XG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbInNhZmVTZXRTZXNzaW9uSXRlbSIsImdldEZhbGxiYWNrQ2hhcnRTVkciLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJtYXAiLCJfIiwiaSIsImFuZ2xlIiwiTWF0aCIsIlBJIiwieDEiLCJjb3MiLCJ5MSIsInNpbiIsIngyIiwieTIiLCJqb2luIiwic3ltYm9sIiwibmFtZSIsInNpZ24iLCJ4IiwieSIsInRyaW0iLCJnZXRGYWxsYmFja05hdGFsQ2hhcnQiLCJsb2FkRmFsbGJhY2tOYXRhbENoYXJ0IiwicHJlbG9hZEZhbGxiYWNrTmF0YWxDaGFydCIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzdmdUZXh0IiwidGV4dCIsInNhbml0aXplZFN2ZyIsInNhbml0aXplU3ZnIiwiRXJyb3IiLCJlcnJvciIsImZhbGxiYWNrU3ZnIiwic3ZnQ29udGVudCIsInBhcnNlciIsIkRPTVBhcnNlciIsInN2Z0RvYyIsInBhcnNlRnJvbVN0cmluZyIsInN2Z0VsZW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJlbGVtZW50c1dpdGhIaWRkZW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsIiwiaGlkZGVuVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJvdXRlckhUTUwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./utils/fallback-chart.ts\n");

/***/ })

};
;