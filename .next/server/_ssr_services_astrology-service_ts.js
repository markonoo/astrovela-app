"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_services_astrology-service_ts";
exports.ids = ["_ssr_services_astrology-service_ts"];
exports.modules = {

/***/ "(ssr)/./services/astrology-api-service.ts":
/*!*******************************************!*\
  !*** ./services/astrology-api-service.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAuthErrors: () => (/* binding */ clearAuthErrors),\n/* harmony export */   fetchNatalChart: () => (/* binding */ fetchNatalChart),\n/* harmony export */   fetchNatalWheelChart: () => (/* binding */ fetchNatalWheelChart),\n/* harmony export */   fetchNatalWheelChartSVG: () => (/* binding */ fetchNatalWheelChartSVG),\n/* harmony export */   geocodeLocation: () => (/* binding */ geocodeLocation),\n/* harmony export */   getDailyHoroscope: () => (/* binding */ getDailyHoroscope),\n/* harmony export */   getNatalChartInterpretation: () => (/* binding */ getNatalChartInterpretation)\n/* harmony export */ });\n/* harmony import */ var _utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/fallback-chart */ \"(ssr)/./utils/fallback-chart.ts\");\n/* harmony import */ var _utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/safe-storage */ \"(ssr)/./utils/safe-storage.ts\");\n/**\n * AstrologyAPI Service\n * Handles all interactions with the astrologyapi.com API\n */ \n\n// API configuration - using the provided credentials\nconst USER_ID = process.env.USER_ID || \"640668\";\nconst API_KEY = process.env.API_KEY || \"f54e96a1b5d0607f65433e754ae9a4f94fa5a9f8\";\nconst ASTROLOGY_API_BASE_URL = \"https://json.astrologyapi.com/v1\";\n// Check if API credentials are properly configured\nconst hasValidCredentials = ()=>{\n    const hasCredentials = USER_ID && API_KEY && USER_ID.length > 0 && API_KEY.length > 0;\n    console.log(\"Debug - Has Valid Credentials:\", hasCredentials);\n    console.log(\"Debug - User ID Length:\", USER_ID.length);\n    console.log(\"Debug - API Key Length:\", API_KEY.length);\n    return hasCredentials;\n};\n// Store authentication error status in session storage to avoid repeated failed attempts\nconst setAuthError = (hasError)=>{\n    (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeSetSessionItem)(\"astrology_api_auth_error\", hasError ? \"true\" : \"false\");\n    console.log(\"Debug - Set Auth Error:\", hasError);\n};\n// Check if we've already encountered an authentication error\nconst hasAuthError = ()=>{\n    const hasError = (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeGetSessionItem)(\"astrology_api_auth_error\") === \"true\";\n    console.log(\"Debug - Has Auth Error:\", hasError);\n    return hasError;\n};\n// Clear any stored authentication errors\nconst clearAuthErrors = ()=>{\n    (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_1__.safeRemoveSessionItem)(\"astrology_api_auth_error\");\n    console.log(\"Debug - Cleared Auth Errors\");\n};\n/**\n * Creates Basic Auth headers for API requests\n * Implements the same approach as the successful Python example\n */ const getAuthHeaders = ()=>{\n    try {\n        // Create the auth string in the format \"userId:apiKey\"\n        const authString = `${USER_ID}:${API_KEY}`;\n        console.log(\"Debug - Auth String Format:\", `${USER_ID}:API_KEY`);\n        // Encode to base64 - similar to Python's HTTPBasicAuth\n        let base64Auth = \"\";\n        if (false) {} else if (typeof Buffer !== \"undefined\") {\n            base64Auth = Buffer.from(authString).toString(\"base64\");\n            console.log(\"Debug - Using Buffer for encoding\");\n        } else {\n            console.error(\"Debug - No method available for base64 encoding\");\n            throw new Error(\"Base64 encoding not available\");\n        }\n        console.log(\"Debug - Base64 Auth (first 10 chars):\", base64Auth.substring(0, 10) + \"...\");\n        // Return headers with Basic Auth\n        return {\n            Authorization: `Basic ${base64Auth}`,\n            \"Content-Type\": \"application/json\"\n        };\n    } catch (error) {\n        console.error(\"Error creating auth headers:\", error);\n        return {\n            \"Content-Type\": \"application/json\",\n            \"Authorization\": \"\"\n        };\n    }\n};\n/**\n * Fetches natal chart data from AstrologyAPI\n */ async function fetchNatalChart(birthDate, birthTime, latitude, longitude, timezone = 5.5) {\n    try {\n        // Check for previous auth errors to avoid repeated failed API calls\n        if (hasAuthError()) {\n            console.warn(\"Skipping API call due to previous authentication error\");\n            throw new Error(\"API authentication error - using fallback data\");\n        }\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        // Format date and time for API\n        const [year, month, day] = birthDate.split(\"-\").map(Number);\n        const [hour, minute] = birthTime.split(\":\").map(Number);\n        // Prepare the request body\n        const requestBody = {\n            day,\n            month,\n            year,\n            hour,\n            min: minute,\n            lat: latitude,\n            lon: longitude,\n            tzone: timezone\n        };\n        console.log(\"Fetching natal chart with params:\", requestBody);\n        console.log(\"Using auth headers:\", getAuthHeaders());\n        // Make the API request for planets\n        const planetsResponse = await fetch(`${ASTROLOGY_API_BASE_URL}/planets`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        // Parse the response even if status is not OK to check for auth errors\n        const planetsData = await planetsResponse.json();\n        // Check for authentication error in response\n        if (planetsData.status === false && planetsData.msg) {\n            console.error(\"API error:\", planetsData.msg);\n            // Check if it's an authentication error\n            if (planetsData.msg.includes(\"invalid\") || planetsData.msg.includes(\"User ID\")) {\n                setAuthError(true);\n            }\n            throw new Error(planetsData.msg);\n        }\n        if (!planetsResponse.ok) {\n            throw new Error(`Planets API error: ${planetsResponse.status} ${planetsResponse.statusText}`);\n        }\n        // Fetch houses data\n        const housesResponse = await fetch(`${ASTROLOGY_API_BASE_URL}/houses`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        const housesData = await housesResponse.json();\n        if (housesData.status === false && housesData.msg) {\n            throw new Error(housesData.msg);\n        }\n        if (!housesResponse.ok) {\n            throw new Error(`Houses API error: ${housesResponse.status} ${housesResponse.statusText}`);\n        }\n        // Fetch aspects data\n        const aspectsResponse = await fetch(`${ASTROLOGY_API_BASE_URL}/aspects`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify(requestBody)\n        });\n        let aspectsData = [];\n        if (aspectsResponse.ok) {\n            aspectsData = await aspectsResponse.json();\n        }\n        // Format the data into our application's structure\n        return formatNatalChartResponse(planetsData, housesData, aspectsData, {\n            date: birthDate,\n            time: birthTime,\n            location: {\n                latitude,\n                longitude,\n                name: \"\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error fetching natal chart:\", error);\n        throw error;\n    }\n}\n/**\n * Fetches natal wheel chart from AstrologyAPI\n * Updated to handle the new response format that returns a chart URL\n */ async function fetchNatalWheelChart(birthDate, birthTime, latitude, longitude, timezone = 5.5, sign_icon_color = \"WHITE\", sign_background = [\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\",\n    \"clear\"\n]) {\n    try {\n        console.log(\"Debug - fetchNatalWheelChart called with:\", {\n            birthDate,\n            birthTime,\n            latitude,\n            longitude,\n            timezone\n        });\n        // Check for previous auth errors to avoid repeated failed API calls\n        if (hasAuthError()) {\n            console.warn(\"Skipping API call due to previous authentication error\");\n            // Use the general fallback SVG for other charts\n            return {\n                chartUrl: \"\",\n                svgContent: (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)()\n            };\n        }\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            console.warn(\"Missing API credentials for AstrologyAPI\");\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        // Format date and time for API\n        const [year, month, day] = birthDate.split(\"-\").map(Number);\n        const [hour, minute] = birthTime.split(\":\").map(Number);\n        // Prepare the request body\n        const requestBody = {\n            day,\n            month,\n            year,\n            hour,\n            min: minute,\n            lat: latitude,\n            lon: longitude,\n            tzone: timezone,\n            planet_icon_color: \"Black\",\n            sign_icon_color: \"Black\",\n            sign_background: [\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\",\n                \"#F4FAFC\"\n            ],\n            inner_circle_background: \"#F4FAFC\",\n            outer_circle_background: \"#F4FAFC\",\n            chart_size: 1000,\n            image_type: \"svg\"\n        };\n        console.log(\"Debug - Request Body:\", requestBody);\n        // Get auth headers\n        const headers = getAuthHeaders();\n        console.log(\"Debug - Headers:\", {\n            Authorization: headers.Authorization ? \"Basic ***\" : \"Missing\",\n            \"Content-Type\": headers[\"Content-Type\"]\n        });\n        // Make the API request\n        console.log(\"Debug - Fetching from URL:\", `${ASTROLOGY_API_BASE_URL}/natal_wheel_chart`);\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/natal_wheel_chart`, {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify(requestBody)\n        });\n        // Log the response status for debugging\n        console.log(`Debug - API Response Status: ${response.status} ${response.statusText}`);\n        // Get the raw response text first for debugging\n        const rawResponseText = await response.text();\n        console.log(\"Debug - Raw Response (first 200 chars):\", rawResponseText.substring(0, 200));\n        // Try to parse the response as JSON\n        let data;\n        try {\n            data = JSON.parse(rawResponseText);\n            console.log(\"Debug - Response Keys:\", Object.keys(data));\n        } catch (e) {\n            console.error(\"Debug - Failed to parse response as JSON:\", e);\n            throw new Error(`Failed to parse API response as JSON: ${rawResponseText.substring(0, 100)}...`);\n        }\n        // Check for error in response\n        if (data.status === false && data.msg) {\n            console.error(\"API error:\", data.msg);\n            // Check if it's an authentication error\n            if (data.msg.includes(\"invalid\") || data.msg.includes(\"User ID\")) {\n                setAuthError(true);\n            }\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Natal wheel chart API error: ${response.status} ${response.statusText}`);\n        }\n        // Check if we have the chart_url in the response\n        if (data.chart_url) {\n            console.log(\"Debug - Successfully retrieved chart URL:\", data.chart_url);\n            // Clear any stored auth errors since the request succeeded\n            clearAuthErrors();\n            return {\n                chartUrl: data.chart_url\n            };\n        } else if (data.svg) {\n            console.log(\"Debug - Retrieved SVG content instead of URL, length:\", data.svg.length);\n            // Clear any stored auth errors since the request succeeded\n            clearAuthErrors();\n            return {\n                chartUrl: \"\",\n                svgContent: data.svg\n            };\n        } else {\n            console.error(\"API response missing chart_url and svg data:\", data);\n            throw new Error(\"No chart data returned from the API\");\n        }\n    } catch (error) {\n        console.error(\"Error fetching natal wheel chart:\", error);\n        // Use the general fallback SVG for other charts\n        return {\n            chartUrl: \"\",\n            svgContent: (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)()\n        };\n    }\n}\n// Keep the old function for backward compatibility\nasync function fetchNatalWheelChartSVG(birthDate, birthTime, latitude, longitude, timezone = 5.5) {\n    try {\n        const result = await fetchNatalWheelChart(birthDate, birthTime, latitude, longitude, timezone);\n        // If we have SVG content, return it\n        if (result.svgContent) {\n            return result.svgContent;\n        }\n        // If we have a chart URL, fetch the SVG content\n        if (result.chartUrl) {\n            console.log(\"Debug - Fetching SVG content from URL:\", result.chartUrl);\n            try {\n                const svgResponse = await fetch(result.chartUrl);\n                if (!svgResponse.ok) {\n                    throw new Error(`Failed to fetch SVG from URL: ${svgResponse.status} ${svgResponse.statusText}`);\n                }\n                const svgContent = await svgResponse.text();\n                console.log(\"Debug - Successfully fetched SVG content, length:\", svgContent.length);\n                return svgContent;\n            } catch (error) {\n                console.error(\"Error fetching SVG from URL:\", error);\n                // Return fallback SVG if we can't fetch from URL\n                return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n            }\n        }\n        // Return fallback SVG if no chart data available\n        return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n    } catch (error) {\n        console.error(\"Error in fetchNatalWheelChartSVG:\", error);\n        // Return fallback SVG for other charts\n        return (0,_utils_fallback_chart__WEBPACK_IMPORTED_MODULE_0__.getFallbackNatalChart)();\n    }\n}\n/**\n * Geocodes a location string to get latitude and longitude using AstrologyAPI\n */ async function geocodeLocation(location) {\n    try {\n        console.log(\"Geocoding location:\", location);\n        if (!hasValidCredentials()) {\n            console.warn(\"Missing API credentials for AstrologyAPI\");\n            setAuthError(true);\n            throw new Error(\"API credentials not configured\");\n        }\n        const headers = getAuthHeaders();\n        console.log(\"Using auth headers:\", headers);\n        // Use GET, not POST\n        const url = `${ASTROLOGY_API_BASE_URL}/geo_details?place=${encodeURIComponent(location)}`;\n        const response = await fetch(url, {\n            method: \"GET\",\n            headers\n        });\n        if (!response.ok) {\n            console.error(\"Geocoding API error:\", response.status);\n            throw new Error(`Geocoding API error: ${response.status}`);\n        }\n        const data = await response.json();\n        if (!data || !data.latitude || !data.longitude) {\n            console.error(\"Invalid geocoding response:\", data);\n            throw new Error(\"Invalid geocoding response\");\n        }\n        return {\n            latitude: data.latitude,\n            longitude: data.longitude,\n            name: data.name || location\n        };\n    } catch (error) {\n        console.error(\"Error geocoding location:\", error);\n        // Fallback: Las Vegas\n        return {\n            latitude: 36.1699,\n            longitude: -115.1398,\n            name: location\n        };\n    }\n}\n/**\n * Formats the API response into our application's data structure\n */ function formatNatalChartResponse(planetsData, housesData, aspectsData, birthDetails) {\n    // Extract and format planet positions\n    const planets = planetsData.map((planet)=>{\n        // Convert planet name to our format\n        const planetName = convertPlanetName(planet.name);\n        return {\n            name: planetName,\n            sign: planet.sign.toLowerCase(),\n            degree: planet.norm_degree,\n            house: planet.house,\n            retrograde: planet.is_retrograde === 1,\n            aspectsToOtherPlanets: []\n        };\n    });\n    // Extract and format houses\n    const houses = Object.keys(housesData).map((key)=>{\n        const house = housesData[key];\n        return {\n            number: Number.parseInt(key.replace(\"house\", \"\")),\n            sign: house.sign.toLowerCase(),\n            degree: house.degree,\n            cusp: true\n        };\n    });\n    // Extract and format angles (Ascendant, Midheaven, etc.)\n    const angles = {\n        ascendant: {\n            sign: housesData.ascendant.sign.toLowerCase(),\n            degree: housesData.ascendant.degree\n        },\n        midheaven: {\n            sign: housesData.midheaven.sign.toLowerCase(),\n            degree: housesData.midheaven.degree\n        },\n        descendant: {\n            sign: getOppositeSign(housesData.ascendant.sign.toLowerCase()),\n            degree: (housesData.ascendant.degree + 180) % 360\n        },\n        imumCoeli: {\n            sign: getOppositeSign(housesData.midheaven.sign.toLowerCase()),\n            degree: (housesData.midheaven.degree + 180) % 360\n        }\n    };\n    // Format aspects data\n    const aspects = aspectsData.map((aspect)=>({\n            aspect: aspect.aspect.toLowerCase(),\n            planet1: convertPlanetName(aspect.planet1),\n            planet2: convertPlanetName(aspect.planet2),\n            orb: aspect.orb,\n            applying: aspect.applying === 1\n        }));\n    return {\n        planets,\n        houses,\n        angles,\n        aspects,\n        birthDetails\n    };\n}\n/**\n * Converts AstrologyAPI planet names to our application's format\n */ function convertPlanetName(apiPlanetName) {\n    const planetMap = {\n        Sun: \"sun\",\n        Moon: \"moon\",\n        Mercury: \"mercury\",\n        Venus: \"venus\",\n        Mars: \"mars\",\n        Jupiter: \"jupiter\",\n        Saturn: \"saturn\",\n        Uranus: \"uranus\",\n        Neptune: \"neptune\",\n        Pluto: \"pluto\",\n        Rahu: \"north_node\",\n        Ketu: \"south_node\"\n    };\n    return planetMap[apiPlanetName] || apiPlanetName.toLowerCase();\n}\n/**\n * Gets the opposite zodiac sign\n */ function getOppositeSign(sign) {\n    const zodiacSigns = [\n        \"aries\",\n        \"taurus\",\n        \"gemini\",\n        \"cancer\",\n        \"leo\",\n        \"virgo\",\n        \"libra\",\n        \"scorpio\",\n        \"sagittarius\",\n        \"capricorn\",\n        \"aquarius\",\n        \"pisces\"\n    ];\n    const index = zodiacSigns.indexOf(sign);\n    if (index === -1) return \"aries\" // Default fallback\n    ;\n    const oppositeIndex = (index + 6) % 12;\n    return zodiacSigns[oppositeIndex];\n}\n/**\n * Gets interpretations for a natal chart\n */ async function getNatalChartInterpretation(natalChart) {\n    try {\n        // This would be implemented to fetch interpretations from AstrologyAPI\n        // For now, we'll return a placeholder interpretation\n        return {\n            overview: {\n                title: \"Your Cosmic Blueprint\",\n                description: \"Your natal chart reveals your unique cosmic blueprint, showing the positions of the planets at the moment of your birth. This celestial snapshot offers insights into your personality, strengths, challenges, and life path.\"\n            },\n            sunSign: {\n                title: \"Sun Sign\",\n                description: \"Your Sun sign represents your core essence and life purpose.\",\n                keywords: [\n                    \"identity\",\n                    \"purpose\",\n                    \"vitality\"\n                ]\n            },\n            moonSign: {\n                title: \"Moon Sign\",\n                description: \"Your Moon sign reflects your emotional nature and subconscious patterns.\",\n                keywords: [\n                    \"emotions\",\n                    \"instincts\",\n                    \"comfort\"\n                ]\n            },\n            ascendantSign: {\n                title: \"Ascendant\",\n                description: \"Your Ascendant represents how you present yourself to the world.\",\n                keywords: [\n                    \"appearance\",\n                    \"first impressions\",\n                    \"personal style\"\n                ]\n            },\n            planetPositions: {\n                sun: {\n                    description: \"Your Sun placement indicates your core identity and purpose in life.\",\n                    keywords: [\n                        \"identity\",\n                        \"purpose\",\n                        \"vitality\"\n                    ]\n                },\n                moon: {\n                    description: \"Your Moon placement reveals your emotional nature and subconscious patterns.\",\n                    keywords: [\n                        \"emotions\",\n                        \"instincts\",\n                        \"comfort\"\n                    ]\n                },\n                mercury: {\n                    description: \"Your Mercury placement shows how you think and communicate.\",\n                    keywords: [\n                        \"communication\",\n                        \"thinking\",\n                        \"learning\"\n                    ]\n                },\n                venus: {\n                    description: \"Your Venus placement indicates how you express and receive love and beauty.\",\n                    keywords: [\n                        \"love\",\n                        \"beauty\",\n                        \"values\"\n                    ]\n                },\n                mars: {\n                    description: \"Your Mars placement shows how you assert yourself and take action.\",\n                    keywords: [\n                        \"action\",\n                        \"desire\",\n                        \"energy\"\n                    ]\n                },\n                jupiter: {\n                    description: \"Your Jupiter placement reveals where you find growth and expansion.\",\n                    keywords: [\n                        \"growth\",\n                        \"luck\",\n                        \"abundance\"\n                    ]\n                },\n                saturn: {\n                    description: \"Your Saturn placement indicates where you face challenges and learn discipline.\",\n                    keywords: [\n                        \"discipline\",\n                        \"responsibility\",\n                        \"structure\"\n                    ]\n                },\n                uranus: {\n                    description: \"Your Uranus placement shows where you seek freedom and innovation.\",\n                    keywords: [\n                        \"innovation\",\n                        \"rebellion\",\n                        \"change\"\n                    ]\n                },\n                neptune: {\n                    description: \"Your Neptune placement reveals your spiritual and creative aspirations.\",\n                    keywords: [\n                        \"spirituality\",\n                        \"dreams\",\n                        \"illusion\"\n                    ]\n                },\n                pluto: {\n                    description: \"Your Pluto placement indicates where you experience transformation and power.\",\n                    keywords: [\n                        \"transformation\",\n                        \"power\",\n                        \"rebirth\"\n                    ]\n                }\n            },\n            houses: {\n                1: {\n                    description: \"The 1st house represents your self-image and how you present yourself to the world.\"\n                },\n                2: {\n                    description: \"The 2nd house represents your values, possessions, and resources.\"\n                },\n                3: {\n                    description: \"The 3rd house represents communication, learning, and your immediate environment.\"\n                },\n                4: {\n                    description: \"The 4th house represents your home, family, and emotional foundations.\"\n                },\n                5: {\n                    description: \"The 5th house represents creativity, pleasure, and self-expression.\"\n                },\n                6: {\n                    description: \"The 6th house represents work, health, and daily routines.\"\n                },\n                7: {\n                    description: \"The 7th house represents partnerships, relationships, and open enemies.\"\n                },\n                8: {\n                    description: \"The 8th house represents transformation, shared resources, and the occult.\"\n                },\n                9: {\n                    description: \"The 9th house represents higher education, philosophy, and long-distance travel.\"\n                },\n                10: {\n                    description: \"The 10th house represents career, public image, and authority.\"\n                },\n                11: {\n                    description: \"The 11th house represents friendships, groups, and aspirations.\"\n                },\n                12: {\n                    description: \"The 12th house represents the unconscious, spirituality, and hidden enemies.\"\n                }\n            }\n        };\n    } catch (error) {\n        console.error(\"Error getting chart interpretation:\", error);\n        throw error;\n    }\n}\n/**\n * Gets a daily horoscope for a zodiac sign\n */ async function getDailyHoroscope(sign) {\n    try {\n        // Check credentials first\n        if (!hasValidCredentials()) {\n            throw new Error(\"API credentials not configured\");\n        }\n        // Make the API request\n        const response = await fetch(`${ASTROLOGY_API_BASE_URL}/horoscope_prediction/daily/${sign}`, {\n            method: \"POST\",\n            headers: getAuthHeaders(),\n            body: JSON.stringify({})\n        });\n        const data = await response.json();\n        // Check for error in response\n        if (data.status === false && data.msg) {\n            throw new Error(data.msg);\n        }\n        if (!response.ok) {\n            throw new Error(`Horoscope error: ${response.status} ${response.statusText}`);\n        }\n        // Format the response to match our application's structure\n        return {\n            sign: sign,\n            date: new Date().toISOString().split(\"T\")[0],\n            prediction: data.prediction || \"Your horoscope for today is not available.\",\n            lucky_number: data.lucky_number || \"7\",\n            lucky_color: data.lucky_color || \"Blue\",\n            mood: data.mood || \"Reflective\",\n            compatibility: data.compatibility || \"Libra\"\n        };\n    } catch (error) {\n        console.error(\"Error getting daily horoscope:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zZXJ2aWNlcy9hc3Ryb2xvZ3ktYXBpLXNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRzZEO0FBQ3NDO0FBRXBHLHFEQUFxRDtBQUNyRCxNQUFNSSxVQUFVQyxRQUFRQyxHQUFHLENBQUNGLE9BQU8sSUFBSTtBQUN2QyxNQUFNRyxVQUFVRixRQUFRQyxHQUFHLENBQUNDLE9BQU8sSUFBSTtBQUN2QyxNQUFNQyx5QkFBeUI7QUFFL0IsbURBQW1EO0FBQ25ELE1BQU1DLHNCQUFzQjtJQUMxQixNQUFNQyxpQkFBaUJOLFdBQVdHLFdBQVdILFFBQVFPLE1BQU0sR0FBRyxLQUFLSixRQUFRSSxNQUFNLEdBQUc7SUFFcEZDLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NIO0lBQzlDRSxRQUFRQyxHQUFHLENBQUMsMkJBQTJCVCxRQUFRTyxNQUFNO0lBQ3JEQyxRQUFRQyxHQUFHLENBQUMsMkJBQTJCTixRQUFRSSxNQUFNO0lBRXJELE9BQU9EO0FBQ1Q7QUFFQSx5RkFBeUY7QUFDekYsTUFBTUksZUFBZSxDQUFDQztJQUNwQmIsdUVBQWtCQSxDQUFDLDRCQUE0QmEsV0FBVyxTQUFTO0lBQ25FSCxRQUFRQyxHQUFHLENBQUMsMkJBQTJCRTtBQUN6QztBQUVBLDZEQUE2RDtBQUM3RCxNQUFNQyxlQUFlO0lBQ25CLE1BQU1ELFdBQVdkLHVFQUFrQkEsQ0FBQyxnQ0FBZ0M7SUFDcEVXLFFBQVFDLEdBQUcsQ0FBQywyQkFBMkJFO0lBQ3ZDLE9BQU9BO0FBQ1Q7QUFFQSx5Q0FBeUM7QUFDbEMsTUFBTUUsa0JBQWtCO0lBQzdCZCwwRUFBcUJBLENBQUM7SUFDdEJTLFFBQVFDLEdBQUcsQ0FBQztBQUNkLEVBQUM7QUFFRDs7O0NBR0MsR0FDRCxNQUFNSyxpQkFBaUI7SUFDckIsSUFBSTtRQUNGLHVEQUF1RDtRQUN2RCxNQUFNQyxhQUFhLEdBQUdmLFFBQVEsQ0FBQyxFQUFFRyxTQUFTO1FBQzFDSyxRQUFRQyxHQUFHLENBQUMsK0JB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QyxJQUFJLENBQUMsRUFBRTtZQUM1Q21JLFlBQVlyRixLQUFLcUYsVUFBVSxJQUFJO1lBQy9CQyxjQUFjdEYsS0FBS3NGLFlBQVksSUFBSTtZQUNuQ0MsYUFBYXZGLEtBQUt1RixXQUFXLElBQUk7WUFDakNDLE1BQU14RixLQUFLd0YsSUFBSSxJQUFJO1lBQ25CQyxlQUFlekYsS0FBS3lGLGFBQWEsSUFBSTtRQUN2QztJQUNGLEVBQUUsT0FBT3JKLE9BQU87UUFDZGQsUUFBUWMsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFya29ub3Zha292c2tpL0RvY3VtZW50cy9WaXN1YWwgQ29kZS9Bc3Ryb0Jvb2svQXN0cm9Cb29rL3NlcnZpY2VzL2FzdHJvbG9neS1hcGktc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFzdHJvbG9neUFQSSBTZXJ2aWNlXG4gKiBIYW5kbGVzIGFsbCBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgYXN0cm9sb2d5YXBpLmNvbSBBUElcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IE5hdGFsQ2hhcnQsIFBsYW5ldFBvc2l0aW9uLCBab2RpYWNTaWduLCBIb3VzZSwgQW5nbGUgfSBmcm9tIFwiQC90eXBlcy9hc3Ryb2xvZ3lcIlxuaW1wb3J0IHsgZ2V0RmFsbGJhY2tOYXRhbENoYXJ0IH0gZnJvbSBcIkAvdXRpbHMvZmFsbGJhY2stY2hhcnRcIlxuaW1wb3J0IHsgc2FmZUdldFNlc3Npb25JdGVtLCBzYWZlU2V0U2Vzc2lvbkl0ZW0sIHNhZmVSZW1vdmVTZXNzaW9uSXRlbSB9IGZyb20gXCJAL3V0aWxzL3NhZmUtc3RvcmFnZVwiXG5cbi8vIEFQSSBjb25maWd1cmF0aW9uIC0gdXNpbmcgdGhlIHByb3ZpZGVkIGNyZWRlbnRpYWxzXG5jb25zdCBVU0VSX0lEID0gcHJvY2Vzcy5lbnYuVVNFUl9JRCB8fCBcIjY0MDY2OFwiXG5jb25zdCBBUElfS0VZID0gcHJvY2Vzcy5lbnYuQVBJX0tFWSB8fCBcImY1NGU5NmExYjVkMDYwN2Y2NTQzM2U3NTRhZTlhNGY5NGZhNWE5ZjhcIlxuY29uc3QgQVNUUk9MT0dZX0FQSV9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9qc29uLmFzdHJvbG9neWFwaS5jb20vdjFcIlxuXG4vLyBDaGVjayBpZiBBUEkgY3JlZGVudGlhbHMgYXJlIHByb3Blcmx5IGNvbmZpZ3VyZWRcbmNvbnN0IGhhc1ZhbGlkQ3JlZGVudGlhbHMgPSAoKSA9PiB7XG4gIGNvbnN0IGhhc0NyZWRlbnRpYWxzID0gVVNFUl9JRCAmJiBBUElfS0VZICYmIFVTRVJfSUQubGVuZ3RoID4gMCAmJiBBUElfS0VZLmxlbmd0aCA+IDBcblxuICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gSGFzIFZhbGlkIENyZWRlbnRpYWxzOlwiLCBoYXNDcmVkZW50aWFscylcbiAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFVzZXIgSUQgTGVuZ3RoOlwiLCBVU0VSX0lELmxlbmd0aClcbiAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIEFQSSBLZXkgTGVuZ3RoOlwiLCBBUElfS0VZLmxlbmd0aClcblxuICByZXR1cm4gaGFzQ3JlZGVudGlhbHNcbn1cblxuLy8gU3RvcmUgYXV0aGVudGljYXRpb24gZXJyb3Igc3RhdHVzIGluIHNlc3Npb24gc3RvcmFnZSB0byBhdm9pZCByZXBlYXRlZCBmYWlsZWQgYXR0ZW1wdHNcbmNvbnN0IHNldEF1dGhFcnJvciA9IChoYXNFcnJvcjogYm9vbGVhbikgPT4ge1xuICBzYWZlU2V0U2Vzc2lvbkl0ZW0oXCJhc3Ryb2xvZ3lfYXBpX2F1dGhfZXJyb3JcIiwgaGFzRXJyb3IgPyBcInRydWVcIiA6IFwiZmFsc2VcIik7XG4gIGNvbnNvbGUubG9nKFwiRGVidWcgLSBTZXQgQXV0aCBFcnJvcjpcIiwgaGFzRXJyb3IpO1xufVxuXG4vLyBDaGVjayBpZiB3ZSd2ZSBhbHJlYWR5IGVuY291bnRlcmVkIGFuIGF1dGhlbnRpY2F0aW9uIGVycm9yXG5jb25zdCBoYXNBdXRoRXJyb3IgPSAoKTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGhhc0Vycm9yID0gc2FmZUdldFNlc3Npb25JdGVtKFwiYXN0cm9sb2d5X2FwaV9hdXRoX2Vycm9yXCIpID09PSBcInRydWVcIjtcbiAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIEhhcyBBdXRoIEVycm9yOlwiLCBoYXNFcnJvcik7XG4gIHJldHVybiBoYXNFcnJvcjtcbn1cblxuLy8gQ2xlYXIgYW55IHN0b3JlZCBhdXRoZW50aWNhdGlvbiBlcnJvcnNcbmV4cG9ydCBjb25zdCBjbGVhckF1dGhFcnJvcnMgPSAoKSA9PiB7XG4gIHNhZmVSZW1vdmVTZXNzaW9uSXRlbShcImFzdHJvbG9neV9hcGlfYXV0aF9lcnJvclwiKTtcbiAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIENsZWFyZWQgQXV0aCBFcnJvcnNcIik7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBCYXNpYyBBdXRoIGhlYWRlcnMgZm9yIEFQSSByZXF1ZXN0c1xuICogSW1wbGVtZW50cyB0aGUgc2FtZSBhcHByb2FjaCBhcyB0aGUgc3VjY2Vzc2Z1bCBQeXRob24gZXhhbXBsZVxuICovXG5jb25zdCBnZXRBdXRoSGVhZGVycyA9ICgpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBDcmVhdGUgdGhlIGF1dGggc3RyaW5nIGluIHRoZSBmb3JtYXQgXCJ1c2VySWQ6YXBpS2V5XCJcbiAgICBjb25zdCBhdXRoU3RyaW5nID0gYCR7VVNFUl9JRH06JHtBUElfS0VZfWBcbiAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gQXV0aCBTdHJpbmcgRm9ybWF0OlwiLCBgJHtVU0VSX0lEfTpBUElfS0VZYClcblxuICAgIC8vIEVuY29kZSB0byBiYXNlNjQgLSBzaW1pbGFyIHRvIFB5dGhvbidzIEhUVFBCYXNpY0F1dGhcbiAgICBsZXQgYmFzZTY0QXV0aCA9IFwiXCJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuYnRvYSkge1xuICAgICAgYmFzZTY0QXV0aCA9IHdpbmRvdy5idG9hKGF1dGhTdHJpbmcpXG4gICAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gVXNpbmcgd2luZG93LmJ0b2EgZm9yIGVuY29kaW5nXCIpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgQnVmZmVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICBiYXNlNjRBdXRoID0gQnVmZmVyLmZyb20oYXV0aFN0cmluZykudG9TdHJpbmcoXCJiYXNlNjRcIilcbiAgICAgIGNvbnNvbGUubG9nKFwiRGVidWcgLSBVc2luZyBCdWZmZXIgZm9yIGVuY29kaW5nXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZWJ1ZyAtIE5vIG1ldGhvZCBhdmFpbGFibGUgZm9yIGJhc2U2NCBlbmNvZGluZ1wiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmFzZTY0IGVuY29kaW5nIG5vdCBhdmFpbGFibGVcIilcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gQmFzZTY0IEF1dGggKGZpcnN0IDEwIGNoYXJzKTpcIiwgYmFzZTY0QXV0aC5zdWJzdHJpbmcoMCwgMTApICsgXCIuLi5cIilcblxuICAgIC8vIFJldHVybiBoZWFkZXJzIHdpdGggQmFzaWMgQXV0aFxuICAgIHJldHVybiB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtiYXNlNjRBdXRofWAsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWF0aW5nIGF1dGggaGVhZGVyczpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiXCIsIC8vIFJldHVybiBlbXB0eSBzdHJpbmcgaW5zdGVhZCBvZiB1bmRlZmluZWRcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIGNoYXJ0IGRhdGEgZnJvbSBBc3Ryb2xvZ3lBUElcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTmF0YWxDaGFydChcbiAgYmlydGhEYXRlOiBzdHJpbmcsXG4gIGJpcnRoVGltZTogc3RyaW5nLFxuICBsYXRpdHVkZTogbnVtYmVyLFxuICBsb25naXR1ZGU6IG51bWJlcixcbiAgdGltZXpvbmUgPSA1LjUsIC8vIERlZmF1bHQgdG8gSVNUXG4pOiBQcm9taXNlPE5hdGFsQ2hhcnQ+IHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBmb3IgcHJldmlvdXMgYXV0aCBlcnJvcnMgdG8gYXZvaWQgcmVwZWF0ZWQgZmFpbGVkIEFQSSBjYWxsc1xuICAgIGlmIChoYXNBdXRoRXJyb3IoKSkge1xuICAgICAgY29uc29sZS53YXJuKFwiU2tpcHBpbmcgQVBJIGNhbGwgZHVlIHRvIHByZXZpb3VzIGF1dGhlbnRpY2F0aW9uIGVycm9yXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgYXV0aGVudGljYXRpb24gZXJyb3IgLSB1c2luZyBmYWxsYmFjayBkYXRhXCIpXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgY3JlZGVudGlhbHMgZmlyc3RcbiAgICBpZiAoIWhhc1ZhbGlkQ3JlZGVudGlhbHMoKSkge1xuICAgICAgc2V0QXV0aEVycm9yKHRydWUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBUEkgY3JlZGVudGlhbHMgbm90IGNvbmZpZ3VyZWRcIilcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgZGF0ZSBhbmQgdGltZSBmb3IgQVBJXG4gICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gYmlydGhEYXRlLnNwbGl0KFwiLVwiKS5tYXAoTnVtYmVyKVxuICAgIGNvbnN0IFtob3VyLCBtaW51dGVdID0gYmlydGhUaW1lLnNwbGl0KFwiOlwiKS5tYXAoTnVtYmVyKVxuXG4gICAgLy8gUHJlcGFyZSB0aGUgcmVxdWVzdCBib2R5XG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICBkYXksXG4gICAgICBtb250aCxcbiAgICAgIHllYXIsXG4gICAgICBob3VyLFxuICAgICAgbWluOiBtaW51dGUsXG4gICAgICBsYXQ6IGxhdGl0dWRlLFxuICAgICAgbG9uOiBsb25naXR1ZGUsXG4gICAgICB0em9uZTogdGltZXpvbmUsXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJGZXRjaGluZyBuYXRhbCBjaGFydCB3aXRoIHBhcmFtczpcIiwgcmVxdWVzdEJvZHkpXG4gICAgY29uc29sZS5sb2coXCJVc2luZyBhdXRoIGhlYWRlcnM6XCIsIGdldEF1dGhIZWFkZXJzKCkpXG5cbiAgICAvLyBNYWtlIHRoZSBBUEkgcmVxdWVzdCBmb3IgcGxhbmV0c1xuICAgIGNvbnN0IHBsYW5ldHNSZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FTVFJPTE9HWV9BUElfQkFTRV9VUkx9L3BsYW5ldHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogZ2V0QXV0aEhlYWRlcnMoKSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICB9KVxuXG4gICAgLy8gUGFyc2UgdGhlIHJlc3BvbnNlIGV2ZW4gaWYgc3RhdHVzIGlzIG5vdCBPSyB0byBjaGVjayBmb3IgYXV0aCBlcnJvcnNcbiAgICBjb25zdCBwbGFuZXRzRGF0YSA9IGF3YWl0IHBsYW5ldHNSZXNwb25zZS5qc29uKClcblxuICAgIC8vIENoZWNrIGZvciBhdXRoZW50aWNhdGlvbiBlcnJvciBpbiByZXNwb25zZVxuICAgIGlmIChwbGFuZXRzRGF0YS5zdGF0dXMgPT09IGZhbHNlICYmIHBsYW5ldHNEYXRhLm1zZykge1xuICAgICAgY29uc29sZS5lcnJvcihcIkFQSSBlcnJvcjpcIiwgcGxhbmV0c0RhdGEubXNnKVxuXG4gICAgICAvLyBDaGVjayBpZiBpdCdzIGFuIGF1dGhlbnRpY2F0aW9uIGVycm9yXG4gICAgICBpZiAocGxhbmV0c0RhdGEubXNnLmluY2x1ZGVzKFwiaW52YWxpZFwiKSB8fCBwbGFuZXRzRGF0YS5tc2cuaW5jbHVkZXMoXCJVc2VyIElEXCIpKSB7XG4gICAgICAgIHNldEF1dGhFcnJvcih0cnVlKVxuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IocGxhbmV0c0RhdGEubXNnKVxuICAgIH1cblxuICAgIGlmICghcGxhbmV0c1Jlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFBsYW5ldHMgQVBJIGVycm9yOiAke3BsYW5ldHNSZXNwb25zZS5zdGF0dXN9ICR7cGxhbmV0c1Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICB9XG5cbiAgICAvLyBGZXRjaCBob3VzZXMgZGF0YVxuICAgIGNvbnN0IGhvdXNlc1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vaG91c2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IGdldEF1dGhIZWFkZXJzKCksXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSlcblxuICAgIGNvbnN0IGhvdXNlc0RhdGEgPSBhd2FpdCBob3VzZXNSZXNwb25zZS5qc29uKClcblxuICAgIGlmIChob3VzZXNEYXRhLnN0YXR1cyA9PT0gZmFsc2UgJiYgaG91c2VzRGF0YS5tc2cpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihob3VzZXNEYXRhLm1zZylcbiAgICB9XG5cbiAgICBpZiAoIWhvdXNlc1Jlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEhvdXNlcyBBUEkgZXJyb3I6ICR7aG91c2VzUmVzcG9uc2Uuc3RhdHVzfSAke2hvdXNlc1Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICB9XG5cbiAgICAvLyBGZXRjaCBhc3BlY3RzIGRhdGFcbiAgICBjb25zdCBhc3BlY3RzUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9hc3BlY3RzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IGdldEF1dGhIZWFkZXJzKCksXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSlcblxuICAgIGxldCBhc3BlY3RzRGF0YSA9IFtdXG4gICAgaWYgKGFzcGVjdHNSZXNwb25zZS5vaykge1xuICAgICAgYXNwZWN0c0RhdGEgPSBhd2FpdCBhc3BlY3RzUmVzcG9uc2UuanNvbigpXG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHRoZSBkYXRhIGludG8gb3VyIGFwcGxpY2F0aW9uJ3Mgc3RydWN0dXJlXG4gICAgcmV0dXJuIGZvcm1hdE5hdGFsQ2hhcnRSZXNwb25zZShwbGFuZXRzRGF0YSwgaG91c2VzRGF0YSwgYXNwZWN0c0RhdGEsIHtcbiAgICAgIGRhdGU6IGJpcnRoRGF0ZSxcbiAgICAgIHRpbWU6IGJpcnRoVGltZSxcbiAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgIGxhdGl0dWRlLFxuICAgICAgICBsb25naXR1ZGUsXG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICB9LFxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIG5hdGFsIGNoYXJ0OlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8qKlxuICogRmV0Y2hlcyBuYXRhbCB3aGVlbCBjaGFydCBmcm9tIEFzdHJvbG9neUFQSVxuICogVXBkYXRlZCB0byBoYW5kbGUgdGhlIG5ldyByZXNwb25zZSBmb3JtYXQgdGhhdCByZXR1cm5zIGEgY2hhcnQgVVJMXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE5hdGFsV2hlZWxDaGFydChcbiAgYmlydGhEYXRlOiBzdHJpbmcsXG4gIGJpcnRoVGltZTogc3RyaW5nLFxuICBsYXRpdHVkZTogbnVtYmVyLFxuICBsb25naXR1ZGU6IG51bWJlcixcbiAgdGltZXpvbmUgPSA1LjUsIC8vIERlZmF1bHQgdG8gSVNUXG4gIHNpZ25faWNvbl9jb2xvcjogc3RyaW5nID0gXCJXSElURVwiLFxuICBzaWduX2JhY2tncm91bmQ6IHN0cmluZ1tdID0gW1xuICAgIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCIsXG4gICAgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIiwgXCJjbGVhclwiLCBcImNsZWFyXCIsIFwiY2xlYXJcIlxuICBdXG4pOiBQcm9taXNlPHsgY2hhcnRVcmw6IHN0cmluZzsgc3ZnQ29udGVudD86IHN0cmluZyB9PiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIGZldGNoTmF0YWxXaGVlbENoYXJ0IGNhbGxlZCB3aXRoOlwiLCB7IGJpcnRoRGF0ZSwgYmlydGhUaW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lem9uZSB9KVxuXG4gICAgLy8gQ2hlY2sgZm9yIHByZXZpb3VzIGF1dGggZXJyb3JzIHRvIGF2b2lkIHJlcGVhdGVkIGZhaWxlZCBBUEkgY2FsbHNcbiAgICBpZiAoaGFzQXV0aEVycm9yKCkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlNraXBwaW5nIEFQSSBjYWxsIGR1ZSB0byBwcmV2aW91cyBhdXRoZW50aWNhdGlvbiBlcnJvclwiKVxuXG4gICAgICAvLyBVc2UgdGhlIGdlbmVyYWwgZmFsbGJhY2sgU1ZHIGZvciBvdGhlciBjaGFydHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNoYXJ0VXJsOiBcIlwiLFxuICAgICAgICBzdmdDb250ZW50OiBnZXRGYWxsYmFja05hdGFsQ2hhcnQoKSxcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBjcmVkZW50aWFscyBmaXJzdFxuICAgIGlmICghaGFzVmFsaWRDcmVkZW50aWFscygpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJNaXNzaW5nIEFQSSBjcmVkZW50aWFscyBmb3IgQXN0cm9sb2d5QVBJXCIpXG4gICAgICBzZXRBdXRoRXJyb3IodHJ1ZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZFwiKVxuICAgIH1cblxuICAgIC8vIEZvcm1hdCBkYXRlIGFuZCB0aW1lIGZvciBBUElcbiAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBiaXJ0aERhdGUuc3BsaXQoXCItXCIpLm1hcChOdW1iZXIpXG4gICAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSBiaXJ0aFRpbWUuc3BsaXQoXCI6XCIpLm1hcChOdW1iZXIpXG5cbiAgICAvLyBQcmVwYXJlIHRoZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgIGRheSxcbiAgICAgIG1vbnRoLFxuICAgICAgeWVhcixcbiAgICAgIGhvdXIsXG4gICAgICBtaW46IG1pbnV0ZSxcbiAgICAgIGxhdDogbGF0aXR1ZGUsXG4gICAgICBsb246IGxvbmdpdHVkZSxcbiAgICAgIHR6b25lOiB0aW1lem9uZSxcbiAgICAgIHBsYW5ldF9pY29uX2NvbG9yOiBcIkJsYWNrXCIsXG4gICAgICBzaWduX2ljb25fY29sb3I6IFwiQmxhY2tcIixcbiAgICAgIHNpZ25fYmFja2dyb3VuZDogW1xuICAgICAgICBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLFxuICAgICAgICBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiLCBcIiNGNEZBRkNcIiwgXCIjRjRGQUZDXCIsIFwiI0Y0RkFGQ1wiXG4gICAgICBdLFxuICAgICAgaW5uZXJfY2lyY2xlX2JhY2tncm91bmQ6IFwiI0Y0RkFGQ1wiLFxuICAgICAgb3V0ZXJfY2lyY2xlX2JhY2tncm91bmQ6IFwiI0Y0RkFGQ1wiLFxuICAgICAgY2hhcnRfc2l6ZTogMTAwMCxcbiAgICAgIGltYWdlX3R5cGU6IFwic3ZnXCJcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gUmVxdWVzdCBCb2R5OlwiLCByZXF1ZXN0Qm9keSlcblxuICAgIC8vIEdldCBhdXRoIGhlYWRlcnNcbiAgICBjb25zdCBoZWFkZXJzID0gZ2V0QXV0aEhlYWRlcnMoKVxuICAgIGNvbnNvbGUubG9nKFwiRGVidWcgLSBIZWFkZXJzOlwiLCB7XG4gICAgICBBdXRob3JpemF0aW9uOiBoZWFkZXJzLkF1dGhvcml6YXRpb24gPyBcIkJhc2ljICoqKlwiIDogXCJNaXNzaW5nXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdLFxuICAgIH0pXG5cbiAgICAvLyBNYWtlIHRoZSBBUEkgcmVxdWVzdFxuICAgIGNvbnNvbGUubG9nKFwiRGVidWcgLSBGZXRjaGluZyBmcm9tIFVSTDpcIiwgYCR7QVNUUk9MT0dZX0FQSV9CQVNFX1VSTH0vbmF0YWxfd2hlZWxfY2hhcnRgKVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBU1RST0xPR1lfQVBJX0JBU0VfVVJMfS9uYXRhbF93aGVlbF9jaGFydGAsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgIH0pXG5cbiAgICAvLyBMb2cgdGhlIHJlc3BvbnNlIHN0YXR1cyBmb3IgZGVidWdnaW5nXG4gICAgY29uc29sZS5sb2coYERlYnVnIC0gQVBJIFJlc3BvbnNlIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuXG4gICAgLy8gR2V0IHRoZSByYXcgcmVzcG9uc2UgdGV4dCBmaXJzdCBmb3IgZGVidWdnaW5nXG4gICAgY29uc3QgcmF3UmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFJhdyBSZXNwb25zZSAoZmlyc3QgMjAwIGNoYXJzKTpcIiwgcmF3UmVzcG9uc2VUZXh0LnN1YnN0cmluZygwLCAyMDApKVxuXG4gICAgLy8gVHJ5IHRvIHBhcnNlIHRoZSByZXNwb25zZSBhcyBKU09OXG4gICAgbGV0IGRhdGFcbiAgICB0cnkge1xuICAgICAgZGF0YSA9IEpTT04ucGFyc2UocmF3UmVzcG9uc2VUZXh0KVxuICAgICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFJlc3BvbnNlIEtleXM6XCIsIE9iamVjdC5rZXlzKGRhdGEpKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEZWJ1ZyAtIEZhaWxlZCB0byBwYXJzZSByZXNwb25zZSBhcyBKU09OOlwiLCBlKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgQVBJIHJlc3BvbnNlIGFzIEpTT046ICR7cmF3UmVzcG9uc2VUZXh0LnN1YnN0cmluZygwLCAxMDApfS4uLmApXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGVycm9yIGluIHJlc3BvbnNlXG4gICAgaWYgKGRhdGEuc3RhdHVzID09PSBmYWxzZSAmJiBkYXRhLm1zZykge1xuICAgICAgY29uc29sZS5lcnJvcihcIkFQSSBlcnJvcjpcIiwgZGF0YS5tc2cpXG5cbiAgICAgIC8vIENoZWNrIGlmIGl0J3MgYW4gYXV0aGVudGljYXRpb24gZXJyb3JcbiAgICAgIGlmIChkYXRhLm1zZy5pbmNsdWRlcyhcImludmFsaWRcIikgfHwgZGF0YS5tc2cuaW5jbHVkZXMoXCJVc2VyIElEXCIpKSB7XG4gICAgICAgIHNldEF1dGhFcnJvcih0cnVlKVxuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5tc2cpXG4gICAgfVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBOYXRhbCB3aGVlbCBjaGFydCBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHRoZSBjaGFydF91cmwgaW4gdGhlIHJlc3BvbnNlXG4gICAgaWYgKGRhdGEuY2hhcnRfdXJsKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBjaGFydCBVUkw6XCIsIGRhdGEuY2hhcnRfdXJsKVxuXG4gICAgICAvLyBDbGVhciBhbnkgc3RvcmVkIGF1dGggZXJyb3JzIHNpbmNlIHRoZSByZXF1ZXN0IHN1Y2NlZWRlZFxuICAgICAgY2xlYXJBdXRoRXJyb3JzKClcblxuICAgICAgcmV0dXJuIHsgY2hhcnRVcmw6IGRhdGEuY2hhcnRfdXJsIH1cbiAgICB9XG4gICAgLy8gRmFsbGJhY2sgdG8gdGhlIG9sZCBmb3JtYXQgaWYgc3ZnIHByb3BlcnR5IGV4aXN0c1xuICAgIGVsc2UgaWYgKGRhdGEuc3ZnKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gUmV0cmlldmVkIFNWRyBjb250ZW50IGluc3RlYWQgb2YgVVJMLCBsZW5ndGg6XCIsIGRhdGEuc3ZnLmxlbmd0aClcblxuICAgICAgLy8gQ2xlYXIgYW55IHN0b3JlZCBhdXRoIGVycm9ycyBzaW5jZSB0aGUgcmVxdWVzdCBzdWNjZWVkZWRcbiAgICAgIGNsZWFyQXV0aEVycm9ycygpXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNoYXJ0VXJsOiBcIlwiLFxuICAgICAgICBzdmdDb250ZW50OiBkYXRhLnN2ZyxcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcIkFQSSByZXNwb25zZSBtaXNzaW5nIGNoYXJ0X3VybCBhbmQgc3ZnIGRhdGE6XCIsIGRhdGEpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFydCBkYXRhIHJldHVybmVkIGZyb20gdGhlIEFQSVwiKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgd2hlZWwgY2hhcnQ6XCIsIGVycm9yKVxuXG4gICAgLy8gVXNlIHRoZSBnZW5lcmFsIGZhbGxiYWNrIFNWRyBmb3Igb3RoZXIgY2hhcnRzXG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYXJ0VXJsOiBcIlwiLFxuICAgICAgc3ZnQ29udGVudDogZ2V0RmFsbGJhY2tOYXRhbENoYXJ0KCksXG4gICAgfVxuICB9XG59XG5cbi8vIEtlZXAgdGhlIG9sZCBmdW5jdGlvbiBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHKFxuICBiaXJ0aERhdGU6IHN0cmluZyxcbiAgYmlydGhUaW1lOiBzdHJpbmcsXG4gIGxhdGl0dWRlOiBudW1iZXIsXG4gIGxvbmdpdHVkZTogbnVtYmVyLFxuICB0aW1lem9uZSA9IDUuNSwgLy8gRGVmYXVsdCB0byBJU1Rcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2hOYXRhbFdoZWVsQ2hhcnQoYmlydGhEYXRlLCBiaXJ0aFRpbWUsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHRpbWV6b25lKVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBTVkcgY29udGVudCwgcmV0dXJuIGl0XG4gICAgaWYgKHJlc3VsdC5zdmdDb250ZW50KSB7XG4gICAgICByZXR1cm4gcmVzdWx0LnN2Z0NvbnRlbnRcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSBoYXZlIGEgY2hhcnQgVVJMLCBmZXRjaCB0aGUgU1ZHIGNvbnRlbnRcbiAgICBpZiAocmVzdWx0LmNoYXJ0VXJsKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkRlYnVnIC0gRmV0Y2hpbmcgU1ZHIGNvbnRlbnQgZnJvbSBVUkw6XCIsIHJlc3VsdC5jaGFydFVybClcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3ZnUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChyZXN1bHQuY2hhcnRVcmwpXG4gICAgICAgIGlmICghc3ZnUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBTVkcgZnJvbSBVUkw6ICR7c3ZnUmVzcG9uc2Uuc3RhdHVzfSAke3N2Z1Jlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN2Z0NvbnRlbnQgPSBhd2FpdCBzdmdSZXNwb25zZS50ZXh0KClcbiAgICAgICAgY29uc29sZS5sb2coXCJEZWJ1ZyAtIFN1Y2Nlc3NmdWxseSBmZXRjaGVkIFNWRyBjb250ZW50LCBsZW5ndGg6XCIsIHN2Z0NvbnRlbnQubGVuZ3RoKVxuXG4gICAgICAgIHJldHVybiBzdmdDb250ZW50XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgU1ZHIGZyb20gVVJMOlwiLCBlcnJvcilcblxuICAgICAgICAvLyBSZXR1cm4gZmFsbGJhY2sgU1ZHIGlmIHdlIGNhbid0IGZldGNoIGZyb20gVVJMXG4gICAgICAgIHJldHVybiBnZXRGYWxsYmFja05hdGFsQ2hhcnQoKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBmYWxsYmFjayBTVkcgaWYgbm8gY2hhcnQgZGF0YSBhdmFpbGFibGVcbiAgICByZXR1cm4gZ2V0RmFsbGJhY2tOYXRhbENoYXJ0KClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZmV0Y2hOYXRhbFdoZWVsQ2hhcnRTVkc6XCIsIGVycm9yKVxuXG4gICAgLy8gUmV0dXJuIGZhbGxiYWNrIFNWRyBmb3Igb3RoZXIgY2hhcnRzXG4gICAgcmV0dXJuIGdldEZhbGxiYWNrTmF0YWxDaGFydCgpXG4gIH1cbn1cblxuLyoqXG4gKiBHZW9jb2RlcyBhIGxvY2F0aW9uIHN0cmluZyB0byBnZXQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSB1c2luZyBBc3Ryb2xvZ3lBUElcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlb2NvZGVMb2NhdGlvbihsb2NhdGlvbjogc3RyaW5nKTogUHJvbWlzZTx7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiR2VvY29kaW5nIGxvY2F0aW9uOlwiLCBsb2NhdGlvbik7XG5cbiAgICBpZiAoIWhhc1ZhbGlkQ3JlZGVudGlhbHMoKSkge1xuICAgICAgY29uc29sZS53YXJuKFwiTWlzc2luZyBBUEkgY3JlZGVudGlhbHMgZm9yIEFzdHJvbG9neUFQSVwiKTtcbiAgICAgIHNldEF1dGhFcnJvcih0cnVlKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkFQSSBjcmVkZW50aWFscyBub3QgY29uZmlndXJlZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkZXJzID0gZ2V0QXV0aEhlYWRlcnMoKTtcbiAgICBjb25zb2xlLmxvZyhcIlVzaW5nIGF1dGggaGVhZGVyczpcIiwgaGVhZGVycyk7XG5cbiAgICAvLyBVc2UgR0VULCBub3QgUE9TVFxuICAgIGNvbnN0IHVybCA9IGAke0FTVFJPTE9HWV9BUElfQkFTRV9VUkx9L2dlb19kZXRhaWxzP3BsYWNlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uKX1gO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzLFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc29sZS5lcnJvcihcIkdlb2NvZGluZyBBUEkgZXJyb3I6XCIsIHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdlb2NvZGluZyBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBpZiAoIWRhdGEgfHwgIWRhdGEubGF0aXR1ZGUgfHwgIWRhdGEubG9uZ2l0dWRlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiSW52YWxpZCBnZW9jb2RpbmcgcmVzcG9uc2U6XCIsIGRhdGEpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBnZW9jb2RpbmcgcmVzcG9uc2VcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiBkYXRhLmxhdGl0dWRlLFxuICAgICAgbG9uZ2l0dWRlOiBkYXRhLmxvbmdpdHVkZSxcbiAgICAgIG5hbWU6IGRhdGEubmFtZSB8fCBsb2NhdGlvbixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZW9jb2RpbmcgbG9jYXRpb246XCIsIGVycm9yKTtcbiAgICAvLyBGYWxsYmFjazogTGFzIFZlZ2FzXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAzNi4xNjk5LFxuICAgICAgbG9uZ2l0dWRlOiAtMTE1LjEzOTgsXG4gICAgICBuYW1lOiBsb2NhdGlvbixcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogRm9ybWF0cyB0aGUgQVBJIHJlc3BvbnNlIGludG8gb3VyIGFwcGxpY2F0aW9uJ3MgZGF0YSBzdHJ1Y3R1cmVcbiAqL1xuZnVuY3Rpb24gZm9ybWF0TmF0YWxDaGFydFJlc3BvbnNlKFxuICBwbGFuZXRzRGF0YTogYW55W10sXG4gIGhvdXNlc0RhdGE6IGFueSxcbiAgYXNwZWN0c0RhdGE6IGFueVtdLFxuICBiaXJ0aERldGFpbHM6IGFueSxcbik6IE5hdGFsQ2hhcnQge1xuICAvLyBFeHRyYWN0IGFuZCBmb3JtYXQgcGxhbmV0IHBvc2l0aW9uc1xuICBjb25zdCBwbGFuZXRzOiBQbGFuZXRQb3NpdGlvbltdID0gcGxhbmV0c0RhdGEubWFwKChwbGFuZXQpID0+IHtcbiAgICAvLyBDb252ZXJ0IHBsYW5ldCBuYW1lIHRvIG91ciBmb3JtYXRcbiAgICBjb25zdCBwbGFuZXROYW1lID0gY29udmVydFBsYW5ldE5hbWUocGxhbmV0Lm5hbWUpXG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogcGxhbmV0TmFtZSxcbiAgICAgIHNpZ246IHBsYW5ldC5zaWduLnRvTG93ZXJDYXNlKCkgYXMgWm9kaWFjU2lnbixcbiAgICAgIGRlZ3JlZTogcGxhbmV0Lm5vcm1fZGVncmVlLFxuICAgICAgaG91c2U6IHBsYW5ldC5ob3VzZSxcbiAgICAgIHJldHJvZ3JhZGU6IHBsYW5ldC5pc19yZXRyb2dyYWRlID09PSAxLFxuICAgICAgYXNwZWN0c1RvT3RoZXJQbGFuZXRzOiBbXSxcbiAgICB9XG4gIH0pXG5cbiAgLy8gRXh0cmFjdCBhbmQgZm9ybWF0IGhvdXNlc1xuICBjb25zdCBob3VzZXM6IEhvdXNlW10gPSBPYmplY3Qua2V5cyhob3VzZXNEYXRhKS5tYXAoKGtleSkgPT4ge1xuICAgIGNvbnN0IGhvdXNlID0gaG91c2VzRGF0YVtrZXldXG4gICAgcmV0dXJuIHtcbiAgICAgIG51bWJlcjogTnVtYmVyLnBhcnNlSW50KGtleS5yZXBsYWNlKFwiaG91c2VcIiwgXCJcIikpLFxuICAgICAgc2lnbjogaG91c2Uuc2lnbi50b0xvd2VyQ2FzZSgpIGFzIFpvZGlhY1NpZ24sXG4gICAgICBkZWdyZWU6IGhvdXNlLmRlZ3JlZSxcbiAgICAgIGN1c3A6IHRydWUsXG4gICAgfVxuICB9KVxuXG4gIC8vIEV4dHJhY3QgYW5kIGZvcm1hdCBhbmdsZXMgKEFzY2VuZGFudCwgTWlkaGVhdmVuLCBldGMuKVxuICBjb25zdCBhbmdsZXM6IFJlY29yZDxzdHJpbmcsIEFuZ2xlPiA9IHtcbiAgICBhc2NlbmRhbnQ6IHtcbiAgICAgIHNpZ246IGhvdXNlc0RhdGEuYXNjZW5kYW50LnNpZ24udG9Mb3dlckNhc2UoKSBhcyBab2RpYWNTaWduLFxuICAgICAgZGVncmVlOiBob3VzZXNEYXRhLmFzY2VuZGFudC5kZWdyZWUsXG4gICAgfSxcbiAgICBtaWRoZWF2ZW46IHtcbiAgICAgIHNpZ246IGhvdXNlc0RhdGEubWlkaGVhdmVuLnNpZ24udG9Mb3dlckNhc2UoKSBhcyBab2RpYWNTaWduLFxuICAgICAgZGVncmVlOiBob3VzZXNEYXRhLm1pZGhlYXZlbi5kZWdyZWUsXG4gICAgfSxcbiAgICBkZXNjZW5kYW50OiB7XG4gICAgICBzaWduOiBnZXRPcHBvc2l0ZVNpZ24oaG91c2VzRGF0YS5hc2NlbmRhbnQuc2lnbi50b0xvd2VyQ2FzZSgpIGFzIFpvZGlhY1NpZ24pLFxuICAgICAgZGVncmVlOiAoaG91c2VzRGF0YS5hc2NlbmRhbnQuZGVncmVlICsgMTgwKSAlIDM2MCxcbiAgICB9LFxuICAgIGltdW1Db2VsaToge1xuICAgICAgc2lnbjogZ2V0T3Bwb3NpdGVTaWduKGhvdXNlc0RhdGEubWlkaGVhdmVuLnNpZ24udG9Mb3dlckNhc2UoKSBhcyBab2RpYWNTaWduKSxcbiAgICAgIGRlZ3JlZTogKGhvdXNlc0RhdGEubWlkaGVhdmVuLmRlZ3JlZSArIDE4MCkgJSAzNjAsXG4gICAgfSxcbiAgfVxuXG4gIC8vIEZvcm1hdCBhc3BlY3RzIGRhdGFcbiAgY29uc3QgYXNwZWN0cyA9IGFzcGVjdHNEYXRhLm1hcCgoYXNwZWN0KSA9PiAoe1xuICAgIGFzcGVjdDogYXNwZWN0LmFzcGVjdC50b0xvd2VyQ2FzZSgpLFxuICAgIHBsYW5ldDE6IGNvbnZlcnRQbGFuZXROYW1lKGFzcGVjdC5wbGFuZXQxKSxcbiAgICBwbGFuZXQyOiBjb252ZXJ0UGxhbmV0TmFtZShhc3BlY3QucGxhbmV0MiksXG4gICAgb3JiOiBhc3BlY3Qub3JiLFxuICAgIGFwcGx5aW5nOiBhc3BlY3QuYXBwbHlpbmcgPT09IDEsXG4gIH0pKVxuXG4gIHJldHVybiB7XG4gICAgcGxhbmV0cyxcbiAgICBob3VzZXMsXG4gICAgYW5nbGVzLFxuICAgIGFzcGVjdHMsXG4gICAgYmlydGhEZXRhaWxzLFxuICB9XG59XG5cbi8qKlxuICogQ29udmVydHMgQXN0cm9sb2d5QVBJIHBsYW5ldCBuYW1lcyB0byBvdXIgYXBwbGljYXRpb24ncyBmb3JtYXRcbiAqL1xuZnVuY3Rpb24gY29udmVydFBsYW5ldE5hbWUoYXBpUGxhbmV0TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcGxhbmV0TWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgIFN1bjogXCJzdW5cIixcbiAgICBNb29uOiBcIm1vb25cIixcbiAgICBNZXJjdXJ5OiBcIm1lcmN1cnlcIixcbiAgICBWZW51czogXCJ2ZW51c1wiLFxuICAgIE1hcnM6IFwibWFyc1wiLFxuICAgIEp1cGl0ZXI6IFwianVwaXRlclwiLFxuICAgIFNhdHVybjogXCJzYXR1cm5cIixcbiAgICBVcmFudXM6IFwidXJhbnVzXCIsXG4gICAgTmVwdHVuZTogXCJuZXB0dW5lXCIsXG4gICAgUGx1dG86IFwicGx1dG9cIixcbiAgICBSYWh1OiBcIm5vcnRoX25vZGVcIixcbiAgICBLZXR1OiBcInNvdXRoX25vZGVcIixcbiAgfVxuXG4gIHJldHVybiBwbGFuZXRNYXBbYXBpUGxhbmV0TmFtZV0gfHwgYXBpUGxhbmV0TmFtZS50b0xvd2VyQ2FzZSgpXG59XG5cbi8qKlxuICogR2V0cyB0aGUgb3Bwb3NpdGUgem9kaWFjIHNpZ25cbiAqL1xuZnVuY3Rpb24gZ2V0T3Bwb3NpdGVTaWduKHNpZ246IFpvZGlhY1NpZ24pOiBab2RpYWNTaWduIHtcbiAgY29uc3Qgem9kaWFjU2lnbnM6IFpvZGlhY1NpZ25bXSA9IFtcbiAgICBcImFyaWVzXCIsXG4gICAgXCJ0YXVydXNcIixcbiAgICBcImdlbWluaVwiLFxuICAgIFwiY2FuY2VyXCIsXG4gICAgXCJsZW9cIixcbiAgICBcInZpcmdvXCIsXG4gICAgXCJsaWJyYVwiLFxuICAgIFwic2NvcnBpb1wiLFxuICAgIFwic2FnaXR0YXJpdXNcIixcbiAgICBcImNhcHJpY29yblwiLFxuICAgIFwiYXF1YXJpdXNcIixcbiAgICBcInBpc2Nlc1wiLFxuICBdXG5cbiAgY29uc3QgaW5kZXggPSB6b2RpYWNTaWducy5pbmRleE9mKHNpZ24pXG4gIGlmIChpbmRleCA9PT0gLTEpIHJldHVybiBcImFyaWVzXCIgLy8gRGVmYXVsdCBmYWxsYmFja1xuXG4gIGNvbnN0IG9wcG9zaXRlSW5kZXggPSAoaW5kZXggKyA2KSAlIDEyXG4gIHJldHVybiB6b2RpYWNTaWduc1tvcHBvc2l0ZUluZGV4XVxufVxuXG4vKipcbiAqIEdldHMgaW50ZXJwcmV0YXRpb25zIGZvciBhIG5hdGFsIGNoYXJ0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROYXRhbENoYXJ0SW50ZXJwcmV0YXRpb24obmF0YWxDaGFydDogTmF0YWxDaGFydCk6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgLy8gVGhpcyB3b3VsZCBiZSBpbXBsZW1lbnRlZCB0byBmZXRjaCBpbnRlcnByZXRhdGlvbnMgZnJvbSBBc3Ryb2xvZ3lBUElcbiAgICAvLyBGb3Igbm93LCB3ZSdsbCByZXR1cm4gYSBwbGFjZWhvbGRlciBpbnRlcnByZXRhdGlvblxuICAgIHJldHVybiB7XG4gICAgICBvdmVydmlldzoge1xuICAgICAgICB0aXRsZTogXCJZb3VyIENvc21pYyBCbHVlcHJpbnRcIixcbiAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgXCJZb3VyIG5hdGFsIGNoYXJ0IHJldmVhbHMgeW91ciB1bmlxdWUgY29zbWljIGJsdWVwcmludCwgc2hvd2luZyB0aGUgcG9zaXRpb25zIG9mIHRoZSBwbGFuZXRzIGF0IHRoZSBtb21lbnQgb2YgeW91ciBiaXJ0aC4gVGhpcyBjZWxlc3RpYWwgc25hcHNob3Qgb2ZmZXJzIGluc2lnaHRzIGludG8geW91ciBwZXJzb25hbGl0eSwgc3RyZW5ndGhzLCBjaGFsbGVuZ2VzLCBhbmQgbGlmZSBwYXRoLlwiLFxuICAgICAgfSxcbiAgICAgIHN1blNpZ246IHtcbiAgICAgICAgdGl0bGU6IFwiU3VuIFNpZ25cIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBTdW4gc2lnbiByZXByZXNlbnRzIHlvdXIgY29yZSBlc3NlbmNlIGFuZCBsaWZlIHB1cnBvc2UuXCIsXG4gICAgICAgIGtleXdvcmRzOiBbXCJpZGVudGl0eVwiLCBcInB1cnBvc2VcIiwgXCJ2aXRhbGl0eVwiXSxcbiAgICAgIH0sXG4gICAgICBtb29uU2lnbjoge1xuICAgICAgICB0aXRsZTogXCJNb29uIFNpZ25cIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBNb29uIHNpZ24gcmVmbGVjdHMgeW91ciBlbW90aW9uYWwgbmF0dXJlIGFuZCBzdWJjb25zY2lvdXMgcGF0dGVybnMuXCIsXG4gICAgICAgIGtleXdvcmRzOiBbXCJlbW90aW9uc1wiLCBcImluc3RpbmN0c1wiLCBcImNvbWZvcnRcIl0sXG4gICAgICB9LFxuICAgICAgYXNjZW5kYW50U2lnbjoge1xuICAgICAgICB0aXRsZTogXCJBc2NlbmRhbnRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBBc2NlbmRhbnQgcmVwcmVzZW50cyBob3cgeW91IHByZXNlbnQgeW91cnNlbGYgdG8gdGhlIHdvcmxkLlwiLFxuICAgICAgICBrZXl3b3JkczogW1wiYXBwZWFyYW5jZVwiLCBcImZpcnN0IGltcHJlc3Npb25zXCIsIFwicGVyc29uYWwgc3R5bGVcIl0sXG4gICAgICB9LFxuICAgICAgcGxhbmV0UG9zaXRpb25zOiB7XG4gICAgICAgIHN1bjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgU3VuIHBsYWNlbWVudCBpbmRpY2F0ZXMgeW91ciBjb3JlIGlkZW50aXR5IGFuZCBwdXJwb3NlIGluIGxpZmUuXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImlkZW50aXR5XCIsIFwicHVycG9zZVwiLCBcInZpdGFsaXR5XCJdLFxuICAgICAgICB9LFxuICAgICAgICBtb29uOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiWW91ciBNb29uIHBsYWNlbWVudCByZXZlYWxzIHlvdXIgZW1vdGlvbmFsIG5hdHVyZSBhbmQgc3ViY29uc2Npb3VzIHBhdHRlcm5zLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJlbW90aW9uc1wiLCBcImluc3RpbmN0c1wiLCBcImNvbWZvcnRcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIG1lcmN1cnk6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIE1lcmN1cnkgcGxhY2VtZW50IHNob3dzIGhvdyB5b3UgdGhpbmsgYW5kIGNvbW11bmljYXRlLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJjb21tdW5pY2F0aW9uXCIsIFwidGhpbmtpbmdcIiwgXCJsZWFybmluZ1wiXSxcbiAgICAgICAgfSxcbiAgICAgICAgdmVudXM6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFZlbnVzIHBsYWNlbWVudCBpbmRpY2F0ZXMgaG93IHlvdSBleHByZXNzIGFuZCByZWNlaXZlIGxvdmUgYW5kIGJlYXV0eS5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wibG92ZVwiLCBcImJlYXV0eVwiLCBcInZhbHVlc1wiXSxcbiAgICAgICAgfSxcbiAgICAgICAgbWFyczoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgTWFycyBwbGFjZW1lbnQgc2hvd3MgaG93IHlvdSBhc3NlcnQgeW91cnNlbGYgYW5kIHRha2UgYWN0aW9uLlwiLFxuICAgICAgICAgIGtleXdvcmRzOiBbXCJhY3Rpb25cIiwgXCJkZXNpcmVcIiwgXCJlbmVyZ3lcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIGp1cGl0ZXI6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIEp1cGl0ZXIgcGxhY2VtZW50IHJldmVhbHMgd2hlcmUgeW91IGZpbmQgZ3Jvd3RoIGFuZCBleHBhbnNpb24uXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcImdyb3d0aFwiLCBcImx1Y2tcIiwgXCJhYnVuZGFuY2VcIl0sXG4gICAgICAgIH0sXG4gICAgICAgIHNhdHVybjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgU2F0dXJuIHBsYWNlbWVudCBpbmRpY2F0ZXMgd2hlcmUgeW91IGZhY2UgY2hhbGxlbmdlcyBhbmQgbGVhcm4gZGlzY2lwbGluZS5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiZGlzY2lwbGluZVwiLCBcInJlc3BvbnNpYmlsaXR5XCIsIFwic3RydWN0dXJlXCJdLFxuICAgICAgICB9LFxuICAgICAgICB1cmFudXM6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJZb3VyIFVyYW51cyBwbGFjZW1lbnQgc2hvd3Mgd2hlcmUgeW91IHNlZWsgZnJlZWRvbSBhbmQgaW5ub3ZhdGlvbi5cIixcbiAgICAgICAgICBrZXl3b3JkczogW1wiaW5ub3ZhdGlvblwiLCBcInJlYmVsbGlvblwiLCBcImNoYW5nZVwiXSxcbiAgICAgICAgfSxcbiAgICAgICAgbmVwdHVuZToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgTmVwdHVuZSBwbGFjZW1lbnQgcmV2ZWFscyB5b3VyIHNwaXJpdHVhbCBhbmQgY3JlYXRpdmUgYXNwaXJhdGlvbnMuXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcInNwaXJpdHVhbGl0eVwiLCBcImRyZWFtc1wiLCBcImlsbHVzaW9uXCJdLFxuICAgICAgICB9LFxuICAgICAgICBwbHV0bzoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIllvdXIgUGx1dG8gcGxhY2VtZW50IGluZGljYXRlcyB3aGVyZSB5b3UgZXhwZXJpZW5jZSB0cmFuc2Zvcm1hdGlvbiBhbmQgcG93ZXIuXCIsXG4gICAgICAgICAga2V5d29yZHM6IFtcInRyYW5zZm9ybWF0aW9uXCIsIFwicG93ZXJcIiwgXCJyZWJpcnRoXCJdLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGhvdXNlczoge1xuICAgICAgICAxOiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDFzdCBob3VzZSByZXByZXNlbnRzIHlvdXIgc2VsZi1pbWFnZSBhbmQgaG93IHlvdSBwcmVzZW50IHlvdXJzZWxmIHRvIHRoZSB3b3JsZC5cIixcbiAgICAgICAgfSxcbiAgICAgICAgMjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSAybmQgaG91c2UgcmVwcmVzZW50cyB5b3VyIHZhbHVlcywgcG9zc2Vzc2lvbnMsIGFuZCByZXNvdXJjZXMuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDM6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgM3JkIGhvdXNlIHJlcHJlc2VudHMgY29tbXVuaWNhdGlvbiwgbGVhcm5pbmcsIGFuZCB5b3VyIGltbWVkaWF0ZSBlbnZpcm9ubWVudC5cIixcbiAgICAgICAgfSxcbiAgICAgICAgNDoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSA0dGggaG91c2UgcmVwcmVzZW50cyB5b3VyIGhvbWUsIGZhbWlseSwgYW5kIGVtb3Rpb25hbCBmb3VuZGF0aW9ucy5cIixcbiAgICAgICAgfSxcbiAgICAgICAgNToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSA1dGggaG91c2UgcmVwcmVzZW50cyBjcmVhdGl2aXR5LCBwbGVhc3VyZSwgYW5kIHNlbGYtZXhwcmVzc2lvbi5cIixcbiAgICAgICAgfSxcbiAgICAgICAgNjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSA2dGggaG91c2UgcmVwcmVzZW50cyB3b3JrLCBoZWFsdGgsIGFuZCBkYWlseSByb3V0aW5lcy5cIixcbiAgICAgICAgfSxcbiAgICAgICAgNzoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSA3dGggaG91c2UgcmVwcmVzZW50cyBwYXJ0bmVyc2hpcHMsIHJlbGF0aW9uc2hpcHMsIGFuZCBvcGVuIGVuZW1pZXMuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIDg6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgOHRoIGhvdXNlIHJlcHJlc2VudHMgdHJhbnNmb3JtYXRpb24sIHNoYXJlZCByZXNvdXJjZXMsIGFuZCB0aGUgb2NjdWx0LlwiLFxuICAgICAgICB9LFxuICAgICAgICA5OiB7XG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIDl0aCBob3VzZSByZXByZXNlbnRzIGhpZ2hlciBlZHVjYXRpb24sIHBoaWxvc29waHksIGFuZCBsb25nLWRpc3RhbmNlIHRyYXZlbC5cIixcbiAgICAgICAgfSxcbiAgICAgICAgMTA6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgMTB0aCBob3VzZSByZXByZXNlbnRzIGNhcmVlciwgcHVibGljIGltYWdlLCBhbmQgYXV0aG9yaXR5LlwiLFxuICAgICAgICB9LFxuICAgICAgICAxMToge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSAxMXRoIGhvdXNlIHJlcHJlc2VudHMgZnJpZW5kc2hpcHMsIGdyb3VwcywgYW5kIGFzcGlyYXRpb25zLlwiLFxuICAgICAgICB9LFxuICAgICAgICAxMjoge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSAxMnRoIGhvdXNlIHJlcHJlc2VudHMgdGhlIHVuY29uc2Npb3VzLCBzcGlyaXR1YWxpdHksIGFuZCBoaWRkZW4gZW5lbWllcy5cIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGNoYXJ0IGludGVycHJldGF0aW9uOlwiLCBlcnJvcilcbiAgICB0aHJvdyBlcnJvclxuICB9XG59XG5cbi8qKlxuICogR2V0cyBhIGRhaWx5IGhvcm9zY29wZSBmb3IgYSB6b2RpYWMgc2lnblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGFpbHlIb3Jvc2NvcGUoc2lnbjogWm9kaWFjU2lnbik6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgY3JlZGVudGlhbHMgZmlyc3RcbiAgICBpZiAoIWhhc1ZhbGlkQ3JlZGVudGlhbHMoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVBJIGNyZWRlbnRpYWxzIG5vdCBjb25maWd1cmVkXCIpXG4gICAgfVxuXG4gICAgLy8gTWFrZSB0aGUgQVBJIHJlcXVlc3RcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FTVFJPTE9HWV9BUElfQkFTRV9VUkx9L2hvcm9zY29wZV9wcmVkaWN0aW9uL2RhaWx5LyR7c2lnbn1gLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogZ2V0QXV0aEhlYWRlcnMoKSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHt9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuXG4gICAgLy8gQ2hlY2sgZm9yIGVycm9yIGluIHJlc3BvbnNlXG4gICAgaWYgKGRhdGEuc3RhdHVzID09PSBmYWxzZSAmJiBkYXRhLm1zZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEubXNnKVxuICAgIH1cblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSG9yb3Njb3BlIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHRoZSByZXNwb25zZSB0byBtYXRjaCBvdXIgYXBwbGljYXRpb24ncyBzdHJ1Y3R1cmVcbiAgICByZXR1cm4ge1xuICAgICAgc2lnbjogc2lnbixcbiAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sXG4gICAgICBwcmVkaWN0aW9uOiBkYXRhLnByZWRpY3Rpb24gfHwgXCJZb3VyIGhvcm9zY29wZSBmb3IgdG9kYXkgaXMgbm90IGF2YWlsYWJsZS5cIixcbiAgICAgIGx1Y2t5X251bWJlcjogZGF0YS5sdWNreV9udW1iZXIgfHwgXCI3XCIsXG4gICAgICBsdWNreV9jb2xvcjogZGF0YS5sdWNreV9jb2xvciB8fCBcIkJsdWVcIixcbiAgICAgIG1vb2Q6IGRhdGEubW9vZCB8fCBcIlJlZmxlY3RpdmVcIixcbiAgICAgIGNvbXBhdGliaWxpdHk6IGRhdGEuY29tcGF0aWJpbGl0eSB8fCBcIkxpYnJhXCIsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGRhaWx5IGhvcm9zY29wZTpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiZ2V0RmFsbGJhY2tOYXRhbENoYXJ0Iiwic2FmZUdldFNlc3Npb25JdGVtIiwic2FmZVNldFNlc3Npb25JdGVtIiwic2FmZVJlbW92ZVNlc3Npb25JdGVtIiwiVVNFUl9JRCIsInByb2Nlc3MiLCJlbnYiLCJBUElfS0VZIiwiQVNUUk9MT0dZX0FQSV9CQVNFX1VSTCIsImhhc1ZhbGlkQ3JlZGVudGlhbHMiLCJoYXNDcmVkZW50aWFscyIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJzZXRBdXRoRXJyb3IiLCJoYXNFcnJvciIsImhhc0F1dGhFcnJvciIsImNsZWFyQXV0aEVycm9ycyIsImdldEF1dGhIZWFkZXJzIiwiYXV0aFN0cmluZyIsImJhc2U2NEF1dGgiLCJ3aW5kb3ciLCJidG9hIiwiQnVmZmVyIiwiZnJvbSIsInRvU3RyaW5nIiwiZXJyb3IiLCJFcnJvciIsInN1YnN0cmluZyIsIkF1dGhvcml6YXRpb24iLCJmZXRjaE5hdGFsQ2hhcnQiLCJiaXJ0aERhdGUiLCJiaXJ0aFRpbWUiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInRpbWV6b25lIiwid2FybiIsInllYXIiLCJtb250aCIsImRheSIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwiaG91ciIsIm1pbnV0ZSIsInJlcXVlc3RCb2R5IiwibWluIiwibGF0IiwibG9uIiwidHpvbmUiLCJwbGFuZXRzUmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInBsYW5ldHNEYXRhIiwianNvbiIsInN0YXR1cyIsIm1zZyIsImluY2x1ZGVzIiwib2siLCJzdGF0dXNUZXh0IiwiaG91c2VzUmVzcG9uc2UiLCJob3VzZXNEYXRhIiwiYXNwZWN0c1Jlc3BvbnNlIiwiYXNwZWN0c0RhdGEiLCJmb3JtYXROYXRhbENoYXJ0UmVzcG9uc2UiLCJkYXRlIiwidGltZSIsImxvY2F0aW9uIiwibmFtZSIsImZldGNoTmF0YWxXaGVlbENoYXJ0Iiwic2lnbl9pY29uX2NvbG9yIiwic2lnbl9iYWNrZ3JvdW5kIiwiY2hhcnRVcmwiLCJzdmdDb250ZW50IiwicGxhbmV0X2ljb25fY29sb3IiLCJpbm5lcl9jaXJjbGVfYmFja2dyb3VuZCIsIm91dGVyX2NpcmNsZV9iYWNrZ3JvdW5kIiwiY2hhcnRfc2l6ZSIsImltYWdlX3R5cGUiLCJyZXNwb25zZSIsInJhd1Jlc3BvbnNlVGV4dCIsInRleHQiLCJkYXRhIiwicGFyc2UiLCJPYmplY3QiLCJrZXlzIiwiZSIsImNoYXJ0X3VybCIsInN2ZyIsImZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHIiwicmVzdWx0Iiwic3ZnUmVzcG9uc2UiLCJnZW9jb2RlTG9jYXRpb24iLCJ1cmwiLCJlbmNvZGVVUklDb21wb25lbnQiLCJiaXJ0aERldGFpbHMiLCJwbGFuZXRzIiwicGxhbmV0IiwicGxhbmV0TmFtZSIsImNvbnZlcnRQbGFuZXROYW1lIiwic2lnbiIsInRvTG93ZXJDYXNlIiwiZGVncmVlIiwibm9ybV9kZWdyZWUiLCJob3VzZSIsInJldHJvZ3JhZGUiLCJpc19yZXRyb2dyYWRlIiwiYXNwZWN0c1RvT3RoZXJQbGFuZXRzIiwiaG91c2VzIiwia2V5IiwibnVtYmVyIiwicGFyc2VJbnQiLCJyZXBsYWNlIiwiY3VzcCIsImFuZ2xlcyIsImFzY2VuZGFudCIsIm1pZGhlYXZlbiIsImRlc2NlbmRhbnQiLCJnZXRPcHBvc2l0ZVNpZ24iLCJpbXVtQ29lbGkiLCJhc3BlY3RzIiwiYXNwZWN0IiwicGxhbmV0MSIsInBsYW5ldDIiLCJvcmIiLCJhcHBseWluZyIsImFwaVBsYW5ldE5hbWUiLCJwbGFuZXRNYXAiLCJTdW4iLCJNb29uIiwiTWVyY3VyeSIsIlZlbnVzIiwiTWFycyIsIkp1cGl0ZXIiLCJTYXR1cm4iLCJVcmFudXMiLCJOZXB0dW5lIiwiUGx1dG8iLCJSYWh1IiwiS2V0dSIsInpvZGlhY1NpZ25zIiwiaW5kZXgiLCJpbmRleE9mIiwib3Bwb3NpdGVJbmRleCIsImdldE5hdGFsQ2hhcnRJbnRlcnByZXRhdGlvbiIsIm5hdGFsQ2hhcnQiLCJvdmVydmlldyIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJzdW5TaWduIiwia2V5d29yZHMiLCJtb29uU2lnbiIsImFzY2VuZGFudFNpZ24iLCJwbGFuZXRQb3NpdGlvbnMiLCJzdW4iLCJtb29uIiwibWVyY3VyeSIsInZlbnVzIiwibWFycyIsImp1cGl0ZXIiLCJzYXR1cm4iLCJ1cmFudXMiLCJuZXB0dW5lIiwicGx1dG8iLCJnZXREYWlseUhvcm9zY29wZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInByZWRpY3Rpb24iLCJsdWNreV9udW1iZXIiLCJsdWNreV9jb2xvciIsIm1vb2QiLCJjb21wYXRpYmlsaXR5Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./services/astrology-api-service.ts\n");

/***/ }),

/***/ "(ssr)/./services/astrology-service.ts":
/*!***************************************!*\
  !*** ./services/astrology-service.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchNatalChart: () => (/* binding */ fetchNatalChart),\n/* harmony export */   fetchNatalWheelChartSVG: () => (/* binding */ fetchNatalWheelChartSVG),\n/* harmony export */   geocodeLocation: () => (/* binding */ geocodeLocation),\n/* harmony export */   getDailyHoroscope: () => (/* binding */ getDailyHoroscope),\n/* harmony export */   getNatalChartInterpretation: () => (/* binding */ getNatalChartInterpretation)\n/* harmony export */ });\n/* harmony import */ var _astrology_api_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./astrology-api-service */ \"(ssr)/./services/astrology-api-service.ts\");\n/**\n * Astrology Service\n * Handles all interactions with astrology APIs and data processing\n */ \n/**\n * Fetches natal chart data\n */ async function fetchNatalChart(birthDate, birthTime, latitude, longitude) {\n    try {\n        // Calculate timezone from longitude (approximate)\n        // In a real app, you would use a timezone API or library\n        const timezone = Math.round(longitude / 15);\n        // Use the AstrologyAPI service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.fetchNatalChart)(birthDate, birthTime, latitude, longitude, timezone);\n    } catch (error) {\n        console.error(\"Error fetching natal chart:\", error);\n        throw error;\n    }\n}\n/**\n * Fetches natal wheel chart SVG\n */ async function fetchNatalWheelChartSVG(birthDate, birthTime, latitude, longitude) {\n    try {\n        // Calculate timezone from longitude (approximate)\n        const timezone = Math.round(longitude / 15);\n        // Use the AstrologyAPI service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.fetchNatalWheelChartSVG)(birthDate, birthTime, latitude, longitude, timezone);\n    } catch (error) {\n        console.error(\"Error fetching natal wheel chart SVG:\", error);\n        throw error;\n    }\n}\n/**\n * Geocodes a location string to get latitude and longitude\n */ async function geocodeLocation(locationString) {\n    try {\n        // Try to use a simple geocoding approach first\n        const simpleGeocode = getSimpleGeocoding(locationString);\n        if (simpleGeocode) {\n            console.log(\"Using simple geocoding for:\", locationString);\n            return simpleGeocode;\n        }\n        // Try the direct API call first\n        try {\n            const result = await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.geocodeLocation)(locationString);\n            if (result.latitude !== 0 || result.longitude !== 0) {\n                return result;\n            }\n        } catch (error) {\n            console.warn(\"Direct API geocoding failed, trying /api/geocode\", error);\n        }\n        // Fallback: use the custom /api/geocode endpoint with POST\n        try {\n            const response = await fetch(\"/api/geocode\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    location: locationString\n                })\n            });\n            if (response.ok) {\n                const data = await response.json();\n                return {\n                    latitude: data.latitude,\n                    longitude: data.longitude,\n                    name: data.name || locationString\n                };\n            }\n        } catch (error) {\n            console.error(\"Error using /api/geocode fallback:\", error);\n        }\n        // Final fallback\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    } catch (error) {\n        console.error(\"Error in geocoding service:\", error);\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    }\n}\n/**\n * Simple geocoding function for common locations\n * This serves as a fallback when the API fails\n */ function getSimpleGeocoding(locationString, forceFallback = false) {\n    // Normalize the input\n    const normalizedInput = locationString.toLowerCase().trim();\n    // Common city coordinates\n    const cityCoordinates = {\n        // North America\n        \"new york\": [\n            40.7128,\n            -74.006\n        ],\n        \"los angeles\": [\n            34.0522,\n            -118.2437\n        ],\n        chicago: [\n            41.8781,\n            -87.6298\n        ],\n        toronto: [\n            43.6532,\n            -79.3832\n        ],\n        \"mexico city\": [\n            19.4326,\n            -99.1332\n        ],\n        // Europe\n        london: [\n            51.5074,\n            -0.1278\n        ],\n        paris: [\n            48.8566,\n            2.3522\n        ],\n        berlin: [\n            52.52,\n            13.405\n        ],\n        madrid: [\n            40.4168,\n            -3.7038\n        ],\n        rome: [\n            41.9028,\n            12.4964\n        ],\n        amsterdam: [\n            52.3676,\n            4.9041\n        ],\n        vienna: [\n            48.2082,\n            16.3738\n        ],\n        hamburg: [\n            53.5511,\n            9.9937\n        ],\n        // Asia\n        tokyo: [\n            35.6762,\n            139.6503\n        ],\n        beijing: [\n            39.9042,\n            116.4074\n        ],\n        mumbai: [\n            19.076,\n            72.8777\n        ],\n        singapore: [\n            1.3521,\n            103.8198\n        ],\n        // Australia\n        sydney: [\n            -33.8688,\n            151.2093\n        ],\n        melbourne: [\n            -37.8136,\n            144.9631\n        ],\n        // South America\n        \"rio de janeiro\": [\n            -22.9068,\n            -43.1729\n        ],\n        \"buenos aires\": [\n            -34.6037,\n            -58.3816\n        ],\n        // Africa\n        cairo: [\n            30.0444,\n            31.2357\n        ],\n        \"cape town\": [\n            -33.9249,\n            18.4241\n        ]\n    };\n    // Check for exact matches\n    for (const [city, coordinates] of Object.entries(cityCoordinates)){\n        if (normalizedInput.includes(city)) {\n            return {\n                latitude: coordinates[0],\n                longitude: coordinates[1],\n                name: locationString\n            };\n        }\n    }\n    // If we're forcing a fallback or the input is very short, use a default\n    if (forceFallback || normalizedInput.length < 3) {\n        // Default to a central location (0,0 is in the Atlantic Ocean)\n        return {\n            latitude: 0,\n            longitude: 0,\n            name: locationString\n        };\n    }\n    // No match found\n    return null;\n}\n/**\n * Gets interpretations for a natal chart\n */ async function getNatalChartInterpretation(natalChart) {\n    try {\n        // Use the AstrologyAPI interpretation service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.getNatalChartInterpretation)(natalChart);\n    } catch (error) {\n        console.error(\"Error getting chart interpretation:\", error);\n        throw error;\n    }\n}\n/**\n * Gets a daily horoscope for a zodiac sign\n */ async function getDailyHoroscope(sign) {\n    try {\n        // Use the AstrologyAPI horoscope service\n        return await (0,_astrology_api_service__WEBPACK_IMPORTED_MODULE_0__.getDailyHoroscope)(sign);\n    } catch (error) {\n        console.error(\"Error getting daily horoscope:\", error);\n        throw error;\n    }\n}\n// Define zodiacSymbols\nconst zodiacSymbols = {\n    aries: \"\",\n    taurus: \"\",\n    gemini: \"\",\n    cancer: \"\",\n    leo: \"\",\n    virgo: \"\",\n    libra: \"\",\n    scorpio: \"\",\n    sagittarius: \"\",\n    capricorn: \"\",\n    aquarius: \"\",\n    pisces: \"\"\n};\n// Add a function to create a placeholder chart when the API fails\nfunction createPlaceholderChart(birthDate, birthTime, latitude, longitude) {\n    // Create a basic placeholder chart with minimal data\n    const [year, month, day] = birthDate.split(\"-\").map(Number);\n    const [hour, minute] = birthTime.split(\":\").map(Number);\n    // Generate some placeholder planets\n    const planets = [\n        {\n            name: \"sun\",\n            sign: \"aries\",\n            degree: 15,\n            house: 1,\n            retrograde: false\n        },\n        {\n            name: \"moon\",\n            sign: \"taurus\",\n            degree: 25,\n            house: 2,\n            retrograde: false\n        },\n        {\n            name: \"mercury\",\n            sign: \"gemini\",\n            degree: 5,\n            house: 3,\n            retrograde: false\n        },\n        {\n            name: \"venus\",\n            sign: \"cancer\",\n            degree: 10,\n            house: 4,\n            retrograde: false\n        },\n        {\n            name: \"mars\",\n            sign: \"leo\",\n            degree: 20,\n            house: 5,\n            retrograde: false\n        },\n        {\n            name: \"jupiter\",\n            sign: \"virgo\",\n            degree: 15,\n            house: 6,\n            retrograde: false\n        },\n        {\n            name: \"saturn\",\n            sign: \"libra\",\n            degree: 5,\n            house: 7,\n            retrograde: true\n        }\n    ];\n    // Generate placeholder houses\n    const houses = Array.from({\n        length: 12\n    }, (_, i)=>({\n            number: i + 1,\n            sign: Object.keys(zodiacSymbols)[i % 12],\n            degree: i * 30 % 360,\n            cusp: true\n        }));\n    // Generate placeholder angles\n    const angles = {\n        ascendant: {\n            sign: \"aries\",\n            degree: 0\n        },\n        midheaven: {\n            sign: \"capricorn\",\n            degree: 270\n        },\n        descendant: {\n            sign: \"libra\",\n            degree: 180\n        },\n        imumCoeli: {\n            sign: \"cancer\",\n            degree: 90\n        }\n    };\n    return {\n        planets,\n        houses,\n        angles,\n        aspects: [],\n        birthDetails: {\n            date: birthDate,\n            time: birthTime,\n            location: {\n                latitude,\n                longitude,\n                name: \"Location data unavailable\"\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQUc7SUFDMUM7SUFFQSxPQUFPO1FBQ0xEO1FBQ0FJO1FBQ0FRO1FBQ0FLLFNBQVMsRUFBRTtRQUNYQyxjQUFjO1lBQ1pDLE1BQU1sRztZQUNObUcsTUFBTWxHO1lBQ05xQixVQUFVO2dCQUNScEI7Z0JBQ0FDO2dCQUNBdUIsTUFBTTtZQUNSO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFya29ub3Zha292c2tpL0RvY3VtZW50cy9WaXN1YWwgQ29kZS9Bc3Ryb0Jvb2svQXN0cm9Cb29rL3NlcnZpY2VzL2FzdHJvbG9neS1zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXN0cm9sb2d5IFNlcnZpY2VcbiAqIEhhbmRsZXMgYWxsIGludGVyYWN0aW9ucyB3aXRoIGFzdHJvbG9neSBBUElzIGFuZCBkYXRhIHByb2Nlc3NpbmdcbiAqL1xuXG5pbXBvcnQgdHlwZSB7IE5hdGFsQ2hhcnQsIENoYXJ0SW50ZXJwcmV0YXRpb24sIFpvZGlhY1NpZ24gfSBmcm9tIFwiQC90eXBlcy9hc3Ryb2xvZ3lcIlxuaW1wb3J0IHtcbiAgZmV0Y2hOYXRhbENoYXJ0IGFzIGZldGNoTmF0YWxDaGFydEZyb21BUEksXG4gIGdlb2NvZGVMb2NhdGlvbiBhcyBnZW9jb2RlTG9jYXRpb25Gcm9tQVBJLFxuICBnZXROYXRhbENoYXJ0SW50ZXJwcmV0YXRpb24gYXMgZ2V0SW50ZXJwcmV0YXRpb25Gcm9tQVBJLFxuICBnZXREYWlseUhvcm9zY29wZSBhcyBnZXREYWlseUhvcm9zY29wZUZyb21BUEksXG4gIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHIGFzIGZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHRnJvbUFQSSxcbn0gZnJvbSBcIi4vYXN0cm9sb2d5LWFwaS1zZXJ2aWNlXCJcblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIGNoYXJ0IGRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTmF0YWxDaGFydChcbiAgYmlydGhEYXRlOiBzdHJpbmcsXG4gIGJpcnRoVGltZTogc3RyaW5nLFxuICBsYXRpdHVkZTogbnVtYmVyLFxuICBsb25naXR1ZGU6IG51bWJlcixcbik6IFByb21pc2U8TmF0YWxDaGFydD4ge1xuICB0cnkge1xuICAgIC8vIENhbGN1bGF0ZSB0aW1lem9uZSBmcm9tIGxvbmdpdHVkZSAoYXBwcm94aW1hdGUpXG4gICAgLy8gSW4gYSByZWFsIGFwcCwgeW91IHdvdWxkIHVzZSBhIHRpbWV6b25lIEFQSSBvciBsaWJyYXJ5XG4gICAgY29uc3QgdGltZXpvbmUgPSBNYXRoLnJvdW5kKGxvbmdpdHVkZSAvIDE1KVxuXG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBmZXRjaE5hdGFsQ2hhcnRGcm9tQVBJKGJpcnRoRGF0ZSwgYmlydGhUaW1lLCBsYXRpdHVkZSwgbG9uZ2l0dWRlLCB0aW1lem9uZSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgbmF0YWwgY2hhcnQ6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBGZXRjaGVzIG5hdGFsIHdoZWVsIGNoYXJ0IFNWR1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hOYXRhbFdoZWVsQ2hhcnRTVkcoXG4gIGJpcnRoRGF0ZTogc3RyaW5nLFxuICBiaXJ0aFRpbWU6IHN0cmluZyxcbiAgbGF0aXR1ZGU6IG51bWJlcixcbiAgbG9uZ2l0dWRlOiBudW1iZXIsXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIENhbGN1bGF0ZSB0aW1lem9uZSBmcm9tIGxvbmdpdHVkZSAoYXBwcm94aW1hdGUpXG4gICAgY29uc3QgdGltZXpvbmUgPSBNYXRoLnJvdW5kKGxvbmdpdHVkZSAvIDE1KVxuXG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBmZXRjaE5hdGFsV2hlZWxDaGFydFNWR0Zyb21BUEkoYmlydGhEYXRlLCBiaXJ0aFRpbWUsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHRpbWV6b25lKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBuYXRhbCB3aGVlbCBjaGFydCBTVkc6XCIsIGVycm9yKVxuICAgIHRocm93IGVycm9yXG4gIH1cbn1cblxuLyoqXG4gKiBHZW9jb2RlcyBhIGxvY2F0aW9uIHN0cmluZyB0byBnZXQgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VvY29kZUxvY2F0aW9uKFxuICBsb2NhdGlvblN0cmluZzogc3RyaW5nLFxuKTogUHJvbWlzZTx7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIC8vIFRyeSB0byB1c2UgYSBzaW1wbGUgZ2VvY29kaW5nIGFwcHJvYWNoIGZpcnN0XG4gICAgY29uc3Qgc2ltcGxlR2VvY29kZSA9IGdldFNpbXBsZUdlb2NvZGluZyhsb2NhdGlvblN0cmluZylcbiAgICBpZiAoc2ltcGxlR2VvY29kZSkge1xuICAgICAgY29uc29sZS5sb2coXCJVc2luZyBzaW1wbGUgZ2VvY29kaW5nIGZvcjpcIiwgbG9jYXRpb25TdHJpbmcpXG4gICAgICByZXR1cm4gc2ltcGxlR2VvY29kZVxuICAgIH1cblxuICAgIC8vIFRyeSB0aGUgZGlyZWN0IEFQSSBjYWxsIGZpcnN0XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdlb2NvZGVMb2NhdGlvbkZyb21BUEkobG9jYXRpb25TdHJpbmcpXG4gICAgICBpZiAocmVzdWx0LmxhdGl0dWRlICE9PSAwIHx8IHJlc3VsdC5sb25naXR1ZGUgIT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJEaXJlY3QgQVBJIGdlb2NvZGluZyBmYWlsZWQsIHRyeWluZyAvYXBpL2dlb2NvZGVcIiwgZXJyb3IpXG4gICAgfVxuXG4gICAgLy8gRmFsbGJhY2s6IHVzZSB0aGUgY3VzdG9tIC9hcGkvZ2VvY29kZSBlbmRwb2ludCB3aXRoIFBPU1RcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9hcGkvZ2VvY29kZVwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBsb2NhdGlvbjogbG9jYXRpb25TdHJpbmcgfSlcbiAgICAgIH0pXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxhdGl0dWRlOiBkYXRhLmxhdGl0dWRlLFxuICAgICAgICAgIGxvbmdpdHVkZTogZGF0YS5sb25naXR1ZGUsXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lIHx8IGxvY2F0aW9uU3RyaW5nLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1c2luZyAvYXBpL2dlb2NvZGUgZmFsbGJhY2s6XCIsIGVycm9yKVxuICAgIH1cblxuICAgIC8vIEZpbmFsIGZhbGxiYWNrXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAwLFxuICAgICAgbG9uZ2l0dWRlOiAwLFxuICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZW9jb2Rpbmcgc2VydmljZTpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIHtcbiAgICAgIGxhdGl0dWRlOiAwLFxuICAgICAgbG9uZ2l0dWRlOiAwLFxuICAgICAgbmFtZTogbG9jYXRpb25TdHJpbmcsXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU2ltcGxlIGdlb2NvZGluZyBmdW5jdGlvbiBmb3IgY29tbW9uIGxvY2F0aW9uc1xuICogVGhpcyBzZXJ2ZXMgYXMgYSBmYWxsYmFjayB3aGVuIHRoZSBBUEkgZmFpbHNcbiAqL1xuZnVuY3Rpb24gZ2V0U2ltcGxlR2VvY29kaW5nKFxuICBsb2NhdGlvblN0cmluZzogc3RyaW5nLFxuICBmb3JjZUZhbGxiYWNrID0gZmFsc2UsXG4pOiB7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfSB8IG51bGwge1xuICAvLyBOb3JtYWxpemUgdGhlIGlucHV0XG4gIGNvbnN0IG5vcm1hbGl6ZWRJbnB1dCA9IGxvY2F0aW9uU3RyaW5nLnRvTG93ZXJDYXNlKCkudHJpbSgpXG5cbiAgLy8gQ29tbW9uIGNpdHkgY29vcmRpbmF0ZXNcbiAgY29uc3QgY2l0eUNvb3JkaW5hdGVzOiBSZWNvcmQ8c3RyaW5nLCBbbnVtYmVyLCBudW1iZXJdPiA9IHtcbiAgICAvLyBOb3J0aCBBbWVyaWNhXG4gICAgXCJuZXcgeW9ya1wiOiBbNDAuNzEyOCwgLTc0LjAwNl0sXG4gICAgXCJsb3MgYW5nZWxlc1wiOiBbMzQuMDUyMiwgLTExOC4yNDM3XSxcbiAgICBjaGljYWdvOiBbNDEuODc4MSwgLTg3LjYyOThdLFxuICAgIHRvcm9udG86IFs0My42NTMyLCAtNzkuMzgzMl0sXG4gICAgXCJtZXhpY28gY2l0eVwiOiBbMTkuNDMyNiwgLTk5LjEzMzJdLFxuXG4gICAgLy8gRXVyb3BlXG4gICAgbG9uZG9uOiBbNTEuNTA3NCwgLTAuMTI3OF0sXG4gICAgcGFyaXM6IFs0OC44NTY2LCAyLjM1MjJdLFxuICAgIGJlcmxpbjogWzUyLjUyLCAxMy40MDVdLFxuICAgIG1hZHJpZDogWzQwLjQxNjgsIC0zLjcwMzhdLFxuICAgIHJvbWU6IFs0MS45MDI4LCAxMi40OTY0XSxcbiAgICBhbXN0ZXJkYW06IFs1Mi4zNjc2LCA0LjkwNDFdLFxuICAgIHZpZW5uYTogWzQ4LjIwODIsIDE2LjM3MzhdLFxuICAgIGhhbWJ1cmc6IFs1My41NTExLCA5Ljk5MzddLFxuXG4gICAgLy8gQXNpYVxuICAgIHRva3lvOiBbMzUuNjc2MiwgMTM5LjY1MDNdLFxuICAgIGJlaWppbmc6IFszOS45MDQyLCAxMTYuNDA3NF0sXG4gICAgbXVtYmFpOiBbMTkuMDc2LCA3Mi44Nzc3XSxcbiAgICBzaW5nYXBvcmU6IFsxLjM1MjEsIDEwMy44MTk4XSxcblxuICAgIC8vIEF1c3RyYWxpYVxuICAgIHN5ZG5leTogWy0zMy44Njg4LCAxNTEuMjA5M10sXG4gICAgbWVsYm91cm5lOiBbLTM3LjgxMzYsIDE0NC45NjMxXSxcblxuICAgIC8vIFNvdXRoIEFtZXJpY2FcbiAgICBcInJpbyBkZSBqYW5laXJvXCI6IFstMjIuOTA2OCwgLTQzLjE3MjldLFxuICAgIFwiYnVlbm9zIGFpcmVzXCI6IFstMzQuNjAzNywgLTU4LjM4MTZdLFxuXG4gICAgLy8gQWZyaWNhXG4gICAgY2Fpcm86IFszMC4wNDQ0LCAzMS4yMzU3XSxcbiAgICBcImNhcGUgdG93blwiOiBbLTMzLjkyNDksIDE4LjQyNDFdLFxuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGV4YWN0IG1hdGNoZXNcbiAgZm9yIChjb25zdCBbY2l0eSwgY29vcmRpbmF0ZXNdIG9mIE9iamVjdC5lbnRyaWVzKGNpdHlDb29yZGluYXRlcykpIHtcbiAgICBpZiAobm9ybWFsaXplZElucHV0LmluY2x1ZGVzKGNpdHkpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsYXRpdHVkZTogY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgIGxvbmdpdHVkZTogY29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIG5hbWU6IGxvY2F0aW9uU3RyaW5nLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIElmIHdlJ3JlIGZvcmNpbmcgYSBmYWxsYmFjayBvciB0aGUgaW5wdXQgaXMgdmVyeSBzaG9ydCwgdXNlIGEgZGVmYXVsdFxuICBpZiAoZm9yY2VGYWxsYmFjayB8fCBub3JtYWxpemVkSW5wdXQubGVuZ3RoIDwgMykge1xuICAgIC8vIERlZmF1bHQgdG8gYSBjZW50cmFsIGxvY2F0aW9uICgwLDAgaXMgaW4gdGhlIEF0bGFudGljIE9jZWFuKVxuICAgIHJldHVybiB7XG4gICAgICBsYXRpdHVkZTogMCxcbiAgICAgIGxvbmdpdHVkZTogMCxcbiAgICAgIG5hbWU6IGxvY2F0aW9uU3RyaW5nLFxuICAgIH1cbiAgfVxuXG4gIC8vIE5vIG1hdGNoIGZvdW5kXG4gIHJldHVybiBudWxsXG59XG5cbi8qKlxuICogR2V0cyBpbnRlcnByZXRhdGlvbnMgZm9yIGEgbmF0YWwgY2hhcnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5hdGFsQ2hhcnRJbnRlcnByZXRhdGlvbihuYXRhbENoYXJ0OiBOYXRhbENoYXJ0KTogUHJvbWlzZTxDaGFydEludGVycHJldGF0aW9uPiB7XG4gIHRyeSB7XG4gICAgLy8gVXNlIHRoZSBBc3Ryb2xvZ3lBUEkgaW50ZXJwcmV0YXRpb24gc2VydmljZVxuICAgIHJldHVybiBhd2FpdCBnZXRJbnRlcnByZXRhdGlvbkZyb21BUEkobmF0YWxDaGFydClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBjaGFydCBpbnRlcnByZXRhdGlvbjpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vKipcbiAqIEdldHMgYSBkYWlseSBob3Jvc2NvcGUgZm9yIGEgem9kaWFjIHNpZ25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERhaWx5SG9yb3Njb3BlKHNpZ246IFpvZGlhY1NpZ24pOiBQcm9taXNlPGFueT4ge1xuICB0cnkge1xuICAgIC8vIFVzZSB0aGUgQXN0cm9sb2d5QVBJIGhvcm9zY29wZSBzZXJ2aWNlXG4gICAgcmV0dXJuIGF3YWl0IGdldERhaWx5SG9yb3Njb3BlRnJvbUFQSShzaWduKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGRhaWx5IGhvcm9zY29wZTpcIiwgZXJyb3IpXG4gICAgdGhyb3cgZXJyb3JcbiAgfVxufVxuXG4vLyBEZWZpbmUgem9kaWFjU3ltYm9sc1xuY29uc3Qgem9kaWFjU3ltYm9sczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgYXJpZXM6IFwi4pmIXCIsXG4gIHRhdXJ1czogXCLimYlcIixcbiAgZ2VtaW5pOiBcIuKZilwiLFxuICBjYW5jZXI6IFwi4pmLXCIsXG4gIGxlbzogXCLimYxcIixcbiAgdmlyZ286IFwi4pmNXCIsXG4gIGxpYnJhOiBcIuKZjlwiLFxuICBzY29ycGlvOiBcIuKZj1wiLFxuICBzYWdpdHRhcml1czogXCLimZBcIixcbiAgY2Fwcmljb3JuOiBcIuKZkVwiLFxuICBhcXVhcml1czogXCLimZJcIixcbiAgcGlzY2VzOiBcIuKZk1wiLFxufVxuXG4vLyBEZWZpbmUgdGhlIFBsYW5ldFBvc2l0aW9uIHR5cGVcbmludGVyZmFjZSBQbGFuZXRQb3NpdGlvbiB7XG4gIG5hbWU6IHN0cmluZ1xuICBzaWduOiBzdHJpbmdcbiAgZGVncmVlOiBudW1iZXJcbiAgaG91c2U6IG51bWJlclxuICByZXRyb2dyYWRlOiBib29sZWFuXG59XG5cbi8vIEFkZCBhIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIHBsYWNlaG9sZGVyIGNoYXJ0IHdoZW4gdGhlIEFQSSBmYWlsc1xuZnVuY3Rpb24gY3JlYXRlUGxhY2Vob2xkZXJDaGFydChiaXJ0aERhdGU6IHN0cmluZywgYmlydGhUaW1lOiBzdHJpbmcsIGxhdGl0dWRlOiBudW1iZXIsIGxvbmdpdHVkZTogbnVtYmVyKTogTmF0YWxDaGFydCB7XG4gIC8vIENyZWF0ZSBhIGJhc2ljIHBsYWNlaG9sZGVyIGNoYXJ0IHdpdGggbWluaW1hbCBkYXRhXG4gIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGJpcnRoRGF0ZS5zcGxpdChcIi1cIikubWFwKE51bWJlcilcbiAgY29uc3QgW2hvdXIsIG1pbnV0ZV0gPSBiaXJ0aFRpbWUuc3BsaXQoXCI6XCIpLm1hcChOdW1iZXIpXG5cbiAgLy8gR2VuZXJhdGUgc29tZSBwbGFjZWhvbGRlciBwbGFuZXRzXG4gIGNvbnN0IHBsYW5ldHM6IFBsYW5ldFBvc2l0aW9uW10gPSBbXG4gICAgeyBuYW1lOiBcInN1blwiLCBzaWduOiBcImFyaWVzXCIsIGRlZ3JlZTogMTUsIGhvdXNlOiAxLCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJtb29uXCIsIHNpZ246IFwidGF1cnVzXCIsIGRlZ3JlZTogMjUsIGhvdXNlOiAyLCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJtZXJjdXJ5XCIsIHNpZ246IFwiZ2VtaW5pXCIsIGRlZ3JlZTogNSwgaG91c2U6IDMsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcInZlbnVzXCIsIHNpZ246IFwiY2FuY2VyXCIsIGRlZ3JlZTogMTAsIGhvdXNlOiA0LCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJtYXJzXCIsIHNpZ246IFwibGVvXCIsIGRlZ3JlZTogMjAsIGhvdXNlOiA1LCByZXRyb2dyYWRlOiBmYWxzZSB9LFxuICAgIHsgbmFtZTogXCJqdXBpdGVyXCIsIHNpZ246IFwidmlyZ29cIiwgZGVncmVlOiAxNSwgaG91c2U6IDYsIHJldHJvZ3JhZGU6IGZhbHNlIH0sXG4gICAgeyBuYW1lOiBcInNhdHVyblwiLCBzaWduOiBcImxpYnJhXCIsIGRlZ3JlZTogNSwgaG91c2U6IDcsIHJldHJvZ3JhZGU6IHRydWUgfSxcbiAgXVxuXG4gIC8vIEdlbmVyYXRlIHBsYWNlaG9sZGVyIGhvdXNlc1xuICBjb25zdCBob3VzZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMiB9LCAoXywgaSkgPT4gKHtcbiAgICBudW1iZXI6IGkgKyAxLFxuICAgIHNpZ246IE9iamVjdC5rZXlzKHpvZGlhY1N5bWJvbHMpW2kgJSAxMl0gYXMgWm9kaWFjU2lnbixcbiAgICBkZWdyZWU6IChpICogMzApICUgMzYwLFxuICAgIGN1c3A6IHRydWUsXG4gIH0pKVxuXG4gIC8vIEdlbmVyYXRlIHBsYWNlaG9sZGVyIGFuZ2xlc1xuICBjb25zdCBhbmdsZXMgPSB7XG4gICAgYXNjZW5kYW50OiB7IHNpZ246IFwiYXJpZXNcIiwgZGVncmVlOiAwIH0sXG4gICAgbWlkaGVhdmVuOiB7IHNpZ246IFwiY2Fwcmljb3JuXCIsIGRlZ3JlZTogMjcwIH0sXG4gICAgZGVzY2VuZGFudDogeyBzaWduOiBcImxpYnJhXCIsIGRlZ3JlZTogMTgwIH0sXG4gICAgaW11bUNvZWxpOiB7IHNpZ246IFwiY2FuY2VyXCIsIGRlZ3JlZTogOTAgfSxcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcGxhbmV0cyxcbiAgICBob3VzZXMsXG4gICAgYW5nbGVzLFxuICAgIGFzcGVjdHM6IFtdLFxuICAgIGJpcnRoRGV0YWlsczoge1xuICAgICAgZGF0ZTogYmlydGhEYXRlLFxuICAgICAgdGltZTogYmlydGhUaW1lLFxuICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgbGF0aXR1ZGUsXG4gICAgICAgIGxvbmdpdHVkZSxcbiAgICAgICAgbmFtZTogXCJMb2NhdGlvbiBkYXRhIHVuYXZhaWxhYmxlXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbImZldGNoTmF0YWxDaGFydCIsImZldGNoTmF0YWxDaGFydEZyb21BUEkiLCJnZW9jb2RlTG9jYXRpb24iLCJnZW9jb2RlTG9jYXRpb25Gcm9tQVBJIiwiZ2V0TmF0YWxDaGFydEludGVycHJldGF0aW9uIiwiZ2V0SW50ZXJwcmV0YXRpb25Gcm9tQVBJIiwiZ2V0RGFpbHlIb3Jvc2NvcGUiLCJnZXREYWlseUhvcm9zY29wZUZyb21BUEkiLCJmZXRjaE5hdGFsV2hlZWxDaGFydFNWRyIsImZldGNoTmF0YWxXaGVlbENoYXJ0U1ZHRnJvbUFQSSIsImJpcnRoRGF0ZSIsImJpcnRoVGltZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwidGltZXpvbmUiLCJNYXRoIiwicm91bmQiLCJlcnJvciIsImNvbnNvbGUiLCJsb2NhdGlvblN0cmluZyIsInNpbXBsZUdlb2NvZGUiLCJnZXRTaW1wbGVHZW9jb2RpbmciLCJsb2ciLCJyZXN1bHQiLCJ3YXJuIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImxvY2F0aW9uIiwib2siLCJkYXRhIiwianNvbiIsIm5hbWUiLCJmb3JjZUZhbGxiYWNrIiwibm9ybWFsaXplZElucHV0IiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiY2l0eUNvb3JkaW5hdGVzIiwiY2hpY2FnbyIsInRvcm9udG8iLCJsb25kb24iLCJwYXJpcyIsImJlcmxpbiIsIm1hZHJpZCIsInJvbWUiLCJhbXN0ZXJkYW0iLCJ2aWVubmEiLCJoYW1idXJnIiwidG9reW8iLCJiZWlqaW5nIiwibXVtYmFpIiwic2luZ2Fwb3JlIiwic3lkbmV5IiwibWVsYm91cm5lIiwiY2Fpcm8iLCJjaXR5IiwiY29vcmRpbmF0ZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiaW5jbHVkZXMiLCJsZW5ndGgiLCJuYXRhbENoYXJ0Iiwic2lnbiIsInpvZGlhY1N5bWJvbHMiLCJhcmllcyIsInRhdXJ1cyIsImdlbWluaSIsImNhbmNlciIsImxlbyIsInZpcmdvIiwibGlicmEiLCJzY29ycGlvIiwic2FnaXR0YXJpdXMiLCJjYXByaWNvcm4iLCJhcXVhcml1cyIsInBpc2NlcyIsImNyZWF0ZVBsYWNlaG9sZGVyQ2hhcnQiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJzcGxpdCIsIm1hcCIsIk51bWJlciIsImhvdXIiLCJtaW51dGUiLCJwbGFuZXRzIiwiZGVncmVlIiwiaG91c2UiLCJyZXRyb2dyYWRlIiwiaG91c2VzIiwiQXJyYXkiLCJmcm9tIiwiXyIsImkiLCJudW1iZXIiLCJrZXlzIiwiY3VzcCIsImFuZ2xlcyIsImFzY2VuZGFudCIsIm1pZGhlYXZlbiIsImRlc2NlbmRhbnQiLCJpbXVtQ29lbGkiLCJhc3BlY3RzIiwiYmlydGhEZXRhaWxzIiwiZGF0ZSIsInRpbWUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./services/astrology-service.ts\n");

/***/ }),

/***/ "(ssr)/./utils/fallback-chart.ts":
/*!*********************************!*\
  !*** ./utils/fallback-chart.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getFallbackChartSVG: () => (/* binding */ getFallbackChartSVG),\n/* harmony export */   getFallbackNatalChart: () => (/* binding */ getFallbackNatalChart),\n/* harmony export */   loadFallbackNatalChart: () => (/* binding */ loadFallbackNatalChart),\n/* harmony export */   preloadFallbackNatalChart: () => (/* binding */ preloadFallbackNatalChart),\n/* harmony export */   sanitizeSvg: () => (/* binding */ sanitizeSvg)\n/* harmony export */ });\n/* harmony import */ var _utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/utils/safe-storage */ \"(ssr)/./utils/safe-storage.ts\");\n\nconst getFallbackChartSVG = ()=>{\n    return `<svg \n    xmlns=\"http://www.w3.org/2000/svg\" \n    viewBox=\"0 0 800 800\" \n    width=\"100%\" \n    height=\"100%\"\n  >\n    <!-- Outer circle -->\n    <circle cx=\"400\" cy=\"400\" r=\"350\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" />\n    \n    <!-- Inner circle -->\n    <circle cx=\"400\" cy=\"400\" r=\"300\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1\" />\n    \n    <!-- Zodiac divisions - 12 segments -->\n    ${Array.from({\n        length: 12\n    }).map((_, i)=>{\n        const angle = i * 30 * Math.PI / 180;\n        const x1 = 400 + 350 * Math.cos(angle);\n        const y1 = 400 + 350 * Math.sin(angle);\n        const x2 = 400 + 300 * Math.cos(angle);\n        const y2 = 400 + 300 * Math.sin(angle);\n        return `<line x1=\"${x1}\" y1=\"${y1}\" x2=\"${x2}\" y2=\"${y2}\" stroke=\"currentColor\" stroke-width=\"1\" />`;\n    }).join(\"\")}\n    \n    <!-- Zodiac symbols -->\n    ${[\n        {\n            symbol: \"\",\n            name: \"Aries\",\n            angle: 15\n        },\n        {\n            symbol: \"\",\n            name: \"Taurus\",\n            angle: 45\n        },\n        {\n            symbol: \"\",\n            name: \"Gemini\",\n            angle: 75\n        },\n        {\n            symbol: \"\",\n            name: \"Cancer\",\n            angle: 105\n        },\n        {\n            symbol: \"\",\n            name: \"Leo\",\n            angle: 135\n        },\n        {\n            symbol: \"\",\n            name: \"Virgo\",\n            angle: 165\n        },\n        {\n            symbol: \"\",\n            name: \"Libra\",\n            angle: 195\n        },\n        {\n            symbol: \"\",\n            name: \"Scorpio\",\n            angle: 225\n        },\n        {\n            symbol: \"\",\n            name: \"Sagittarius\",\n            angle: 255\n        },\n        {\n            symbol: \"\",\n            name: \"Capricorn\",\n            angle: 285\n        },\n        {\n            symbol: \"\",\n            name: \"Aquarius\",\n            angle: 315\n        },\n        {\n            symbol: \"\",\n            name: \"Pisces\",\n            angle: 345\n        }\n    ].map((sign)=>{\n        const angle = sign.angle * Math.PI / 180;\n        const x = 400 + 325 * Math.cos(angle);\n        const y = 400 + 325 * Math.sin(angle);\n        return `\n        <text \n          x=\"${x}\" \n          y=\"${y}\" \n          text-anchor=\"middle\" \n          dominant-baseline=\"middle\" \n          fill=\"currentColor\" \n          font-size=\"20\"\n          font-family=\"Arial, sans-serif\"\n        >\n          ${sign.symbol}\n        </text>\n      `;\n    }).join(\"\")}\n    \n    <!-- Center point -->\n    <circle cx=\"400\" cy=\"400\" r=\"5\" fill=\"currentColor\" />\n  </svg>`.trim();\n};\n// Keep the existing functions for backward compatibility\nfunction getFallbackNatalChart() {\n    return getFallbackChartSVG();\n}\nasync function loadFallbackNatalChart() {\n    // This function simulates loading the fallback chart.\n    return getFallbackChartSVG();\n}\nasync function preloadFallbackNatalChart() {\n    console.log(\"Preloading fallback natal chart\");\n    try {\n        // Try to load from public folder first\n        const response = await fetch(\"/images/fallback-natal-chart.svg\");\n        if (response.ok) {\n            const svgText = await response.text();\n            console.log(\"Preloaded SVG from public folder, length:\", svgText.length);\n            // Sanitize the SVG before storing\n            const sanitizedSvg = sanitizeSvg(svgText);\n            // Store in sessionStorage for quick access\n            (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__.safeSetSessionItem)(\"fallbackNatalChartSVG\", sanitizedSvg);\n        } else {\n            throw new Error(\"SVG file not found\");\n        }\n    } catch (error) {\n        console.log(\"Error preloading SVG, generating fallback:\", error);\n        // Generate fallback\n        const fallbackSvg = getFallbackChartSVG();\n        // Store in sessionStorage\n        (0,_utils_safe_storage__WEBPACK_IMPORTED_MODULE_0__.safeSetSessionItem)(\"fallbackNatalChartSVG\", fallbackSvg);\n    }\n}\n// Helper function to sanitize SVG content\nfunction sanitizeSvg(svgContent) {\n    if (true) {\n        // Server-side - return as is\n        return svgContent;\n    }\n    try {\n        const parser = new DOMParser();\n        const svgDoc = parser.parseFromString(svgContent, \"image/svg+xml\");\n        const svgElement = svgDoc.documentElement;\n        // Fix invalid attributes - specifically the \"hidden\" attribute\n        const elementsWithHidden = svgElement.querySelectorAll(\"[hidden]\");\n        elementsWithHidden.forEach((el)=>{\n            const hiddenValue = el.getAttribute(\"hidden\");\n            if (hiddenValue === \"\" || hiddenValue === null) {\n                // Set a valid value for the hidden attribute\n                el.setAttribute(\"hidden\", \"true\");\n            }\n        });\n        return svgElement.outerHTML;\n    } catch (error) {\n        console.error(\"Error sanitizing SVG:\", error);\n        return svgContent;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLE9BQU9DLE9BQU87UUFDZFYsUUFBUUMsR0FBRyxDQUFDLDhDQUE4Q1M7UUFDMUQsb0JBQW9CO1FBQ3BCLE1BQU1DLGNBQWNyQztRQUNwQiwwQkFBMEI7UUFDMUJELHVFQUFrQkEsQ0FBQyx5QkFBeUJzQztJQUM5QztBQUNGO0FBRUEsMENBQTBDO0FBQ25DLFNBQVNILFlBQVlJLFVBQWtCO0lBQzVDLElBQUksSUFBNkIsRUFBRTtRQUNqQyw2QkFBNkI7UUFDN0IsT0FBT0E7SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNQyxTQUFTLElBQUlDO1FBQ25CLE1BQU1DLFNBQVNGLE9BQU9HLGVBQWUsQ0FBQ0osWUFBWTtRQUNsRCxNQUFNSyxhQUFhRixPQUFPRyxlQUFlO1FBRXpDLCtEQUErRDtRQUMvRCxNQUFNQyxxQkFBcUJGLFdBQVdHLGdCQUFnQixDQUFDO1FBQ3ZERCxtQkFBbUJFLE9BQU8sQ0FBQyxDQUFDQztZQUMxQixNQUFNQyxjQUFjRCxHQUFHRSxZQUFZLENBQUM7WUFDcEMsSUFBSUQsZ0JBQWdCLE1BQU1BLGdCQUFnQixNQUFNO2dCQUM5Qyw2Q0FBNkM7Z0JBQzdDRCxHQUFHRyxZQUFZLENBQUMsVUFBVTtZQUM1QjtRQUNGO1FBRUEsT0FBT1IsV0FBV1MsU0FBUztJQUM3QixFQUFFLE9BQU9oQixPQUFPO1FBQ2RWLFFBQVFVLEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE9BQU9FO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcmtvbm92YWtvdnNraS9Eb2N1bWVudHMvVmlzdWFsIENvZGUvQXN0cm9Cb29rL0FzdHJvQm9vay91dGlscy9mYWxsYmFjay1jaGFydC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzYWZlU2V0U2Vzc2lvbkl0ZW0gfSBmcm9tIFwiQC91dGlscy9zYWZlLXN0b3JhZ2VcIlxuXG5leHBvcnQgY29uc3QgZ2V0RmFsbGJhY2tDaGFydFNWRyA9ICgpID0+IHtcbiAgcmV0dXJuIGA8c3ZnIFxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBcbiAgICB2aWV3Qm94PVwiMCAwIDgwMCA4MDBcIiBcbiAgICB3aWR0aD1cIjEwMCVcIiBcbiAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgPlxuICAgIDwhLS0gT3V0ZXIgY2lyY2xlIC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCIzNTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiAvPlxuICAgIFxuICAgIDwhLS0gSW5uZXIgY2lyY2xlIC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCIzMDBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjFcIiAvPlxuICAgIFxuICAgIDwhLS0gWm9kaWFjIGRpdmlzaW9ucyAtIDEyIHNlZ21lbnRzIC0tPlxuICAgICR7QXJyYXkuZnJvbSh7IGxlbmd0aDogMTIgfSlcbiAgICAgIC5tYXAoKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgYW5nbGUgPSAoaSAqIDMwICogTWF0aC5QSSkgLyAxODBcbiAgICAgICAgY29uc3QgeDEgPSA0MDAgKyAzNTAgKiBNYXRoLmNvcyhhbmdsZSlcbiAgICAgICAgY29uc3QgeTEgPSA0MDAgKyAzNTAgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgY29uc3QgeDIgPSA0MDAgKyAzMDAgKiBNYXRoLmNvcyhhbmdsZSlcbiAgICAgICAgY29uc3QgeTIgPSA0MDAgKyAzMDAgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgcmV0dXJuIGA8bGluZSB4MT1cIiR7eDF9XCIgeTE9XCIke3kxfVwiIHgyPVwiJHt4Mn1cIiB5Mj1cIiR7eTJ9XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIC8+YFxuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpfVxuICAgIFxuICAgIDwhLS0gWm9kaWFjIHN5bWJvbHMgLS0+XG4gICAgJHtbXG4gICAgICB7IHN5bWJvbDogXCLimYhcIiwgbmFtZTogXCJBcmllc1wiLCBhbmdsZTogMTUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZiVwiLCBuYW1lOiBcIlRhdXJ1c1wiLCBhbmdsZTogNDUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZilwiLCBuYW1lOiBcIkdlbWluaVwiLCBhbmdsZTogNzUgfSxcbiAgICAgIHsgc3ltYm9sOiBcIuKZi1wiLCBuYW1lOiBcIkNhbmNlclwiLCBhbmdsZTogMTA1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimYxcIiwgbmFtZTogXCJMZW9cIiwgYW5nbGU6IDEzNSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmNXCIsIG5hbWU6IFwiVmlyZ29cIiwgYW5nbGU6IDE2NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmOXCIsIG5hbWU6IFwiTGlicmFcIiwgYW5nbGU6IDE5NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmPXCIsIG5hbWU6IFwiU2NvcnBpb1wiLCBhbmdsZTogMjI1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimZBcIiwgbmFtZTogXCJTYWdpdHRhcml1c1wiLCBhbmdsZTogMjU1IH0sXG4gICAgICB7IHN5bWJvbDogXCLimZFcIiwgbmFtZTogXCJDYXByaWNvcm5cIiwgYW5nbGU6IDI4NSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmSXCIsIG5hbWU6IFwiQXF1YXJpdXNcIiwgYW5nbGU6IDMxNSB9LFxuICAgICAgeyBzeW1ib2w6IFwi4pmTXCIsIG5hbWU6IFwiUGlzY2VzXCIsIGFuZ2xlOiAzNDUgfSxcbiAgICBdXG4gICAgICAubWFwKChzaWduKSA9PiB7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gKHNpZ24uYW5nbGUgKiBNYXRoLlBJKSAvIDE4MFxuICAgICAgICBjb25zdCB4ID0gNDAwICsgMzI1ICogTWF0aC5jb3MoYW5nbGUpXG4gICAgICAgIGNvbnN0IHkgPSA0MDAgKyAzMjUgKiBNYXRoLnNpbihhbmdsZSlcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgPHRleHQgXG4gICAgICAgICAgeD1cIiR7eH1cIiBcbiAgICAgICAgICB5PVwiJHt5fVwiIFxuICAgICAgICAgIHRleHQtYW5jaG9yPVwibWlkZGxlXCIgXG4gICAgICAgICAgZG9taW5hbnQtYmFzZWxpbmU9XCJtaWRkbGVcIiBcbiAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCIgXG4gICAgICAgICAgZm9udC1zaXplPVwiMjBcIlxuICAgICAgICAgIGZvbnQtZmFtaWx5PVwiQXJpYWwsIHNhbnMtc2VyaWZcIlxuICAgICAgICA+XG4gICAgICAgICAgJHtzaWduLnN5bWJvbH1cbiAgICAgICAgPC90ZXh0PlxuICAgICAgYFxuICAgICAgfSlcbiAgICAgIC5qb2luKFwiXCIpfVxuICAgIFxuICAgIDwhLS0gQ2VudGVyIHBvaW50IC0tPlxuICAgIDxjaXJjbGUgY3g9XCI0MDBcIiBjeT1cIjQwMFwiIHI9XCI1XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIC8+XG4gIDwvc3ZnPmAudHJpbSgpXG59XG5cbi8vIEtlZXAgdGhlIGV4aXN0aW5nIGZ1bmN0aW9ucyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZhbGxiYWNrTmF0YWxDaGFydCgpOiBzdHJpbmcge1xuICByZXR1cm4gZ2V0RmFsbGJhY2tDaGFydFNWRygpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRmFsbGJhY2tOYXRhbENoYXJ0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gIC8vIFRoaXMgZnVuY3Rpb24gc2ltdWxhdGVzIGxvYWRpbmcgdGhlIGZhbGxiYWNrIGNoYXJ0LlxuICByZXR1cm4gZ2V0RmFsbGJhY2tDaGFydFNWRygpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVsb2FkRmFsbGJhY2tOYXRhbENoYXJ0KCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zb2xlLmxvZyhcIlByZWxvYWRpbmcgZmFsbGJhY2sgbmF0YWwgY2hhcnRcIilcbiAgdHJ5IHtcbiAgICAvLyBUcnkgdG8gbG9hZCBmcm9tIHB1YmxpYyBmb2xkZXIgZmlyc3RcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2ltYWdlcy9mYWxsYmFjay1uYXRhbC1jaGFydC5zdmdcIilcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IHN2Z1RleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KClcbiAgICAgIGNvbnNvbGUubG9nKFwiUHJlbG9hZGVkIFNWRyBmcm9tIHB1YmxpYyBmb2xkZXIsIGxlbmd0aDpcIiwgc3ZnVGV4dC5sZW5ndGgpXG5cbiAgICAgIC8vIFNhbml0aXplIHRoZSBTVkcgYmVmb3JlIHN0b3JpbmdcbiAgICAgIGNvbnN0IHNhbml0aXplZFN2ZyA9IHNhbml0aXplU3ZnKHN2Z1RleHQpXG5cbiAgICAgIC8vIFN0b3JlIGluIHNlc3Npb25TdG9yYWdlIGZvciBxdWljayBhY2Nlc3NcbiAgICAgIHNhZmVTZXRTZXNzaW9uSXRlbShcImZhbGxiYWNrTmF0YWxDaGFydFNWR1wiLCBzYW5pdGl6ZWRTdmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTVkcgZmlsZSBub3QgZm91bmRcIilcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJFcnJvciBwcmVsb2FkaW5nIFNWRywgZ2VuZXJhdGluZyBmYWxsYmFjazpcIiwgZXJyb3IpXG4gICAgLy8gR2VuZXJhdGUgZmFsbGJhY2tcbiAgICBjb25zdCBmYWxsYmFja1N2ZyA9IGdldEZhbGxiYWNrQ2hhcnRTVkcoKVxuICAgIC8vIFN0b3JlIGluIHNlc3Npb25TdG9yYWdlXG4gICAgc2FmZVNldFNlc3Npb25JdGVtKFwiZmFsbGJhY2tOYXRhbENoYXJ0U1ZHXCIsIGZhbGxiYWNrU3ZnKTtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gc2FuaXRpemUgU1ZHIGNvbnRlbnRcbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZVN2ZyhzdmdDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIFNlcnZlci1zaWRlIC0gcmV0dXJuIGFzIGlzXG4gICAgcmV0dXJuIHN2Z0NvbnRlbnRcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpXG4gICAgY29uc3Qgc3ZnRG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhzdmdDb250ZW50LCBcImltYWdlL3N2Zyt4bWxcIilcbiAgICBjb25zdCBzdmdFbGVtZW50ID0gc3ZnRG9jLmRvY3VtZW50RWxlbWVudFxuXG4gICAgLy8gRml4IGludmFsaWQgYXR0cmlidXRlcyAtIHNwZWNpZmljYWxseSB0aGUgXCJoaWRkZW5cIiBhdHRyaWJ1dGVcbiAgICBjb25zdCBlbGVtZW50c1dpdGhIaWRkZW4gPSBzdmdFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbaGlkZGVuXVwiKVxuICAgIGVsZW1lbnRzV2l0aEhpZGRlbi5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgY29uc3QgaGlkZGVuVmFsdWUgPSBlbC5nZXRBdHRyaWJ1dGUoXCJoaWRkZW5cIilcbiAgICAgIGlmIChoaWRkZW5WYWx1ZSA9PT0gXCJcIiB8fCBoaWRkZW5WYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBTZXQgYSB2YWxpZCB2YWx1ZSBmb3IgdGhlIGhpZGRlbiBhdHRyaWJ1dGVcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiaGlkZGVuXCIsIFwidHJ1ZVwiKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gc3ZnRWxlbWVudC5vdXRlckhUTUxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igc2FuaXRpemluZyBTVkc6XCIsIGVycm9yKVxuICAgIHJldHVybiBzdmdDb250ZW50XG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbInNhZmVTZXRTZXNzaW9uSXRlbSIsImdldEZhbGxiYWNrQ2hhcnRTVkciLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJtYXAiLCJfIiwiaSIsImFuZ2xlIiwiTWF0aCIsIlBJIiwieDEiLCJjb3MiLCJ5MSIsInNpbiIsIngyIiwieTIiLCJqb2luIiwic3ltYm9sIiwibmFtZSIsInNpZ24iLCJ4IiwieSIsInRyaW0iLCJnZXRGYWxsYmFja05hdGFsQ2hhcnQiLCJsb2FkRmFsbGJhY2tOYXRhbENoYXJ0IiwicHJlbG9hZEZhbGxiYWNrTmF0YWxDaGFydCIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJzdmdUZXh0IiwidGV4dCIsInNhbml0aXplZFN2ZyIsInNhbml0aXplU3ZnIiwiRXJyb3IiLCJlcnJvciIsImZhbGxiYWNrU3ZnIiwic3ZnQ29udGVudCIsInBhcnNlciIsIkRPTVBhcnNlciIsInN2Z0RvYyIsInBhcnNlRnJvbVN0cmluZyIsInN2Z0VsZW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJlbGVtZW50c1dpdGhIaWRkZW4iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsIiwiaGlkZGVuVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJvdXRlckhUTUwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./utils/fallback-chart.ts\n");

/***/ })

};
;